var rn=Object.defineProperty;var an=(j,r,B)=>r in j?rn(j,r,{enumerable:!0,configurable:!0,writable:!0,value:B}):j[r]=B;var Dt=(j,r,B)=>(an(j,typeof r!="symbol"?r+"":r,B),B),de=(j,r,B)=>{if(!r.has(j))throw TypeError("Cannot "+B)};var b=(j,r,B)=>(de(j,r,"read from private field"),B?B.call(j):r.get(j)),Q=(j,r,B)=>{if(r.has(j))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(j):r.set(j,B)},pt=(j,r,B,c)=>(de(j,r,"write to private field"),c?c.call(j,B):r.set(j,B),B);var ie=(j,r,B,c)=>({set _(A){pt(j,r,A,B)},get _(){return b(j,r,c)}}),it=(j,r,B)=>(de(j,r,"access private method"),B);import{g as getDefaultExportFromCjs,a as getAugmentedNamespace,r as reactExports,R as React,w as warning,c as clsx,u as useMediaQuery,j as jsxRuntimeExports,S as Stack}from"./index-103fe18e.js";function _mergeNamespaces(j,r){for(var B=0;B<r.length;B++){const c=r[B];if(typeof c!="string"&&!Array.isArray(c)){for(const A in c)if(A!=="default"&&!(A in j)){const W=Object.getOwnPropertyDescriptor(c,A);W&&Object.defineProperty(j,A,W.get?W:{enumerable:!0,get:()=>c[A]})}}}return Object.freeze(Object.defineProperty(j,Symbol.toStringTag,{value:"Module"}))}var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function j(c,A,W,q,Z,L){if(L!==ReactPropTypesSecret){var k=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw k.name="Invariant Violation",k}}j.isRequired=j;function r(){return j}var B={array:j,bigint:j,bool:j,func:j,number:j,object:j,string:j,symbol:j,any:j,arrayOf:r,element:j,elementType:j,instanceOf:r,node:j,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return B.PropTypes=B,B};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports),ResumePDF="/portofoliojs/assets/Resume-5018c484.pdf";function commonjsRequire(j){throw new Error('Could not dynamically require "'+j+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(r,B){module.exports=B()})(globalThis,()=>(()=>{var __webpack_modules__=[,(j,r)=>{var kt;Object.defineProperty(r,"__esModule",{value:!0}),r.VerbosityLevel=r.Util=r.UnknownErrorException=r.UnexpectedResponseException=r.TextRenderingMode=r.RenderingIntentFlag=r.PromiseCapability=r.PermissionFlag=r.PasswordResponses=r.PasswordException=r.PageActionEventType=r.OPS=r.MissingPDFException=r.MAX_IMAGE_SIZE_TO_CACHE=r.LINE_FACTOR=r.LINE_DESCENT_FACTOR=r.InvalidPDFException=r.ImageKind=r.IDENTITY_MATRIX=r.FormatError=r.FeatureTest=r.FONT_IDENTITY_MATRIX=r.DocumentActionEventType=r.CMapCompressionType=r.BaseException=r.BASELINE_FACTOR=r.AnnotationType=r.AnnotationStateModelType=r.AnnotationReviewState=r.AnnotationReplyType=r.AnnotationMode=r.AnnotationMarkedState=r.AnnotationFlag=r.AnnotationFieldFlag=r.AnnotationEditorType=r.AnnotationEditorPrefix=r.AnnotationEditorParamsType=r.AnnotationBorderStyleType=r.AnnotationActionEventType=r.AbortException=void 0,r.assert=At,r.bytesToString=D,r.createValidAbsoluteUrl=yt,r.getModificationDate=vt,r.getVerbosityLevel=ht,r.info=rt,r.isArrayBuffer=ft,r.isArrayEqual=Et,r.normalizeUnicode=_t,r.objectFromMap=v,r.objectSize=g,r.setVerbosityLevel=tt,r.shadow=V,r.string32=i,r.stringToBytes=e,r.stringToPDFString=et,r.stringToUTF8String=st,r.unreachable=gt,r.utf8StringToString=ut,r.warn=ct;const B=[1,0,0,1,0,0];r.IDENTITY_MATRIX=B;const c=[.001,0,0,.001,0,0];r.FONT_IDENTITY_MATRIX=c;const A=1e7;r.MAX_IMAGE_SIZE_TO_CACHE=A;const W=1.35;r.LINE_FACTOR=W;const q=.35;r.LINE_DESCENT_FACTOR=q;const Z=q/W;r.BASELINE_FACTOR=Z;const L={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};r.RenderingIntentFlag=L;const k={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};r.AnnotationMode=k;const _="pdfjs_internal_editor_";r.AnnotationEditorPrefix=_;const N={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};r.AnnotationEditorType=N;const x={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};r.AnnotationEditorParamsType=x;const P={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};r.PermissionFlag=P;const p={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};r.TextRenderingMode=p;const u={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};r.ImageKind=u;const a={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};r.AnnotationType=a;const y={MARKED:"Marked",REVIEW:"Review"};r.AnnotationStateModelType=y;const S={MARKED:"Marked",UNMARKED:"Unmarked"};r.AnnotationMarkedState=S;const C={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};r.AnnotationReviewState=C;const m={GROUP:"Group",REPLY:"R"};r.AnnotationReplyType=m;const t={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};r.AnnotationFlag=t;const o={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};r.AnnotationFieldFlag=o;const l={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};r.AnnotationBorderStyleType=l;const s={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};r.AnnotationActionEventType=s;const d={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};r.DocumentActionEventType=d;const R={O:"PageOpen",C:"PageClose"};r.PageActionEventType=R;const n={ERRORS:0,WARNINGS:1,INFOS:5};r.VerbosityLevel=n;const I={NONE:0,BINARY:1};r.CMapCompressionType=I;const $={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};r.OPS=$;const z={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};r.PasswordResponses=z;let J=n.WARNINGS;function tt(dt){Number.isInteger(dt)&&(J=dt)}function ht(){return J}function rt(dt){J>=n.INFOS&&console.log(`Info: ${dt}`)}function ct(dt){J>=n.WARNINGS&&console.log(`Warning: ${dt}`)}function gt(dt){throw new Error(dt)}function At(dt,w){dt||gt(w)}function St(dt){switch(dt==null?void 0:dt.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function yt(dt,w=null,O=null){if(!dt)return null;try{if(O&&typeof dt=="string"){if(O.addDefaultProtocol&&dt.startsWith("www.")){const mt=dt.match(/\./g);(mt==null?void 0:mt.length)>=2&&(dt=`http://${dt}`)}if(O.tryConvertEncoding)try{dt=st(dt)}catch{}}const lt=w?new URL(dt,w):new URL(dt);if(St(lt))return lt}catch{}return null}function V(dt,w,O,lt=!1){return Object.defineProperty(dt,w,{value:O,enumerable:!lt,configurable:!0,writable:!1}),O}const h=function(){function w(O,lt){this.constructor===w&&gt("Cannot initialize BaseException."),this.message=O,this.name=lt}return w.prototype=new Error,w.constructor=w,w}();r.BaseException=h;class f extends h{constructor(w,O){super(w,"PasswordException"),this.code=O}}r.PasswordException=f;class E extends h{constructor(w,O){super(w,"UnknownErrorException"),this.details=O}}r.UnknownErrorException=E;class G extends h{constructor(w){super(w,"InvalidPDFException")}}r.InvalidPDFException=G;class U extends h{constructor(w){super(w,"MissingPDFException")}}r.MissingPDFException=U;class X extends h{constructor(w,O){super(w,"UnexpectedResponseException"),this.status=O}}r.UnexpectedResponseException=X;class F extends h{constructor(w){super(w,"FormatError")}}r.FormatError=F;class M extends h{constructor(w){super(w,"AbortException")}}r.AbortException=M;function D(dt){(typeof dt!="object"||(dt==null?void 0:dt.length)===void 0)&&gt("Invalid argument for bytesToString");const w=dt.length,O=8192;if(w<O)return String.fromCharCode.apply(null,dt);const lt=[];for(let mt=0;mt<w;mt+=O){const Pt=Math.min(mt+O,w),xt=dt.subarray(mt,Pt);lt.push(String.fromCharCode.apply(null,xt))}return lt.join("")}function e(dt){typeof dt!="string"&&gt("Invalid argument for stringToBytes");const w=dt.length,O=new Uint8Array(w);for(let lt=0;lt<w;++lt)O[lt]=dt.charCodeAt(lt)&255;return O}function i(dt){return String.fromCharCode(dt>>24&255,dt>>16&255,dt>>8&255,dt&255)}function g(dt){return Object.keys(dt).length}function v(dt){const w=Object.create(null);for(const[O,lt]of dt)w[O]=lt;return w}function T(){const dt=new Uint8Array(4);return dt[0]=1,new Uint32Array(dt.buffer,0,1)[0]===1}function H(){try{return new Function(""),!0}catch{return!1}}class nt{static get isLittleEndian(){return V(this,"isLittleEndian",T())}static get isEvalSupported(){return V(this,"isEvalSupported",H())}static get isOffscreenCanvasSupported(){return V(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?V(this,"platform",{isWin:!1,isMac:!1}):V(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}}r.FeatureTest=nt;const K=[...Array(256).keys()].map(dt=>dt.toString(16).padStart(2,"0"));class at{static makeHexColor(w,O,lt){return`#${K[w]}${K[O]}${K[lt]}`}static scaleMinMax(w,O){let lt;w[0]?(w[0]<0&&(lt=O[0],O[0]=O[1],O[1]=lt),O[0]*=w[0],O[1]*=w[0],w[3]<0&&(lt=O[2],O[2]=O[3],O[3]=lt),O[2]*=w[3],O[3]*=w[3]):(lt=O[0],O[0]=O[2],O[2]=lt,lt=O[1],O[1]=O[3],O[3]=lt,w[1]<0&&(lt=O[2],O[2]=O[3],O[3]=lt),O[2]*=w[1],O[3]*=w[1],w[2]<0&&(lt=O[0],O[0]=O[1],O[1]=lt),O[0]*=w[2],O[1]*=w[2]),O[0]+=w[4],O[1]+=w[4],O[2]+=w[5],O[3]+=w[5]}static transform(w,O){return[w[0]*O[0]+w[2]*O[1],w[1]*O[0]+w[3]*O[1],w[0]*O[2]+w[2]*O[3],w[1]*O[2]+w[3]*O[3],w[0]*O[4]+w[2]*O[5]+w[4],w[1]*O[4]+w[3]*O[5]+w[5]]}static applyTransform(w,O){const lt=w[0]*O[0]+w[1]*O[2]+O[4],mt=w[0]*O[1]+w[1]*O[3]+O[5];return[lt,mt]}static applyInverseTransform(w,O){const lt=O[0]*O[3]-O[1]*O[2],mt=(w[0]*O[3]-w[1]*O[2]+O[2]*O[5]-O[4]*O[3])/lt,Pt=(-w[0]*O[1]+w[1]*O[0]+O[4]*O[1]-O[5]*O[0])/lt;return[mt,Pt]}static getAxialAlignedBoundingBox(w,O){const lt=at.applyTransform(w,O),mt=at.applyTransform(w.slice(2,4),O),Pt=at.applyTransform([w[0],w[3]],O),xt=at.applyTransform([w[2],w[1]],O);return[Math.min(lt[0],mt[0],Pt[0],xt[0]),Math.min(lt[1],mt[1],Pt[1],xt[1]),Math.max(lt[0],mt[0],Pt[0],xt[0]),Math.max(lt[1],mt[1],Pt[1],xt[1])]}static inverseTransform(w){const O=w[0]*w[3]-w[1]*w[2];return[w[3]/O,-w[1]/O,-w[2]/O,w[0]/O,(w[2]*w[5]-w[4]*w[3])/O,(w[4]*w[1]-w[5]*w[0])/O]}static singularValueDecompose2dScale(w){const O=[w[0],w[2],w[1],w[3]],lt=w[0]*O[0]+w[1]*O[2],mt=w[0]*O[1]+w[1]*O[3],Pt=w[2]*O[0]+w[3]*O[2],xt=w[2]*O[1]+w[3]*O[3],Rt=(lt+xt)/2,wt=Math.sqrt((lt+xt)**2-4*(lt*xt-Pt*mt))/2,Mt=Rt+wt||1,Ct=Rt-wt||1;return[Math.sqrt(Mt),Math.sqrt(Ct)]}static normalizeRect(w){const O=w.slice(0);return w[0]>w[2]&&(O[0]=w[2],O[2]=w[0]),w[1]>w[3]&&(O[1]=w[3],O[3]=w[1]),O}static intersect(w,O){const lt=Math.max(Math.min(w[0],w[2]),Math.min(O[0],O[2])),mt=Math.min(Math.max(w[0],w[2]),Math.max(O[0],O[2]));if(lt>mt)return null;const Pt=Math.max(Math.min(w[1],w[3]),Math.min(O[1],O[3])),xt=Math.min(Math.max(w[1],w[3]),Math.max(O[1],O[3]));return Pt>xt?null:[lt,Pt,mt,xt]}static bezierBoundingBox(w,O,lt,mt,Pt,xt,Rt,wt){const Mt=[],Ct=[[],[]];let It,Ot,Lt,Ft,Bt,Ut,Wt,Ht;for(let Xt=0;Xt<2;++Xt){if(Xt===0?(Ot=6*w-12*lt+6*Pt,It=-3*w+9*lt-9*Pt+3*Rt,Lt=3*lt-3*w):(Ot=6*O-12*mt+6*xt,It=-3*O+9*mt-9*xt+3*wt,Lt=3*mt-3*O),Math.abs(It)<1e-12){if(Math.abs(Ot)<1e-12)continue;Ft=-Lt/Ot,0<Ft&&Ft<1&&Mt.push(Ft);continue}Wt=Ot*Ot-4*Lt*It,Ht=Math.sqrt(Wt),!(Wt<0)&&(Bt=(-Ot+Ht)/(2*It),0<Bt&&Bt<1&&Mt.push(Bt),Ut=(-Ot-Ht)/(2*It),0<Ut&&Ut<1&&Mt.push(Ut))}let Nt=Mt.length,jt;const qt=Nt;for(;Nt--;)Ft=Mt[Nt],jt=1-Ft,Ct[0][Nt]=jt*jt*jt*w+3*jt*jt*Ft*lt+3*jt*Ft*Ft*Pt+Ft*Ft*Ft*Rt,Ct[1][Nt]=jt*jt*jt*O+3*jt*jt*Ft*mt+3*jt*Ft*Ft*xt+Ft*Ft*Ft*wt;return Ct[0][qt]=w,Ct[1][qt]=O,Ct[0][qt+1]=Rt,Ct[1][qt+1]=wt,Ct[0].length=Ct[1].length=qt+2,[Math.min(...Ct[0]),Math.min(...Ct[1]),Math.max(...Ct[0]),Math.max(...Ct[1])]}}r.Util=at;const ot=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function et(dt){if(dt[0]>="ï"){let O;if(dt[0]==="þ"&&dt[1]==="ÿ"?O="utf-16be":dt[0]==="ÿ"&&dt[1]==="þ"?O="utf-16le":dt[0]==="ï"&&dt[1]==="»"&&dt[2]==="¿"&&(O="utf-8"),O)try{const lt=new TextDecoder(O,{fatal:!0}),mt=e(dt);return lt.decode(mt)}catch(lt){ct(`stringToPDFString: "${lt}".`)}}const w=[];for(let O=0,lt=dt.length;O<lt;O++){const mt=ot[dt.charCodeAt(O)];w.push(mt?String.fromCharCode(mt):dt.charAt(O))}return w.join("")}function st(dt){return decodeURIComponent(escape(dt))}function ut(dt){return unescape(encodeURIComponent(dt))}function ft(dt){return typeof dt=="object"&&(dt==null?void 0:dt.byteLength)!==void 0}function Et(dt,w){if(dt.length!==w.length)return!1;for(let O=0,lt=dt.length;O<lt;O++)if(dt[O]!==w[O])return!1;return!0}function vt(dt=new Date){return[dt.getUTCFullYear().toString(),(dt.getUTCMonth()+1).toString().padStart(2,"0"),dt.getUTCDate().toString().padStart(2,"0"),dt.getUTCHours().toString().padStart(2,"0"),dt.getUTCMinutes().toString().padStart(2,"0"),dt.getUTCSeconds().toString().padStart(2,"0")].join("")}class Tt{constructor(){Q(this,kt,!1);this.promise=new Promise((w,O)=>{this.resolve=lt=>{pt(this,kt,!0),w(lt)},this.reject=lt=>{pt(this,kt,!0),O(lt)}})}get settled(){return b(this,kt)}}kt=new WeakMap,r.PromiseCapability=Tt;let Y=null,bt=null;function _t(dt){return Y||(Y=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,bt=new Map([["ﬅ","ſt"]])),dt.replaceAll(Y,(w,O,lt)=>O?O.normalize("NFKC"):bt.get(lt))}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var j,B,c,A,Kt,q,re,L,k,_,N,x,P,p,u,ue,y,S,fe,m,t;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_is_node=__w_pdfjs_require__(10),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_xfa_text=__w_pdfjs_require__(19);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultFilterFactory=_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:l,NodeCMapReaderFactory:s,NodeFilterFactory:d,NodeStandardFontDataFactory:R}=__w_pdfjs_require__(20);exports.DefaultCanvasFactory=DefaultCanvasFactory=l,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=s,exports.DefaultFilterFactory=DefaultFilterFactory=d,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=R}let createPDFNetworkStream;if(_is_node.isNodeJS){const{PDFNodeStream:l}=__w_pdfjs_require__(21);createPDFNetworkStream=s=>new l(s)}else{const{PDFNetworkStream:l}=__w_pdfjs_require__(24),{PDFFetchStream:s}=__w_pdfjs_require__(25);createPDFNetworkStream=d=>(0,_display_utils.isValidFetchUrl)(d.url)?new s(d):new l(d)}function getDocument(l){if(typeof l=="string"||l instanceof URL?l={url:l}:(0,_util.isArrayBuffer)(l)&&(l={data:l}),typeof l!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!l.url&&!l.data&&!l.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const s=new PDFDocumentLoadingTask,{docId:d}=s,R=l.url?getUrlProp(l.url):null,n=l.data?getDataProp(l.data):null,I=l.httpHeaders||null,$=l.withCredentials===!0,z=l.password??null,J=l.range instanceof PDFDataRangeTransport?l.range:null,tt=Number.isInteger(l.rangeChunkSize)&&l.rangeChunkSize>0?l.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let ht=l.worker instanceof PDFWorker?l.worker:null;const rt=l.verbosity,ct=typeof l.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(l.docBaseUrl)?l.docBaseUrl:null,gt=typeof l.cMapUrl=="string"?l.cMapUrl:null,At=l.cMapPacked!==!1,St=l.CMapReaderFactory||DefaultCMapReaderFactory,yt=typeof l.standardFontDataUrl=="string"?l.standardFontDataUrl:null,V=l.StandardFontDataFactory||DefaultStandardFontDataFactory,h=l.stopAtErrors!==!0,f=Number.isInteger(l.maxImageSize)&&l.maxImageSize>-1?l.maxImageSize:-1,E=l.isEvalSupported!==!1,G=typeof l.isOffscreenCanvasSupported=="boolean"?l.isOffscreenCanvasSupported:!_is_node.isNodeJS,U=Number.isInteger(l.canvasMaxAreaInBytes)?l.canvasMaxAreaInBytes:-1,X=typeof l.disableFontFace=="boolean"?l.disableFontFace:_is_node.isNodeJS,F=l.fontExtraProperties===!0,M=l.enableXfa===!0,D=l.ownerDocument||globalThis.document,e=l.disableRange===!0,i=l.disableStream===!0,g=l.disableAutoFetch===!0,v=l.pdfBug===!0,T=J?J.length:l.length??NaN,H=typeof l.useSystemFonts=="boolean"?l.useSystemFonts:!_is_node.isNodeJS&&!X,nt=typeof l.useWorkerFetch=="boolean"?l.useWorkerFetch:St===_display_utils.DOMCMapReaderFactory&&V===_display_utils.DOMStandardFontDataFactory&&(0,_display_utils.isValidFetchUrl)(gt,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(yt,document.baseURI),K=l.canvasFactory||new DefaultCanvasFactory({ownerDocument:D}),at=l.filterFactory||new DefaultFilterFactory({docId:d,ownerDocument:D}),ot=null;(0,_util.setVerbosityLevel)(rt);const et={canvasFactory:K,filterFactory:at};if(nt||(et.cMapReaderFactory=new St({baseUrl:gt,isCompressed:At}),et.standardFontDataFactory=new V({baseUrl:yt})),!ht){const ft={verbosity:rt,port:_worker_options.GlobalWorkerOptions.workerPort};ht=ft.port?PDFWorker.fromPort(ft):new PDFWorker(ft),s._worker=ht}const st={docId:d,apiVersion:"3.6.172",data:n,password:z,disableAutoFetch:g,rangeChunkSize:tt,length:T,docBaseUrl:ct,enableXfa:M,evaluatorOptions:{maxImageSize:f,disableFontFace:X,ignoreErrors:h,isEvalSupported:E,isOffscreenCanvasSupported:G,canvasMaxAreaInBytes:U,fontExtraProperties:F,useSystemFonts:H,cMapUrl:nt?gt:null,standardFontDataUrl:nt?yt:null}},ut={ignoreErrors:h,isEvalSupported:E,disableFontFace:X,fontExtraProperties:F,enableXfa:M,ownerDocument:D,disableAutoFetch:g,pdfBug:v,styleElement:ot};return ht.promise.then(function(){if(s.destroyed)throw new Error("Loading aborted");const ft=_fetchDocument(ht,st),Et=new Promise(function(vt){let Tt;J?Tt=new _transport_stream.PDFDataTransportStream({length:T,initialData:J.initialData,progressiveDone:J.progressiveDone,contentDispositionFilename:J.contentDispositionFilename,disableRange:e,disableStream:i},J):n||(Tt=createPDFNetworkStream({url:R,length:T,httpHeaders:I,withCredentials:$,rangeChunkSize:tt,disableRange:e,disableStream:i})),vt(Tt)});return Promise.all([ft,Et]).then(function([vt,Tt]){if(s.destroyed)throw new Error("Loading aborted");const Y=new _message_handler.MessageHandler(d,vt,ht.port),bt=new WorkerTransport(Y,s,Tt,ut,et);s._transport=bt,Y.send("Ready",null)})}).catch(s._capability.reject),s}async function _fetchDocument(l,s){if(l.destroyed)throw new Error("Worker was destroyed");const d=await l.messageHandler.sendWithPromise("GetDocRequest",s,s.data?[s.data.buffer]:null);if(l.destroyed)throw new Error("Worker was destroyed");return d}function getUrlProp(l){if(l instanceof URL)return l.href;try{return new URL(l,window.location).href}catch{if(_is_node.isNodeJS&&typeof l=="string")return l}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(l){if(_is_node.isNodeJS&&typeof Buffer<"u"&&l instanceof Buffer)return(0,_display_utils.deprecated)("Please provide binary data as `Uint8Array`, rather than `Buffer`."),new Uint8Array(l);if(l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength)return l;if(typeof l=="string")return(0,_util.stringToBytes)(l);if(typeof l=="object"&&!isNaN(l==null?void 0:l.length)||(0,_util.isArrayBuffer)(l))return new Uint8Array(l);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const r=class r{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${ie(r,j)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var s;this.destroyed=!0,await((s=this._transport)==null?void 0:s.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};j=new WeakMap,Q(r,j,0);let PDFDocumentLoadingTask=r;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(s,d,R=!1,n=null){this.length=s,this.initialData=d,this.progressiveDone=R,this.contentDispositionFilename=n,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(s){this._rangeListeners.push(s)}addProgressListener(s){this._progressListeners.push(s)}addProgressiveReadListener(s){this._progressiveReadListeners.push(s)}addProgressiveDoneListener(s){this._progressiveDoneListeners.push(s)}onDataRange(s,d){for(const R of this._rangeListeners)R(s,d)}onDataProgress(s,d){this._readyCapability.promise.then(()=>{for(const R of this._progressListeners)R(s,d)})}onDataProgressiveRead(s){this._readyCapability.promise.then(()=>{for(const d of this._progressiveReadListeners)d(s)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const s of this._progressiveDoneListeners)s()})}transportReady(){this._readyCapability.resolve()}requestDataRange(s,d){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(s,d){this._pdfInfo=s,this._transport=d}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(s){return this._transport.getPage(s)}getPageIndex(s){return this._transport.getPageIndex(s)}getDestinations(){return this._transport.getDestinations()}getDestination(s){return this._transport.getDestination(s)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(s=!1){return this._transport.startCleanup(s||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(s,d,R,n=!1){Q(this,A);Q(this,q);Q(this,B,null);Q(this,c,!1);this._pageIndex=s,this._pageInfo=d,this._transport=R,this._stats=n?new _display_utils.StatTimer:null,this._pdfBug=n,this.commonObjs=R.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:s,rotation:d=this.rotate,offsetX:R=0,offsetY:n=0,dontFlip:I=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:s,rotation:d,offsetX:R,offsetY:n,dontFlip:I})}getAnnotations({intent:s="display"}={}){const d=this._transport.getRenderingIntent(s);return this._transport.getAnnotations(this._pageIndex,d.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var s;return((s=this._transport._htmlForXfa)==null?void 0:s.children[this._pageIndex])||null}render({canvasContext:s,viewport:d,intent:R="display",annotationMode:n=_util.AnnotationMode.ENABLE,transform:I=null,background:$=null,optionalContentConfigPromise:z=null,annotationCanvasMap:J=null,pageColors:tt=null,printAnnotationStorage:ht=null}){var V,h,f;if((V=arguments[0])!=null&&V.canvasFactory)throw new Error("render no longer accepts the `canvasFactory`-option, please pass it to the `getDocument`-function instead.");(h=this._stats)==null||h.time("Overall");const rt=this._transport.getRenderingIntent(R,n,ht);pt(this,c,!1),it(this,q,re).call(this),z||(z=this._transport.getOptionalContentConfig());let ct=this._intentStates.get(rt.cacheKey);ct||(ct=Object.create(null),this._intentStates.set(rt.cacheKey,ct)),ct.streamReaderCancelTimeout&&(clearTimeout(ct.streamReaderCancelTimeout),ct.streamReaderCancelTimeout=null);const gt=!!(rt.renderingIntent&_util.RenderingIntentFlag.PRINT);ct.displayReadyCapability||(ct.displayReadyCapability=new _util.PromiseCapability,ct.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(f=this._stats)==null||f.time("Page Request"),this._pumpOperatorList(rt));const At=E=>{var G,U;ct.renderTasks.delete(St),(this._maybeCleanupAfterRender||gt)&&pt(this,c,!0),it(this,A,Kt).call(this,!gt),E?(St.capability.reject(E),this._abortOperatorList({intentState:ct,reason:E instanceof Error?E:new Error(E)})):St.capability.resolve(),(G=this._stats)==null||G.timeEnd("Rendering"),(U=this._stats)==null||U.timeEnd("Overall")},St=new InternalRenderTask({callback:At,params:{canvasContext:s,viewport:d,transform:I,background:$},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:J,operatorList:ct.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!gt,pdfBug:this._pdfBug,pageColors:tt});(ct.renderTasks||(ct.renderTasks=new Set)).add(St);const yt=St.task;return Promise.all([ct.displayReadyCapability.promise,z]).then(([E,G])=>{var U;if(b(this,c)){At();return}(U=this._stats)==null||U.time("Rendering"),St.initializeGraphics({transparency:E,optionalContentConfig:G}),St.operatorListChanged()}).catch(At),yt}getOperatorList({intent:s="display",annotationMode:d=_util.AnnotationMode.ENABLE,printAnnotationStorage:R=null}={}){var J;function n(){$.operatorList.lastChunk&&($.opListReadCapability.resolve($.operatorList),$.renderTasks.delete(z))}const I=this._transport.getRenderingIntent(s,d,R,!0);let $=this._intentStates.get(I.cacheKey);$||($=Object.create(null),this._intentStates.set(I.cacheKey,$));let z;return $.opListReadCapability||(z=Object.create(null),z.operatorListChanged=n,$.opListReadCapability=new _util.PromiseCapability,($.renderTasks||($.renderTasks=new Set)).add(z),$.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(J=this._stats)==null||J.time("Page Request"),this._pumpOperatorList(I)),$.opListReadCapability.promise}streamTextContent({includeMarkedContent:s=!1,disableNormalization:d=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:s===!0,disableNormalization:d===!0},{highWaterMark:100,size(n){return n.items.length}})}getTextContent(s={}){if(this._transport._htmlForXfa)return this.getXfa().then(R=>_xfa_text.XfaText.textContent(R));const d=this.streamTextContent(s);return new Promise(function(R,n){function I(){$.read().then(function({value:J,done:tt}){if(tt){R(z);return}Object.assign(z.styles,J.styles),z.items.push(...J.items),I()},n)}const $=d.getReader(),z={items:[],styles:Object.create(null)};I()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const s=[];for(const d of this._intentStates.values())if(this._abortOperatorList({intentState:d,reason:new Error("Page was destroyed."),force:!0}),!d.opListReadCapability)for(const R of d.renderTasks)s.push(R.completed),R.cancel();return this.objs.clear(),pt(this,c,!1),it(this,q,re).call(this),Promise.all(s)}cleanup(s=!1){pt(this,c,!0);const d=it(this,A,Kt).call(this,!1);return s&&d&&this._stats&&(this._stats=new _display_utils.StatTimer),d}_startRenderPage(s,d){var n,I;const R=this._intentStates.get(d);R&&((n=this._stats)==null||n.timeEnd("Page Request"),(I=R.displayReadyCapability)==null||I.resolve(s))}_renderPageChunk(s,d){for(let R=0,n=s.length;R<n;R++)d.operatorList.fnArray.push(s.fnArray[R]),d.operatorList.argsArray.push(s.argsArray[R]);d.operatorList.lastChunk=s.lastChunk,d.operatorList.separateAnnots=s.separateAnnots;for(const R of d.renderTasks)R.operatorListChanged();s.lastChunk&&it(this,A,Kt).call(this,!0)}_pumpOperatorList({renderingIntent:s,cacheKey:d,annotationStorageMap:R}){const I=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:s,cacheKey:d,annotationStorage:R}).getReader(),$=this._intentStates.get(d);$.streamReader=I;const z=()=>{I.read().then(({value:J,done:tt})=>{if(tt){$.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(J,$),z())},J=>{if($.streamReader=null,!this._transport.destroyed){if($.operatorList){$.operatorList.lastChunk=!0;for(const tt of $.renderTasks)tt.operatorListChanged();it(this,A,Kt).call(this,!0)}if($.displayReadyCapability)$.displayReadyCapability.reject(J);else if($.opListReadCapability)$.opListReadCapability.reject(J);else throw J}})};z()}_abortOperatorList({intentState:s,reason:d,force:R=!1}){if(s.streamReader){if(s.streamReaderCancelTimeout&&(clearTimeout(s.streamReaderCancelTimeout),s.streamReaderCancelTimeout=null),!R){if(s.renderTasks.size>0)return;if(d instanceof _display_utils.RenderingCancelledException){let n=RENDERING_CANCELLED_TIMEOUT;d.extraDelay>0&&d.extraDelay<1e3&&(n+=d.extraDelay),s.streamReaderCancelTimeout=setTimeout(()=>{s.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:s,reason:d,force:!0})},n);return}}if(s.streamReader.cancel(new _util.AbortException(d.message)).catch(()=>{}),s.streamReader=null,!this._transport.destroyed){for(const[n,I]of this._intentStates)if(I===s){this._intentStates.delete(n);break}this.cleanup()}}}get stats(){return this._stats}}B=new WeakMap,c=new WeakMap,A=new WeakSet,Kt=function(s=!1){if(it(this,q,re).call(this),!b(this,c))return!1;if(s)return pt(this,B,setTimeout(()=>{pt(this,B,null),it(this,A,Kt).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:d,operatorList:R}of this._intentStates.values())if(d.size>0||!R.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),pt(this,c,!1),!0},q=new WeakSet,re=function(){b(this,B)&&(clearTimeout(b(this,B)),pt(this,B,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){Q(this,L,new Set);Q(this,k,Promise.resolve())}postMessage(s,d){const R={data:structuredClone(s,d?{transfer:d}:null)};b(this,k).then(()=>{for(const n of b(this,L))n.call(this,R)})}addEventListener(s,d){b(this,L).add(d)}removeEventListener(s,d){b(this,L).delete(d)}terminate(){b(this,L).clear()}}L=new WeakMap,k=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const l=(_=document==null?void 0:document.currentScript)==null?void 0:_.src;l&&(PDFWorkerUtil.fallbackWorkerSrc=l.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(l,s){let d;try{if(d=new URL(l),!d.origin||d.origin==="null")return!1}catch{return!1}const R=new URL(s,d);return d.origin===R.origin},PDFWorkerUtil.createCDNWrapper=function(l){const s=`importScripts("${l}");`;return URL.createObjectURL(new Blob([s]))}}const _PDFWorker=class _PDFWorker{constructor({name:l=null,port:s=null,verbosity:d=(0,_util.getVerbosityLevel)()}={}){if(s&&b(_PDFWorker,N).has(s))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=l,this.destroyed=!1,this.verbosity=d,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,s){b(_PDFWorker,N).set(s,this),this._initializeFromPort(s);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(l){this._port=l,this._messageHandler=new _message_handler.MessageHandler("main","worker",l),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:l}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,l)||(l=PDFWorkerUtil.createCDNWrapper(new URL(l,window.location).href));const s=new Worker(l),d=new _message_handler.MessageHandler("main","worker",s),R=()=>{s.removeEventListener("error",n),d.destroy(),s.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},n=()=>{this._webWorker||R()};s.addEventListener("error",n),d.on("test",$=>{if(s.removeEventListener("error",n),this.destroyed){R();return}$?(this._messageHandler=d,this._port=s,this._webWorker=s,this._readyCapability.resolve(),d.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),d.destroy(),s.terminate())}),d.on("ready",$=>{if(s.removeEventListener("error",n),this.destroyed){R();return}try{I()}catch{this._setupFakeWorker()}});const I=()=>{const $=new Uint8Array;d.send("test",$,[$.buffer])};I();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(l=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const s=new LoopbackPort;this._port=s;const d=`fake${PDFWorkerUtil.fakeWorkerId++}`,R=new _message_handler.MessageHandler(d+"_worker",d,s);l.setup(R,s);const n=new _message_handler.MessageHandler(d,d+"_worker",s);this._messageHandler=n,this._readyCapability.resolve(),n.send("configure",{verbosity:this.verbosity})}).catch(l=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${l.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),b(_PDFWorker,N).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(l){if(!(l!=null&&l.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return b(this,N).has(l.port)?b(this,N).get(l.port):new _PDFWorker(l)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var l;try{return((l=globalThis.pdfjsWorker)==null?void 0:l.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};N=new WeakMap,Q(_PDFWorker,N,new WeakMap);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(s,d,R,n,I){Q(this,u);Q(this,x,new Map);Q(this,P,new Map);Q(this,p,new Map);this.messageHandler=s,this.loadingTask=d,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:n.ownerDocument,styleElement:n.styleElement}),this._params=n,this.canvasFactory=I.canvasFactory,this.filterFactory=I.filterFactory,this.cMapReaderFactory=I.cMapReaderFactory,this.standardFontDataFactory=I.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=R,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(s,d=_util.AnnotationMode.ENABLE,R=null,n=!1){let I=_util.RenderingIntentFlag.DISPLAY,$=null;switch(s){case"any":I=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":I=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${s}`)}switch(d){case _util.AnnotationMode.DISABLE:I+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:I+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:I+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,$=(I&_util.RenderingIntentFlag.PRINT&&R instanceof _annotation_storage.PrintAnnotationStorage?R:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${d}`)}return n&&(I+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:I,cacheKey:`${I}_${_annotation_storage.AnnotationStorage.getHash($)}`,annotationStorageMap:$}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const s=[];for(const R of b(this,P).values())s.push(R._destroy());b(this,P).clear(),b(this,p).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const d=this.messageHandler.sendWithPromise("Terminate",null);return s.push(d),Promise.all(s).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),b(this,x).clear(),this.filterFactory.destroy(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:s,loadingTask:d}=this;s.on("GetReader",(R,n)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=I=>{this._lastProgress={loaded:I.loaded,total:I.total}},n.onPull=()=>{this._fullReader.read().then(function({value:I,done:$}){if($){n.close();return}(0,_util.assert)(I instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(I),1,[I])}).catch(I=>{n.error(I)})},n.onCancel=I=>{this._fullReader.cancel(I),n.ready.catch($=>{if(!this.destroyed)throw $})}}),s.on("ReaderHeadersReady",R=>{const n=new _util.PromiseCapability,I=this._fullReader;return I.headersReady.then(()=>{var $;(!I.isStreamingSupported||!I.isRangeSupported)&&(this._lastProgress&&(($=d.onProgress)==null||$.call(d,this._lastProgress)),I.onProgress=z=>{var J;(J=d.onProgress)==null||J.call(d,{loaded:z.loaded,total:z.total})}),n.resolve({isStreamingSupported:I.isStreamingSupported,isRangeSupported:I.isRangeSupported,contentLength:I.contentLength})},n.reject),n.promise}),s.on("GetRangeReader",(R,n)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const I=this._networkStream.getRangeReader(R.begin,R.end);if(!I){n.close();return}n.onPull=()=>{I.read().then(function({value:$,done:z}){if(z){n.close();return}(0,_util.assert)($ instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array($),1,[$])}).catch($=>{n.error($)})},n.onCancel=$=>{I.cancel($),n.ready.catch(z=>{if(!this.destroyed)throw z})}}),s.on("GetDoc",({pdfInfo:R})=>{this._numPages=R.numPages,this._htmlForXfa=R.htmlForXfa,delete R.htmlForXfa,d._capability.resolve(new PDFDocumentProxy(R,this))}),s.on("DocException",function(R){let n;switch(R.name){case"PasswordException":n=new _util.PasswordException(R.message,R.code);break;case"InvalidPDFException":n=new _util.InvalidPDFException(R.message);break;case"MissingPDFException":n=new _util.MissingPDFException(R.message);break;case"UnexpectedResponseException":n=new _util.UnexpectedResponseException(R.message,R.status);break;case"UnknownErrorException":n=new _util.UnknownErrorException(R.message,R.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}d._capability.reject(n)}),s.on("PasswordRequest",R=>{if(this._passwordCapability=new _util.PromiseCapability,d.onPassword){const n=I=>{I instanceof Error?this._passwordCapability.reject(I):this._passwordCapability.resolve({password:I})};try{d.onPassword(n,R.code)}catch(I){this._passwordCapability.reject(I)}}else this._passwordCapability.reject(new _util.PasswordException(R.message,R.code));return this._passwordCapability.promise}),s.on("DataLoaded",R=>{var n;(n=d.onProgress)==null||n.call(d,{loaded:R.length,total:R.length}),this.downloadInfoCapability.resolve(R)}),s.on("StartRenderPage",R=>{if(this.destroyed)return;b(this,P).get(R.pageIndex)._startRenderPage(R.transparency,R.cacheKey)}),s.on("commonobj",([R,n,I])=>{var $;if(!this.destroyed&&!this.commonObjs.has(R))switch(n){case"Font":const z=this._params;if("error"in I){const ht=I.error;(0,_util.warn)(`Error during font loading: ${ht}`),this.commonObjs.resolve(R,ht);break}const J=z.pdfBug&&(($=globalThis.FontInspector)!=null&&$.enabled)?(ht,rt)=>globalThis.FontInspector.fontAdded(ht,rt):null,tt=new _font_loader.FontFaceObject(I,{isEvalSupported:z.isEvalSupported,disableFontFace:z.disableFontFace,ignoreErrors:z.ignoreErrors,inspectFont:J});this.fontLoader.bind(tt).catch(ht=>s.sendWithPromise("FontFallback",{id:R})).finally(()=>{!z.fontExtraProperties&&tt.data&&(tt.data=null),this.commonObjs.resolve(R,tt)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(R,I);break;default:throw new Error(`Got unknown common object type ${n}`)}}),s.on("obj",([R,n,I,$])=>{var J;if(this.destroyed)return;const z=b(this,P).get(n);if(!z.objs.has(R))switch(I){case"Image":if(z.objs.resolve(R,$),$){let tt;if($.bitmap){const{width:ht,height:rt}=$;tt=ht*rt*4}else tt=((J=$.data)==null?void 0:J.length)||0;tt>_util.MAX_IMAGE_SIZE_TO_CACHE&&(z._maybeCleanupAfterRender=!0)}break;case"Pattern":z.objs.resolve(R,$);break;default:throw new Error(`Got unknown object type ${I}`)}}),s.on("DocProgress",R=>{var n;this.destroyed||(n=d.onProgress)==null||n.call(d,{loaded:R.loaded,total:R.total})}),s.on("FetchBuiltInCMap",R=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(R):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),s.on("FetchStandardFontData",R=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(R):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:((s=this._fullReader)==null?void 0:s.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getPage(s){if(!Number.isInteger(s)||s<=0||s>this._numPages)return Promise.reject(new Error("Invalid page request."));const d=s-1,R=b(this,p).get(d);if(R)return R;const n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:d}).then(I=>{if(this.destroyed)throw new Error("Transport destroyed");const $=new PDFPageProxy(d,I,this,this._params.pdfBug);return b(this,P).set(d,$),$});return b(this,p).set(d,n),n}getPageIndex(s){return typeof s!="object"||s===null||!Number.isInteger(s.num)||s.num<0||!Number.isInteger(s.gen)||s.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:s.num,gen:s.gen})}getAnnotations(s,d){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:s,intent:d})}getFieldObjects(){return it(this,u,ue).call(this,"GetFieldObjects")}hasJSActions(){return it(this,u,ue).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(s){return typeof s!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:s})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(s){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:s})}getStructTree(s){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:s})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(s=>new _optional_content_config.OptionalContentConfig(s))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const s="GetMetadata",d=b(this,x).get(s);if(d)return d;const R=this.messageHandler.sendWithPromise(s,null).then(n=>{var I,$;return{info:n[0],metadata:n[1]?new _metadata.Metadata(n[1]):null,contentDispositionFilename:((I=this._fullReader)==null?void 0:I.filename)??null,contentLength:(($=this._fullReader)==null?void 0:$.contentLength)??null}});return b(this,x).set(s,R),R}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(s=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const d of b(this,P).values())if(!d.cleanup())throw new Error(`startCleanup: Page ${d.pageNumber} is currently rendering.`);this.commonObjs.clear(),s||this.fontLoader.clear(),b(this,x).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:s,enableXfa:d}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:s,enableXfa:d})}}x=new WeakMap,P=new WeakMap,p=new WeakMap,u=new WeakSet,ue=function(s,d=null){const R=b(this,x).get(s);if(R)return R;const n=this.messageHandler.sendWithPromise(s,d);return b(this,x).set(s,n),n};class PDFObjects{constructor(){Q(this,S);Q(this,y,Object.create(null))}get(s,d=null){if(d){const n=it(this,S,fe).call(this,s);return n.capability.promise.then(()=>d(n.data)),null}const R=b(this,y)[s];if(!(R!=null&&R.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${s}.`);return R.data}has(s){const d=b(this,y)[s];return(d==null?void 0:d.capability.settled)||!1}resolve(s,d=null){const R=it(this,S,fe).call(this,s);R.data=d,R.capability.resolve()}clear(){var s;for(const d in b(this,y)){const{data:R}=b(this,y)[d];(s=R==null?void 0:R.bitmap)==null||s.close()}pt(this,y,Object.create(null))}}y=new WeakMap,S=new WeakSet,fe=function(s){const d=b(this,y)[s];return d||(b(this,y)[s]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(s){Q(this,m,null);pt(this,m,s),this.onContinue=null}get promise(){return b(this,m).capability.promise}cancel(s=0){b(this,m).cancel(null,s)}get separateAnnots(){const{separateAnnots:s}=b(this,m).operatorList;if(!s)return!1;const{annotationCanvasMap:d}=b(this,m);return s.form||s.canvas&&(d==null?void 0:d.size)>0}}m=new WeakMap,exports.RenderTask=RenderTask;const o=class o{constructor({callback:s,params:d,objs:R,commonObjs:n,annotationCanvasMap:I,operatorList:$,pageIndex:z,canvasFactory:J,filterFactory:tt,useRequestAnimationFrame:ht=!1,pdfBug:rt=!1,pageColors:ct=null}){this.callback=s,this.params=d,this.objs=R,this.commonObjs=n,this.annotationCanvasMap=I,this.operatorListIdx=null,this.operatorList=$,this._pageIndex=z,this.canvasFactory=J,this.filterFactory=tt,this._pdfBug=rt,this.pageColors=ct,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=ht===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=d.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:s=!1,optionalContentConfig:d}){var z,J;if(this.cancelled)return;if(this._canvas){if(b(o,t).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");b(o,t).add(this._canvas)}this._pdfBug&&((z=globalThis.StepperManager)!=null&&z.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:R,viewport:n,transform:I,background:$}=this.params;this.gfx=new _canvas.CanvasGraphics(R,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:d},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:I,viewport:n,transparency:s,background:$}),this.operatorListIdx=0,this.graphicsReady=!0,(J=this.graphicsReadyCallback)==null||J.call(this)}cancel(s=null,d=0){var R;this.running=!1,this.cancelled=!0,(R=this.gfx)==null||R.endDrawing(),this._canvas&&b(o,t).delete(this._canvas),this.callback(s||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas",d))}operatorListChanged(){var s;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(s=this.stepper)==null||s.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(this.pageColors),this._canvas&&b(o,t).delete(this._canvas),this.callback())))}};t=new WeakMap,Q(o,t,new WeakSet);let InternalRenderTask=o;const version="3.6.172";exports.version=version;const build="4d3dfe254";exports.build=build},(j,r,B)=>{var L,k,_,De,x;Object.defineProperty(r,"__esModule",{value:!0}),r.PrintAnnotationStorage=r.AnnotationStorage=void 0;var c=B(1),A=B(4),W=B(8);class q{constructor(){Q(this,_);Q(this,L,!1);Q(this,k,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(p,u){const a=b(this,k).get(p);return a===void 0?u:Object.assign(u,a)}getRawValue(p){return b(this,k).get(p)}remove(p){if(b(this,k).delete(p),b(this,k).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const u of b(this,k).values())if(u instanceof A.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(p,u){const a=b(this,k).get(p);let y=!1;if(a!==void 0)for(const[S,C]of Object.entries(u))a[S]!==C&&(y=!0,a[S]=C);else y=!0,b(this,k).set(p,u);y&&it(this,_,De).call(this),u instanceof A.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(u.constructor._type)}has(p){return b(this,k).has(p)}getAll(){return b(this,k).size>0?(0,c.objectFromMap)(b(this,k)):null}setAll(p){for(const[u,a]of Object.entries(p))this.setValue(u,a)}get size(){return b(this,k).size}resetModified(){b(this,L)&&(pt(this,L,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Z(this)}get serializable(){if(b(this,k).size===0)return null;const p=new Map;for(const[u,a]of b(this,k)){const y=a instanceof A.AnnotationEditor?a.serialize():a;y&&p.set(u,y)}return p}static getHash(p){if(!p)return"";const u=new W.MurmurHash3_64;for(const[a,y]of p)u.update(`${a}:${JSON.stringify(y)}`);return u.hexdigest()}}L=new WeakMap,k=new WeakMap,_=new WeakSet,De=function(){b(this,L)||(pt(this,L,!0),typeof this.onSetModified=="function"&&this.onSetModified())},r.AnnotationStorage=q;class Z extends q{constructor(u){super();Q(this,x,null);pt(this,x,structuredClone(u.serializable))}get print(){(0,c.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return b(this,x)}}x=new WeakMap,r.PrintAnnotationStorage=Z},(j,r,B)=>{var q,Z,L,k,_,N;Object.defineProperty(r,"__esModule",{value:!0}),r.AnnotationEditor=void 0;var c=B(5),A=B(1);const x=class x{constructor(p){Q(this,q,this.focusin.bind(this));Q(this,Z,this.focusout.bind(this));Q(this,L,!1);Q(this,k,!1);Q(this,_,!1);Dt(this,"_uiManager",null);Q(this,N,x._zIndex++);this.constructor===x&&(0,A.unreachable)("Cannot initialize AnnotationEditor."),this.parent=p.parent,this.id=p.id,this.width=this.height=null,this.pageIndex=p.parent.pageIndex,this.name=p.name,this.div=null,this._uiManager=p.uiManager;const{rotation:u,rawDims:{pageWidth:a,pageHeight:y,pageX:S,pageY:C}}=this.parent.viewport;this.rotation=u,this.pageRotation=(360+u-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[a,y],this.pageTranslation=[S,C];const[m,t]=this.parentDimensions;this.x=p.x/m,this.y=p.y/t,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,A.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}addCommands(p){this._uiManager.addCommands(p)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=b(this,N)}setParent(p){p!==null&&(this.pageIndex=p.pageIndex,this.pageDimensions=p.pageDimensions),this.parent=p}focusin(p){b(this,L)?pt(this,L,!1):this.parent.setSelected(this)}focusout(p){var a;if(!this.isAttachedToDOM)return;const u=p.relatedTarget;u!=null&&u.closest(`#${this.id}`)||(p.preventDefault(),(a=this.parent)!=null&&a.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}dragstart(p){const u=this.parent.div.getBoundingClientRect();this.startX=p.clientX-u.x,this.startY=p.clientY-u.y,p.dataTransfer.setData("text/plain",this.id),p.dataTransfer.effectAllowed="move"}setAt(p,u,a,y){const[S,C]=this.parentDimensions;[a,y]=this.screenToPageTranslation(a,y),this.x=(p+a)/S,this.y=(u+y)/C,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(p,u){const[a,y]=this.parentDimensions;[p,u]=this.screenToPageTranslation(p,u),this.x+=p/a,this.y+=u/y,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(p,u){switch(this.parentRotation){case 90:return[u,-p];case 180:return[-p,-u];case 270:return[-u,p];default:return[p,u]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{realScale:p}=this._uiManager.viewParameters,[u,a]=this.pageDimensions;return[u*p,a*p]}setDims(p,u){const[a,y]=this.parentDimensions;this.div.style.width=`${100*p/a}%`,this.div.style.height=`${100*u/y}%`}fixDims(){const{style:p}=this.div,{height:u,width:a}=p,y=a.endsWith("%"),S=u.endsWith("%");if(y&&S)return;const[C,m]=this.parentDimensions;y||(p.width=`${100*parseFloat(a)/C}%`),S||(p.height=`${100*parseFloat(u)/m}%`)}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",b(this,q)),this.div.addEventListener("focusout",b(this,Z));const[p,u]=this.getInitialTranslation();return this.translate(p,u),(0,c.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(p){const{isMac:u}=A.FeatureTest.platform;if(p.button!==0||p.ctrlKey&&u){p.preventDefault();return}p.ctrlKey&&!u||p.shiftKey||p.metaKey&&u?this.parent.toggleSelected(this):this.parent.setSelected(this),pt(this,L,!0)}getRect(p,u){const a=this.parentScale,[y,S]=this.pageDimensions,[C,m]=this.pageTranslation,t=p/a,o=u/a,l=this.x*y,s=this.y*S,d=this.width*y,R=this.height*S;switch(this.rotation){case 0:return[l+t+C,S-s-o-R+m,l+t+d+C,S-s-o+m];case 90:return[l+o+C,S-s+t+m,l+o+R+C,S-s+t+d+m];case 180:return[l-t-d+C,S-s+o+m,l-t+C,S-s+o+R+m];case 270:return[l-o-R+C,S-s-t-d+m,l-o+C,S-s-t+m];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(p,u){const[a,y,S,C]=p,m=S-a,t=C-y;switch(this.rotation){case 0:return[a,u-C,m,t];case 90:return[a,u-y,t,m];case 180:return[S,u-y,m,t];case 270:return[S,u-C,t,m];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){pt(this,_,!0)}disableEditMode(){pt(this,_,!1)}isInEditMode(){return b(this,_)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var p;(p=this.div)==null||p.addEventListener("focusin",b(this,q))}serialize(){(0,A.unreachable)("An editor must be serializable")}static deserialize(p,u,a){const y=new this.prototype.constructor({parent:u,id:u.getNextId(),uiManager:a});y.rotation=p.rotation;const[S,C]=y.pageDimensions,[m,t,o,l]=y.getRectInCurrentCoords(p.rect,C);return y.x=m/S,y.y=t/C,y.width=o/S,y.height=l/C,y}remove(){this.div.removeEventListener("focusin",b(this,q)),this.div.removeEventListener("focusout",b(this,Z)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var p;(p=this.div)==null||p.classList.add("selectedEditor")}unselect(){var p;(p=this.div)==null||p.classList.remove("selectedEditor")}updateParams(p,u){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return b(this,k)}set isEditing(p){pt(this,k,p),p?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};q=new WeakMap,Z=new WeakMap,L=new WeakMap,k=new WeakMap,_=new WeakMap,N=new WeakMap,Dt(x,"_colorManager",new c.ColorManager),Dt(x,"_zIndex",1);let W=x;r.AnnotationEditor=W},(j,r,B)=>{var x,P,p,u,a,y,Le,m,t,o,l,s,d,R,n,I,$,z,J,tt,ht,rt,ct,gt,At,St,yt,V,h,f,E,Ie,U,pe,F,Ne,D,je,i,Gt,v,te,H,Be,K,Ue,ot,ge,st,ee,ft,me;Object.defineProperty(r,"__esModule",{value:!0}),r.KeyboardManager=r.CommandManager=r.ColorManager=r.AnnotationEditorUIManager=void 0,r.bindEvents=W,r.opacityToHex=q;var c=B(1),A=B(6);function W(Tt,Y,bt){for(const _t of bt)Y.addEventListener(_t,Tt[_t].bind(Tt))}function q(Tt){return Math.round(Math.min(255,Math.max(1,255*Tt))).toString(16).padStart(2,"0")}class Z{constructor(){Q(this,x,0)}getId(){return`${c.AnnotationEditorPrefix}${ie(this,x)._++}`}}x=new WeakMap;class L{constructor(Y=128){Q(this,P,[]);Q(this,p,!1);Q(this,u,void 0);Q(this,a,-1);pt(this,u,Y)}add({cmd:Y,undo:bt,mustExec:_t,type:kt=NaN,overwriteIfSameType:dt=!1,keepUndo:w=!1}){if(_t&&Y(),b(this,p))return;const O={cmd:Y,undo:bt,type:kt};if(b(this,a)===-1){b(this,P).length>0&&(b(this,P).length=0),pt(this,a,0),b(this,P).push(O);return}if(dt&&b(this,P)[b(this,a)].type===kt){w&&(O.undo=b(this,P)[b(this,a)].undo),b(this,P)[b(this,a)]=O;return}const lt=b(this,a)+1;lt===b(this,u)?b(this,P).splice(0,1):(pt(this,a,lt),lt<b(this,P).length&&b(this,P).splice(lt)),b(this,P).push(O)}undo(){b(this,a)!==-1&&(pt(this,p,!0),b(this,P)[b(this,a)].undo(),pt(this,p,!1),pt(this,a,b(this,a)-1))}redo(){b(this,a)<b(this,P).length-1&&(pt(this,a,b(this,a)+1),pt(this,p,!0),b(this,P)[b(this,a)].cmd(),pt(this,p,!1))}hasSomethingToUndo(){return b(this,a)!==-1}hasSomethingToRedo(){return b(this,a)<b(this,P).length-1}destroy(){pt(this,P,null)}}P=new WeakMap,p=new WeakMap,u=new WeakMap,a=new WeakMap,r.CommandManager=L;class k{constructor(Y){Q(this,y);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:bt}=c.FeatureTest.platform;for(const[_t,kt]of Y)for(const dt of _t){const w=dt.startsWith("mac+");bt&&w?(this.callbacks.set(dt.slice(4),kt),this.allKeys.add(dt.split("+").at(-1))):!bt&&!w&&(this.callbacks.set(dt,kt),this.allKeys.add(dt.split("+").at(-1)))}}exec(Y,bt){if(!this.allKeys.has(bt.key))return;const _t=this.callbacks.get(it(this,y,Le).call(this,bt));_t&&(_t.bind(Y)(),bt.stopPropagation(),bt.preventDefault())}}y=new WeakSet,Le=function(Y){Y.altKey&&this.buffer.push("alt"),Y.ctrlKey&&this.buffer.push("ctrl"),Y.metaKey&&this.buffer.push("meta"),Y.shiftKey&&this.buffer.push("shift"),this.buffer.push(Y.key);const bt=this.buffer.join("+");return this.buffer.length=0,bt},r.KeyboardManager=k;const C=class C{get _colors(){const Y=new Map([["CanvasText",null],["Canvas",null]]);return(0,A.getColorValues)(Y),(0,c.shadow)(this,"_colors",Y)}convert(Y){const bt=(0,A.getRGB)(Y);if(!window.matchMedia("(forced-colors: active)").matches)return bt;for(const[_t,kt]of this._colors)if(kt.every((dt,w)=>dt===bt[w]))return C._colorsMapping.get(_t);return bt}getHexCode(Y){const bt=this._colors.get(Y);return bt?c.Util.makeHexColor(...bt):Y}};Dt(C,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let _=C;r.ColorManager=_;const vt=class vt{constructor(Y,bt,_t){Q(this,E);Q(this,U);Q(this,F);Q(this,D);Q(this,i);Q(this,v);Q(this,H);Q(this,K);Q(this,ot);Q(this,st);Q(this,ft);Q(this,m,null);Q(this,t,new Map);Q(this,o,new Map);Q(this,l,null);Q(this,s,new L);Q(this,d,0);Q(this,R,null);Q(this,n,new Set);Q(this,I,null);Q(this,$,new Z);Q(this,z,!1);Q(this,J,c.AnnotationEditorType.NONE);Q(this,tt,new Set);Q(this,ht,this.copy.bind(this));Q(this,rt,this.cut.bind(this));Q(this,ct,this.paste.bind(this));Q(this,gt,this.keydown.bind(this));Q(this,At,this.onEditingAction.bind(this));Q(this,St,this.onPageChanging.bind(this));Q(this,yt,this.onScaleChanging.bind(this));Q(this,V,this.onRotationChanging.bind(this));Q(this,h,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});Q(this,f,null);pt(this,f,Y),pt(this,I,bt),b(this,I)._on("editingaction",b(this,At)),b(this,I)._on("pagechanging",b(this,St)),b(this,I)._on("scalechanging",b(this,yt)),b(this,I)._on("rotationchanging",b(this,V)),pt(this,l,_t),this.viewParameters={realScale:A.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){it(this,U,pe).call(this),b(this,I)._off("editingaction",b(this,At)),b(this,I)._off("pagechanging",b(this,St)),b(this,I)._off("scalechanging",b(this,yt)),b(this,I)._off("rotationchanging",b(this,V));for(const Y of b(this,o).values())Y.destroy();b(this,o).clear(),b(this,t).clear(),b(this,n).clear(),pt(this,m,null),b(this,tt).clear(),b(this,s).destroy()}onPageChanging({pageNumber:Y}){pt(this,d,Y-1)}focusMainContainer(){b(this,f).focus()}addShouldRescale(Y){b(this,n).add(Y)}removeShouldRescale(Y){b(this,n).delete(Y)}onScaleChanging({scale:Y}){this.commitOrRemove(),this.viewParameters.realScale=Y*A.PixelsPerInch.PDF_TO_CSS_UNITS;for(const bt of b(this,n))bt.onScaleChanging()}onRotationChanging({pagesRotation:Y}){this.commitOrRemove(),this.viewParameters.rotation=Y}addToAnnotationStorage(Y){!Y.isEmpty()&&b(this,l)&&!b(this,l).has(Y.id)&&b(this,l).setValue(Y.id,Y)}copy(Y){if(Y.preventDefault(),b(this,m)&&b(this,m).commitOrRemove(),!this.hasSelection)return;const bt=[];for(const _t of b(this,tt))_t.isEmpty()||bt.push(_t.serialize());bt.length!==0&&Y.clipboardData.setData("application/pdfjs",JSON.stringify(bt))}cut(Y){this.copy(Y),this.delete()}paste(Y){Y.preventDefault();let bt=Y.clipboardData.getData("application/pdfjs");if(!bt)return;try{bt=JSON.parse(bt)}catch(kt){(0,c.warn)(`paste: "${kt.message}".`);return}if(!Array.isArray(bt))return;this.unselectAll();const _t=b(this,o).get(b(this,d));try{const kt=[];for(const O of bt){const lt=_t.deserialize(O);if(!lt)return;kt.push(lt)}const dt=()=>{for(const O of kt)it(this,ot,ge).call(this,O);it(this,ft,me).call(this,kt)},w=()=>{for(const O of kt)O.remove()};this.addCommands({cmd:dt,undo:w,mustExec:!0})}catch(kt){(0,c.warn)(`paste: "${kt.message}".`)}}keydown(Y){var bt;(bt=this.getActive())!=null&&bt.shouldGetKeyboardEvents()||vt._keyboardManager.exec(this,Y)}onEditingAction(Y){["undo","redo","delete","selectAll"].includes(Y.name)&&this[Y.name]()}setEditingState(Y){Y?(it(this,E,Ie).call(this),it(this,F,Ne).call(this),it(this,i,Gt).call(this,{isEditing:b(this,J)!==c.AnnotationEditorType.NONE,isEmpty:it(this,st,ee).call(this),hasSomethingToUndo:b(this,s).hasSomethingToUndo(),hasSomethingToRedo:b(this,s).hasSomethingToRedo(),hasSelectedEditor:!1})):(it(this,U,pe).call(this),it(this,D,je).call(this),it(this,i,Gt).call(this,{isEditing:!1}))}registerEditorTypes(Y){if(!b(this,R)){pt(this,R,Y);for(const bt of b(this,R))it(this,v,te).call(this,bt.defaultPropertiesToUpdate)}}getId(){return b(this,$).getId()}get currentLayer(){return b(this,o).get(b(this,d))}get currentPageIndex(){return b(this,d)}addLayer(Y){b(this,o).set(Y.pageIndex,Y),b(this,z)?Y.enable():Y.disable()}removeLayer(Y){b(this,o).delete(Y.pageIndex)}updateMode(Y){if(pt(this,J,Y),Y===c.AnnotationEditorType.NONE)this.setEditingState(!1),it(this,K,Ue).call(this);else{this.setEditingState(!0),it(this,H,Be).call(this);for(const bt of b(this,o).values())bt.updateMode(Y)}}updateToolbar(Y){Y!==b(this,J)&&b(this,I).dispatch("switchannotationeditormode",{source:this,mode:Y})}updateParams(Y,bt){if(b(this,R)){for(const _t of b(this,tt))_t.updateParams(Y,bt);for(const _t of b(this,R))_t.updateDefaultParams(Y,bt)}}getEditors(Y){const bt=[];for(const _t of b(this,t).values())_t.pageIndex===Y&&bt.push(_t);return bt}getEditor(Y){return b(this,t).get(Y)}addEditor(Y){b(this,t).set(Y.id,Y)}removeEditor(Y){var bt;b(this,t).delete(Y.id),this.unselect(Y),(bt=b(this,l))==null||bt.remove(Y.id)}setActiveEditor(Y){b(this,m)!==Y&&(pt(this,m,Y),Y&&it(this,v,te).call(this,Y.propertiesToUpdate))}toggleSelected(Y){if(b(this,tt).has(Y)){b(this,tt).delete(Y),Y.unselect(),it(this,i,Gt).call(this,{hasSelectedEditor:this.hasSelection});return}b(this,tt).add(Y),Y.select(),it(this,v,te).call(this,Y.propertiesToUpdate),it(this,i,Gt).call(this,{hasSelectedEditor:!0})}setSelected(Y){for(const bt of b(this,tt))bt!==Y&&bt.unselect();b(this,tt).clear(),b(this,tt).add(Y),Y.select(),it(this,v,te).call(this,Y.propertiesToUpdate),it(this,i,Gt).call(this,{hasSelectedEditor:!0})}isSelected(Y){return b(this,tt).has(Y)}unselect(Y){Y.unselect(),b(this,tt).delete(Y),it(this,i,Gt).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return b(this,tt).size!==0}undo(){b(this,s).undo(),it(this,i,Gt).call(this,{hasSomethingToUndo:b(this,s).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:it(this,st,ee).call(this)})}redo(){b(this,s).redo(),it(this,i,Gt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:b(this,s).hasSomethingToRedo(),isEmpty:it(this,st,ee).call(this)})}addCommands(Y){b(this,s).add(Y),it(this,i,Gt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:it(this,st,ee).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const Y=[...b(this,tt)],bt=()=>{for(const kt of Y)kt.remove()},_t=()=>{for(const kt of Y)it(this,ot,ge).call(this,kt)};this.addCommands({cmd:bt,undo:_t,mustExec:!0})}commitOrRemove(){var Y;(Y=b(this,m))==null||Y.commitOrRemove()}selectAll(){for(const Y of b(this,tt))Y.commit();it(this,ft,me).call(this,b(this,t).values())}unselectAll(){if(b(this,m)){b(this,m).commitOrRemove();return}if(b(this,tt).size!==0){for(const Y of b(this,tt))Y.unselect();b(this,tt).clear(),it(this,i,Gt).call(this,{hasSelectedEditor:!1})}}isActive(Y){return b(this,m)===Y}getActive(){return b(this,m)}getMode(){return b(this,J)}};m=new WeakMap,t=new WeakMap,o=new WeakMap,l=new WeakMap,s=new WeakMap,d=new WeakMap,R=new WeakMap,n=new WeakMap,I=new WeakMap,$=new WeakMap,z=new WeakMap,J=new WeakMap,tt=new WeakMap,ht=new WeakMap,rt=new WeakMap,ct=new WeakMap,gt=new WeakMap,At=new WeakMap,St=new WeakMap,yt=new WeakMap,V=new WeakMap,h=new WeakMap,f=new WeakMap,E=new WeakSet,Ie=function(){b(this,f).addEventListener("keydown",b(this,gt))},U=new WeakSet,pe=function(){b(this,f).removeEventListener("keydown",b(this,gt))},F=new WeakSet,Ne=function(){document.addEventListener("copy",b(this,ht)),document.addEventListener("cut",b(this,rt)),document.addEventListener("paste",b(this,ct))},D=new WeakSet,je=function(){document.removeEventListener("copy",b(this,ht)),document.removeEventListener("cut",b(this,rt)),document.removeEventListener("paste",b(this,ct))},i=new WeakSet,Gt=function(Y){Object.entries(Y).some(([_t,kt])=>b(this,h)[_t]!==kt)&&b(this,I).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(b(this,h),Y)})},v=new WeakSet,te=function(Y){b(this,I).dispatch("annotationeditorparamschanged",{source:this,details:Y})},H=new WeakSet,Be=function(){if(!b(this,z)){pt(this,z,!0);for(const Y of b(this,o).values())Y.enable()}},K=new WeakSet,Ue=function(){if(this.unselectAll(),b(this,z)){pt(this,z,!1);for(const Y of b(this,o).values())Y.disable()}},ot=new WeakSet,ge=function(Y){const bt=b(this,o).get(Y.pageIndex);bt?bt.addOrRebuild(Y):this.addEditor(Y)},st=new WeakSet,ee=function(){if(b(this,t).size===0)return!0;if(b(this,t).size===1)for(const Y of b(this,t).values())return Y.isEmpty();return!1},ft=new WeakSet,me=function(Y){b(this,tt).clear();for(const bt of Y)bt.isEmpty()||(b(this,tt).add(bt),bt.select());it(this,i,Gt).call(this,{hasSelectedEditor:!0})},Dt(vt,"_keyboardManager",new k([[["ctrl+a","mac+meta+a"],vt.prototype.selectAll],[["ctrl+z","mac+meta+z"],vt.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],vt.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],vt.prototype.delete],[["Escape","mac+Escape"],vt.prototype.unselectAll]]));let N=vt;r.AnnotationEditorUIManager=N},(j,r,B)=>{var ht,rt,ct,gt,At,St,yt,V,h,Jt,E,zt,U,$t;Object.defineProperty(r,"__esModule",{value:!0}),r.StatTimer=r.RenderingCancelledException=r.PixelsPerInch=r.PageViewport=r.PDFDateString=r.DOMStandardFontDataFactory=r.DOMSVGFactory=r.DOMFilterFactory=r.DOMCanvasFactory=r.DOMCMapReaderFactory=r.AnnotationPrefix=void 0,r.deprecated=l,r.getColorValues=I,r.getCurrentTransform=$,r.getCurrentTransformInverse=z,r.getFilenameFromUrl=S,r.getPdfFilenameFromUrl=C,r.getRGB=n,r.getXfaPageViewport=R,r.isDataScheme=a,r.isPdfFile=y,r.isValidFetchUrl=t,r.loadScript=o,r.setLayerDimensions=J;var c=B(7),A=B(1);const W="http://www.w3.org/2000/svg",q="pdfjs_internal_id_";r.AnnotationPrefix=q;const tt=class tt{};Dt(tt,"CSS",96),Dt(tt,"PDF",72),Dt(tt,"PDF_TO_CSS_UNITS",tt.CSS/tt.PDF);let Z=tt;r.PixelsPerInch=Z;class L extends c.BaseFilterFactory{constructor({docId:D,ownerDocument:e=globalThis.document}={}){super();Q(this,h);Q(this,E);Q(this,U);Q(this,ht,void 0);Q(this,rt,void 0);Q(this,ct,void 0);Q(this,gt,void 0);Q(this,At,void 0);Q(this,St,void 0);Q(this,yt,void 0);Q(this,V,0);pt(this,ct,D),pt(this,gt,e)}addFilter(D){if(!D)return"none";let e=b(this,h,Jt).get(D);if(e)return e;let i,g,v,T;if(D.length===1){const ot=D[0],et=new Array(256);for(let st=0;st<256;st++)et[st]=ot[st]/255;T=i=g=v=et.join(",")}else{const[ot,et,st]=D,ut=new Array(256),ft=new Array(256),Et=new Array(256);for(let vt=0;vt<256;vt++)ut[vt]=ot[vt]/255,ft[vt]=et[vt]/255,Et[vt]=st[vt]/255;i=ut.join(","),g=ft.join(","),v=Et.join(","),T=`${i}${g}${v}`}if(e=b(this,h,Jt).get(T),e)return b(this,h,Jt).set(D,e),e;const H=`g_${b(this,ct)}_transfer_map_${ie(this,V)._++}`,nt=`url(#${H})`;b(this,h,Jt).set(D,nt),b(this,h,Jt).set(T,nt);const K=b(this,gt).createElementNS(W,"filter",W);K.setAttribute("id",H),K.setAttribute("color-interpolation-filters","sRGB");const at=b(this,gt).createElementNS(W,"feComponentTransfer");return K.append(at),it(this,U,$t).call(this,at,"feFuncR",i),it(this,U,$t).call(this,at,"feFuncG",g),it(this,U,$t).call(this,at,"feFuncB",v),b(this,E,zt).append(K),nt}addHCMFilter(D,e){var st;const i=`${D}-${e}`;if(b(this,St)===i)return b(this,yt);if(pt(this,St,i),pt(this,yt,"none"),(st=b(this,At))==null||st.remove(),!D||!e)return b(this,yt);b(this,E,zt).style.color=D,D=getComputedStyle(b(this,E,zt)).getPropertyValue("color");const g=n(D);D=A.Util.makeHexColor(...g),b(this,E,zt).style.color=e,e=getComputedStyle(b(this,E,zt)).getPropertyValue("color");const v=n(e);if(e=A.Util.makeHexColor(...v),b(this,E,zt).style.color="",D==="#000000"&&e==="#ffffff"||D===e)return b(this,yt);const T=new Array(256);for(let ut=0;ut<=255;ut++){const ft=ut/255;T[ut]=ft<=.03928?ft/12.92:((ft+.055)/1.055)**2.4}const H=T.join(","),nt=`g_${b(this,ct)}_hcm_filter`,K=pt(this,At,b(this,gt).createElementNS(W,"filter",W));K.setAttribute("id",nt),K.setAttribute("color-interpolation-filters","sRGB");let at=b(this,gt).createElementNS(W,"feComponentTransfer");K.append(at),it(this,U,$t).call(this,at,"feFuncR",H),it(this,U,$t).call(this,at,"feFuncG",H),it(this,U,$t).call(this,at,"feFuncB",H);const ot=b(this,gt).createElementNS(W,"feColorMatrix");ot.setAttribute("type","matrix"),ot.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),K.append(ot),at=b(this,gt).createElementNS(W,"feComponentTransfer"),K.append(at);const et=(ut,ft)=>{const Et=g[ut]/255,vt=v[ut]/255,Tt=new Array(ft+1);for(let Y=0;Y<=ft;Y++)Tt[Y]=Et+Y/ft*(vt-Et);return Tt.join(",")};return it(this,U,$t).call(this,at,"feFuncR",et(0,5)),it(this,U,$t).call(this,at,"feFuncG",et(1,5)),it(this,U,$t).call(this,at,"feFuncB",et(2,5)),b(this,E,zt).append(K),pt(this,yt,`url(#${nt})`),b(this,yt)}destroy(D=!1){D&&b(this,yt)||(b(this,rt)&&(b(this,rt).parentNode.parentNode.remove(),pt(this,rt,null)),b(this,ht)&&(b(this,ht).clear(),pt(this,ht,null)),pt(this,V,0))}}ht=new WeakMap,rt=new WeakMap,ct=new WeakMap,gt=new WeakMap,At=new WeakMap,St=new WeakMap,yt=new WeakMap,V=new WeakMap,h=new WeakSet,Jt=function(){return b(this,ht)||pt(this,ht,new Map)},E=new WeakSet,zt=function(){if(!b(this,rt)){const D=b(this,gt).createElement("div"),{style:e}=D;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const i=b(this,gt).createElementNS(W,"svg");i.setAttribute("width",0),i.setAttribute("height",0),pt(this,rt,b(this,gt).createElementNS(W,"defs")),D.append(i),i.append(b(this,rt)),b(this,gt).body.append(D)}return b(this,rt)},U=new WeakSet,$t=function(D,e,i){const g=b(this,gt).createElementNS(W,e);g.setAttribute("type","discrete"),g.setAttribute("tableValues",i),D.append(g)},r.DOMFilterFactory=L;class k extends c.BaseCanvasFactory{constructor({ownerDocument:M=globalThis.document}={}){super(),this._document=M}_createCanvas(M,D){const e=this._document.createElement("canvas");return e.width=M,e.height=D,e}}r.DOMCanvasFactory=k;async function _(F,M=!1){if(t(F,document.baseURI)){const D=await fetch(F);if(!D.ok)throw new Error(D.statusText);return M?new Uint8Array(await D.arrayBuffer()):(0,A.stringToBytes)(await D.text())}return new Promise((D,e)=>{const i=new XMLHttpRequest;i.open("GET",F,!0),M&&(i.responseType="arraybuffer"),i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){let g;if(M&&i.response?g=new Uint8Array(i.response):!M&&i.responseText&&(g=(0,A.stringToBytes)(i.responseText)),g){D(g);return}}e(new Error(i.statusText))}},i.send(null)})}class N extends c.BaseCMapReaderFactory{_fetchData(M,D){return _(M,this.isCompressed).then(e=>({cMapData:e,compressionType:D}))}}r.DOMCMapReaderFactory=N;class x extends c.BaseStandardFontDataFactory{_fetchData(M){return _(M,!0)}}r.DOMStandardFontDataFactory=x;class P extends c.BaseSVGFactory{_createSVG(M){return document.createElementNS(W,M)}}r.DOMSVGFactory=P;class p{constructor({viewBox:M,scale:D,rotation:e,offsetX:i=0,offsetY:g=0,dontFlip:v=!1}){this.viewBox=M,this.scale=D,this.rotation=e,this.offsetX=i,this.offsetY=g;const T=(M[2]+M[0])/2,H=(M[3]+M[1])/2;let nt,K,at,ot;switch(e%=360,e<0&&(e+=360),e){case 180:nt=-1,K=0,at=0,ot=1;break;case 90:nt=0,K=1,at=1,ot=0;break;case 270:nt=0,K=-1,at=-1,ot=0;break;case 0:nt=1,K=0,at=0,ot=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}v&&(at=-at,ot=-ot);let et,st,ut,ft;nt===0?(et=Math.abs(H-M[1])*D+i,st=Math.abs(T-M[0])*D+g,ut=(M[3]-M[1])*D,ft=(M[2]-M[0])*D):(et=Math.abs(T-M[0])*D+i,st=Math.abs(H-M[1])*D+g,ut=(M[2]-M[0])*D,ft=(M[3]-M[1])*D),this.transform=[nt*D,K*D,at*D,ot*D,et-nt*D*T-at*D*H,st-K*D*T-ot*D*H],this.width=ut,this.height=ft}get rawDims(){const{viewBox:M}=this;return(0,A.shadow)(this,"rawDims",{pageWidth:M[2]-M[0],pageHeight:M[3]-M[1],pageX:M[0],pageY:M[1]})}clone({scale:M=this.scale,rotation:D=this.rotation,offsetX:e=this.offsetX,offsetY:i=this.offsetY,dontFlip:g=!1}={}){return new p({viewBox:this.viewBox.slice(),scale:M,rotation:D,offsetX:e,offsetY:i,dontFlip:g})}convertToViewportPoint(M,D){return A.Util.applyTransform([M,D],this.transform)}convertToViewportRectangle(M){const D=A.Util.applyTransform([M[0],M[1]],this.transform),e=A.Util.applyTransform([M[2],M[3]],this.transform);return[D[0],D[1],e[0],e[1]]}convertToPdfPoint(M,D){return A.Util.applyInverseTransform([M,D],this.transform)}}r.PageViewport=p;class u extends A.BaseException{constructor(M,D,e=0){super(M,"RenderingCancelledException"),this.type=D,this.extraDelay=e}}r.RenderingCancelledException=u;function a(F){const M=F.length;let D=0;for(;D<M&&F[D].trim()==="";)D++;return F.substring(D,D+5).toLowerCase()==="data:"}function y(F){return typeof F=="string"&&/\.pdf$/i.test(F)}function S(F,M=!1){return M||([F]=F.split(/[#?]/,1)),F.substring(F.lastIndexOf("/")+1)}function C(F,M="document.pdf"){if(typeof F!="string")return M;if(a(F))return(0,A.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),M;const D=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,e=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=D.exec(F);let g=e.exec(i[1])||e.exec(i[2])||e.exec(i[3]);if(g&&(g=g[0],g.includes("%")))try{g=e.exec(decodeURIComponent(g))[0]}catch{}return g||M}class m{constructor(){Dt(this,"started",Object.create(null));Dt(this,"times",[])}time(M){M in this.started&&(0,A.warn)(`Timer is already running for ${M}`),this.started[M]=Date.now()}timeEnd(M){M in this.started||(0,A.warn)(`Timer has not been started for ${M}`),this.times.push({name:M,start:this.started[M],end:Date.now()}),delete this.started[M]}toString(){const M=[];let D=0;for(const{name:e}of this.times)D=Math.max(e.length,D);for(const{name:e,start:i,end:g}of this.times)M.push(`${e.padEnd(D)} ${g-i}ms
`);return M.join("")}}r.StatTimer=m;function t(F,M){try{const{protocol:D}=M?new URL(F,M):new URL(F);return D==="http:"||D==="https:"}catch{return!1}}function o(F,M=!1){return new Promise((D,e)=>{const i=document.createElement("script");i.src=F,i.onload=function(g){M&&i.remove(),D(g)},i.onerror=function(){e(new Error(`Cannot load script at: ${i.src}`))},(document.head||document.documentElement).append(i)})}function l(F){console.log("Deprecated API usage: "+F)}let s;class d{static toDateObject(M){if(!M||typeof M!="string")return null;s||(s=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const D=s.exec(M);if(!D)return null;const e=parseInt(D[1],10);let i=parseInt(D[2],10);i=i>=1&&i<=12?i-1:0;let g=parseInt(D[3],10);g=g>=1&&g<=31?g:1;let v=parseInt(D[4],10);v=v>=0&&v<=23?v:0;let T=parseInt(D[5],10);T=T>=0&&T<=59?T:0;let H=parseInt(D[6],10);H=H>=0&&H<=59?H:0;const nt=D[7]||"Z";let K=parseInt(D[8],10);K=K>=0&&K<=23?K:0;let at=parseInt(D[9],10)||0;return at=at>=0&&at<=59?at:0,nt==="-"?(v+=K,T+=at):nt==="+"&&(v-=K,T-=at),new Date(Date.UTC(e,i,g,v,T,H))}}r.PDFDateString=d;function R(F,{scale:M=1,rotation:D=0}){const{width:e,height:i}=F.attributes.style,g=[0,0,parseInt(e),parseInt(i)];return new p({viewBox:g,scale:M,rotation:D})}function n(F){if(F.startsWith("#")){const M=parseInt(F.slice(1),16);return[(M&16711680)>>16,(M&65280)>>8,M&255]}return F.startsWith("rgb(")?F.slice(4,-1).split(",").map(M=>parseInt(M)):F.startsWith("rgba(")?F.slice(5,-1).split(",").map(M=>parseInt(M)).slice(0,3):((0,A.warn)(`Not a valid color format: "${F}"`),[0,0,0])}function I(F){const M=document.createElement("span");M.style.visibility="hidden",document.body.append(M);for(const D of F.keys()){M.style.color=D;const e=window.getComputedStyle(M).color;F.set(D,n(e))}M.remove()}function $(F){const{a:M,b:D,c:e,d:i,e:g,f:v}=F.getTransform();return[M,D,e,i,g,v]}function z(F){const{a:M,b:D,c:e,d:i,e:g,f:v}=F.getTransform().invertSelf();return[M,D,e,i,g,v]}function J(F,M,D=!1,e=!0){if(M instanceof p){const{pageWidth:i,pageHeight:g}=M.rawDims,{style:v}=F,T=`calc(var(--scale-factor) * ${i}px)`,H=`calc(var(--scale-factor) * ${g}px)`;!D||M.rotation%180===0?(v.width=T,v.height=H):(v.width=H,v.height=T)}e&&F.setAttribute("data-main-rotation",M.rotation)}},(j,r,B)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BaseStandardFontDataFactory=r.BaseSVGFactory=r.BaseFilterFactory=r.BaseCanvasFactory=r.BaseCMapReaderFactory=void 0;var c=B(1);class A{constructor(){this.constructor===A&&(0,c.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(_){return"none"}addHCMFilter(_,N){return"none"}destroy(_=!1){}}r.BaseFilterFactory=A;class W{constructor(){this.constructor===W&&(0,c.unreachable)("Cannot initialize BaseCanvasFactory.")}create(_,N){if(_<=0||N<=0)throw new Error("Invalid canvas size");const x=this._createCanvas(_,N);return{canvas:x,context:x.getContext("2d")}}reset(_,N,x){if(!_.canvas)throw new Error("Canvas is not specified");if(N<=0||x<=0)throw new Error("Invalid canvas size");_.canvas.width=N,_.canvas.height=x}destroy(_){if(!_.canvas)throw new Error("Canvas is not specified");_.canvas.width=0,_.canvas.height=0,_.canvas=null,_.context=null}_createCanvas(_,N){(0,c.unreachable)("Abstract method `_createCanvas` called.")}}r.BaseCanvasFactory=W;class q{constructor({baseUrl:_=null,isCompressed:N=!0}){this.constructor===q&&(0,c.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=_,this.isCompressed=N}async fetch({name:_}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!_)throw new Error("CMap name must be specified.");const N=this.baseUrl+_+(this.isCompressed?".bcmap":""),x=this.isCompressed?c.CMapCompressionType.BINARY:c.CMapCompressionType.NONE;return this._fetchData(N,x).catch(P=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${N}`)})}_fetchData(_,N){(0,c.unreachable)("Abstract method `_fetchData` called.")}}r.BaseCMapReaderFactory=q;class Z{constructor({baseUrl:_=null}){this.constructor===Z&&(0,c.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=_}async fetch({filename:_}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!_)throw new Error("Font filename must be specified.");const N=`${this.baseUrl}${_}`;return this._fetchData(N).catch(x=>{throw new Error(`Unable to load font data at: ${N}`)})}_fetchData(_){(0,c.unreachable)("Abstract method `_fetchData` called.")}}r.BaseStandardFontDataFactory=Z;class L{constructor(){this.constructor===L&&(0,c.unreachable)("Cannot initialize BaseSVGFactory.")}create(_,N,x=!1){if(_<=0||N<=0)throw new Error("Invalid SVG dimensions");const P=this._createSVG("svg:svg");return P.setAttribute("version","1.1"),x||(P.setAttribute("width",`${_}px`),P.setAttribute("height",`${N}px`)),P.setAttribute("preserveAspectRatio","none"),P.setAttribute("viewBox",`0 0 ${_} ${N}`),P}createElement(_){if(typeof _!="string")throw new Error("Invalid SVG element type");return this._createSVG(_)}_createSVG(_){(0,c.unreachable)("Abstract method `_createSVG` called.")}}r.BaseSVGFactory=L},(j,r,B)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.MurmurHash3_64=void 0;var c=B(1);const A=3285377520,W=4294901760,q=65535;class Z{constructor(k){this.h1=k?k&4294967295:A,this.h2=k?k&4294967295:A}update(k){let _,N;if(typeof k=="string"){_=new Uint8Array(k.length*2),N=0;for(let l=0,s=k.length;l<s;l++){const d=k.charCodeAt(l);d<=255?_[N++]=d:(_[N++]=d>>>8,_[N++]=d&255)}}else if((0,c.isArrayBuffer)(k))_=k.slice(),N=_.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const x=N>>2,P=N-x*4,p=new Uint32Array(_.buffer,0,x);let u=0,a=0,y=this.h1,S=this.h2;const C=3432918353,m=461845907,t=C&q,o=m&q;for(let l=0;l<x;l++)l&1?(u=p[l],u=u*C&W|u*t&q,u=u<<15|u>>>17,u=u*m&W|u*o&q,y^=u,y=y<<13|y>>>19,y=y*5+3864292196):(a=p[l],a=a*C&W|a*t&q,a=a<<15|a>>>17,a=a*m&W|a*o&q,S^=a,S=S<<13|S>>>19,S=S*5+3864292196);switch(u=0,P){case 3:u^=_[x*4+2]<<16;case 2:u^=_[x*4+1]<<8;case 1:u^=_[x*4],u=u*C&W|u*t&q,u=u<<15|u>>>17,u=u*m&W|u*o&q,x&1?y^=u:S^=u}this.h1=y,this.h2=S}hexdigest(){let k=this.h1,_=this.h2;return k^=_>>>1,k=k*3981806797&W|k*36045&q,_=_*4283543511&W|((_<<16|k>>>16)*2950163797&W)>>>16,k^=_>>>1,k=k*444984403&W|k*60499&q,_=_*3301882366&W|((_<<16|k>>>16)*3120437893&W)>>>16,k^=_>>>1,(k>>>0).toString(16).padStart(8,"0")+(_>>>0).toString(16).padStart(8,"0")}}r.MurmurHash3_64=Z},(j,r,B)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.FontLoader=r.FontFaceObject=void 0;var c=B(1),A=B(10);class W{constructor({ownerDocument:L=globalThis.document,styleElement:k=null}){this._document=L,this.nativeFontFaces=[],this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(L){this.nativeFontFaces.push(L),this._document.fonts.add(L)}insertRule(L){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const k=this.styleElement.sheet;k.insertRule(L,k.cssRules.length)}clear(){for(const L of this.nativeFontFaces)this._document.fonts.delete(L);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(L){if(L.attached||L.missingFile)return;if(L.attached=!0,this.isFontLoadingAPISupported){const _=L.createNativeFontFace();if(_){this.addNativeFontFace(_);try{await _.loaded}catch(N){throw(0,c.warn)(`Failed to load font '${_.family}': '${N}'.`),L.disableFontFace=!0,N}}return}const k=L.createFontFaceRule();if(k){if(this.insertRule(k),this.isSyncFontLoadingSupported)return;await new Promise(_=>{const N=this._queueLoadingCallback(_);this._prepareFontLoadEvent(L,N)})}}get isFontLoadingAPISupported(){var k;const L=!!((k=this._document)!=null&&k.fonts);return(0,c.shadow)(this,"isFontLoadingAPISupported",L)}get isSyncFontLoadingSupported(){let L=!1;return(A.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(L=!0),(0,c.shadow)(this,"isSyncFontLoadingSupported",L)}_queueLoadingCallback(L){function k(){for((0,c.assert)(!N.done,"completeRequest() cannot be called twice."),N.done=!0;_.length>0&&_[0].done;){const x=_.shift();setTimeout(x.callback,0)}}const{loadingRequests:_}=this,N={done:!1,complete:k,callback:L};return _.push(N),N}get _loadTestFont(){const L=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,c.shadow)(this,"_loadTestFont",L)}_prepareFontLoadEvent(L,k){function _(n,I){return n.charCodeAt(I)<<24|n.charCodeAt(I+1)<<16|n.charCodeAt(I+2)<<8|n.charCodeAt(I+3)&255}function N(n,I,$,z){const J=n.substring(0,I),tt=n.substring(I+$);return J+z+tt}let x,P;const p=this._document.createElement("canvas");p.width=1,p.height=1;const u=p.getContext("2d");let a=0;function y(n,I){if(++a>30){(0,c.warn)("Load test font never loaded."),I();return}if(u.font="30px "+n,u.fillText(".",0,20),u.getImageData(0,0,1,1).data[3]>0){I();return}setTimeout(y.bind(null,n,I))}const S=`lt${Date.now()}${this.loadTestFontId++}`;let C=this._loadTestFont;C=N(C,976,S.length,S);const t=16,o=1482184792;let l=_(C,t);for(x=0,P=S.length-3;x<P;x+=4)l=l-o+_(S,x)|0;x<S.length&&(l=l-o+_(S+"XXX",x)|0),C=N(C,t,4,(0,c.string32)(l));const s=`url(data:font/opentype;base64,${btoa(C)});`,d=`@font-face {font-family:"${S}";src:${s}}`;this.insertRule(d);const R=this._document.createElement("div");R.style.visibility="hidden",R.style.width=R.style.height="10px",R.style.position="absolute",R.style.top=R.style.left="0px";for(const n of[L.loadedName,S]){const I=this._document.createElement("span");I.textContent="Hi",I.style.fontFamily=n,R.append(I)}this._document.body.append(R),y(S,()=>{R.remove(),k.complete()})}}r.FontLoader=W;class q{constructor(L,{isEvalSupported:k=!0,disableFontFace:_=!1,ignoreErrors:N=!1,inspectFont:x=null}){this.compiledGlyphs=Object.create(null);for(const P in L)this[P]=L[P];this.isEvalSupported=k!==!1,this.disableFontFace=_===!0,this.ignoreErrors=N===!0,this._inspectFont=x}createNativeFontFace(){var k;if(!this.data||this.disableFontFace)return null;let L;if(!this.cssFontInfo)L=new FontFace(this.loadedName,this.data,{});else{const _={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(_.style=`oblique ${this.cssFontInfo.italicAngle}deg`),L=new FontFace(this.cssFontInfo.fontFamily,this.data,_)}return(k=this._inspectFont)==null||k.call(this,this),L}createFontFaceRule(){var N;if(!this.data||this.disableFontFace)return null;const L=(0,c.bytesToString)(this.data),k=`url(data:${this.mimetype};base64,${btoa(L)});`;let _;if(!this.cssFontInfo)_=`@font-face {font-family:"${this.loadedName}";src:${k}}`;else{let x=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(x+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),_=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${x}src:${k}}`}return(N=this._inspectFont)==null||N.call(this,this,k),_}getPathGenerator(L,k){if(this.compiledGlyphs[k]!==void 0)return this.compiledGlyphs[k];let _;try{_=L.get(this.loadedName+"_path_"+k)}catch(N){if(!this.ignoreErrors)throw N;return(0,c.warn)(`getPathGenerator - ignoring character: "${N}".`),this.compiledGlyphs[k]=function(x,P){}}if(this.isEvalSupported&&c.FeatureTest.isEvalSupported){const N=[];for(const x of _){const P=x.args!==void 0?x.args.join(","):"";N.push("c.",x.cmd,"(",P,`);
`)}return this.compiledGlyphs[k]=new Function("c","size",N.join(""))}return this.compiledGlyphs[k]=function(N,x){for(const P of _)P.cmd==="scale"&&(P.args=[x,-x]),N[P.cmd].apply(N,P.args)}}}r.FontFaceObject=q},(j,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.isNodeJS=void 0;const B=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");r.isNodeJS=B},(j,r,B)=>{var ct,be,At,ye;Object.defineProperty(r,"__esModule",{value:!0}),r.CanvasGraphics=void 0;var c=B(1),A=B(6),W=B(12),q=B(13),Z=B(10);const L=16,k=100,_=4096,N=15,x=10,P=1e3,p=16;function u(V,h){if(V._removeMirroring)throw new Error("Context is already forwarding operations.");V.__originalSave=V.save,V.__originalRestore=V.restore,V.__originalRotate=V.rotate,V.__originalScale=V.scale,V.__originalTranslate=V.translate,V.__originalTransform=V.transform,V.__originalSetTransform=V.setTransform,V.__originalResetTransform=V.resetTransform,V.__originalClip=V.clip,V.__originalMoveTo=V.moveTo,V.__originalLineTo=V.lineTo,V.__originalBezierCurveTo=V.bezierCurveTo,V.__originalRect=V.rect,V.__originalClosePath=V.closePath,V.__originalBeginPath=V.beginPath,V._removeMirroring=()=>{V.save=V.__originalSave,V.restore=V.__originalRestore,V.rotate=V.__originalRotate,V.scale=V.__originalScale,V.translate=V.__originalTranslate,V.transform=V.__originalTransform,V.setTransform=V.__originalSetTransform,V.resetTransform=V.__originalResetTransform,V.clip=V.__originalClip,V.moveTo=V.__originalMoveTo,V.lineTo=V.__originalLineTo,V.bezierCurveTo=V.__originalBezierCurveTo,V.rect=V.__originalRect,V.closePath=V.__originalClosePath,V.beginPath=V.__originalBeginPath,delete V._removeMirroring},V.save=function(){h.save(),this.__originalSave()},V.restore=function(){h.restore(),this.__originalRestore()},V.translate=function(E,G){h.translate(E,G),this.__originalTranslate(E,G)},V.scale=function(E,G){h.scale(E,G),this.__originalScale(E,G)},V.transform=function(E,G,U,X,F,M){h.transform(E,G,U,X,F,M),this.__originalTransform(E,G,U,X,F,M)},V.setTransform=function(E,G,U,X,F,M){h.setTransform(E,G,U,X,F,M),this.__originalSetTransform(E,G,U,X,F,M)},V.resetTransform=function(){h.resetTransform(),this.__originalResetTransform()},V.rotate=function(E){h.rotate(E),this.__originalRotate(E)},V.clip=function(E){h.clip(E),this.__originalClip(E)},V.moveTo=function(f,E){h.moveTo(f,E),this.__originalMoveTo(f,E)},V.lineTo=function(f,E){h.lineTo(f,E),this.__originalLineTo(f,E)},V.bezierCurveTo=function(f,E,G,U,X,F){h.bezierCurveTo(f,E,G,U,X,F),this.__originalBezierCurveTo(f,E,G,U,X,F)},V.rect=function(f,E,G,U){h.rect(f,E,G,U),this.__originalRect(f,E,G,U)},V.closePath=function(){h.closePath(),this.__originalClosePath()},V.beginPath=function(){h.beginPath(),this.__originalBeginPath()}}class a{constructor(h){this.canvasFactory=h,this.cache=Object.create(null)}getCanvas(h,f,E){let G;return this.cache[h]!==void 0?(G=this.cache[h],this.canvasFactory.reset(G,f,E)):(G=this.canvasFactory.create(f,E),this.cache[h]=G),G}delete(h){delete this.cache[h]}clear(){for(const h in this.cache){const f=this.cache[h];this.canvasFactory.destroy(f),delete this.cache[h]}}}function y(V,h,f,E,G,U,X,F,M,D){const[e,i,g,v,T,H]=(0,A.getCurrentTransform)(V);if(i===0&&g===0){const at=X*e+T,ot=Math.round(at),et=F*v+H,st=Math.round(et),ut=(X+M)*e+T,ft=Math.abs(Math.round(ut)-ot)||1,Et=(F+D)*v+H,vt=Math.abs(Math.round(Et)-st)||1;return V.setTransform(Math.sign(e),0,0,Math.sign(v),ot,st),V.drawImage(h,f,E,G,U,0,0,ft,vt),V.setTransform(e,i,g,v,T,H),[ft,vt]}if(e===0&&v===0){const at=F*g+T,ot=Math.round(at),et=X*i+H,st=Math.round(et),ut=(F+D)*g+T,ft=Math.abs(Math.round(ut)-ot)||1,Et=(X+M)*i+H,vt=Math.abs(Math.round(Et)-st)||1;return V.setTransform(0,Math.sign(i),Math.sign(g),0,ot,st),V.drawImage(h,f,E,G,U,0,0,vt,ft),V.setTransform(e,i,g,v,T,H),[vt,ft]}V.drawImage(h,f,E,G,U,X,F,M,D);const nt=Math.hypot(e,i),K=Math.hypot(g,v);return[nt*M,K*D]}function S(V){const{width:h,height:f}=V;if(h>P||f>P)return null;const E=1e3,G=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),U=h+1;let X=new Uint8Array(U*(f+1)),F,M,D;const e=h+7&-8;let i=new Uint8Array(e*f),g=0;for(const K of V.data){let at=128;for(;at>0;)i[g++]=K&at?0:255,at>>=1}let v=0;for(g=0,i[g]!==0&&(X[0]=1,++v),M=1;M<h;M++)i[g]!==i[g+1]&&(X[M]=i[g]?2:1,++v),g++;for(i[g]!==0&&(X[M]=2,++v),F=1;F<f;F++){g=F*e,D=F*U,i[g-e]!==i[g]&&(X[D]=i[g]?1:8,++v);let K=(i[g]?4:0)+(i[g-e]?8:0);for(M=1;M<h;M++)K=(K>>2)+(i[g+1]?4:0)+(i[g-e+1]?8:0),G[K]&&(X[D+M]=G[K],++v),g++;if(i[g-e]!==i[g]&&(X[D+M]=i[g]?2:4,++v),v>E)return null}for(g=e*(f-1),D=F*U,i[g]!==0&&(X[D]=8,++v),M=1;M<h;M++)i[g]!==i[g+1]&&(X[D+M]=i[g]?4:8,++v),g++;if(i[g]!==0&&(X[D+M]=4,++v),v>E)return null;const T=new Int32Array([0,U,-1,0,-U,0,0,0,1]),H=new Path2D;for(F=0;v&&F<=f;F++){let K=F*U;const at=K+h;for(;K<at&&!X[K];)K++;if(K===at)continue;H.moveTo(K%U,F);const ot=K;let et=X[K];do{const st=T[et];do K+=st;while(!X[K]);const ut=X[K];ut!==5&&ut!==10?(et=ut,X[K]=0):(et=ut&51*et>>4,X[K]&=et>>2|et<<2),H.lineTo(K%U,K/U|0),X[K]||--v}while(ot!==K);--F}return i=null,X=null,function(K){K.save(),K.scale(1/h,-1/f),K.translate(0,-f),K.fill(H),K.beginPath(),K.restore()}}class C{constructor(h,f){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=c.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=c.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=c.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,h,f])}clone(){const h=Object.create(this);return h.clipBox=this.clipBox.slice(),h}setCurrentPoint(h,f){this.x=h,this.y=f}updatePathMinMax(h,f,E){[f,E]=c.Util.applyTransform([f,E],h),this.minX=Math.min(this.minX,f),this.minY=Math.min(this.minY,E),this.maxX=Math.max(this.maxX,f),this.maxY=Math.max(this.maxY,E)}updateRectMinMax(h,f){const E=c.Util.applyTransform(f,h),G=c.Util.applyTransform(f.slice(2),h);this.minX=Math.min(this.minX,E[0],G[0]),this.minY=Math.min(this.minY,E[1],G[1]),this.maxX=Math.max(this.maxX,E[0],G[0]),this.maxY=Math.max(this.maxY,E[1],G[1])}updateScalingPathMinMax(h,f){c.Util.scaleMinMax(h,f),this.minX=Math.min(this.minX,f[0]),this.maxX=Math.max(this.maxX,f[1]),this.minY=Math.min(this.minY,f[2]),this.maxY=Math.max(this.maxY,f[3])}updateCurvePathMinMax(h,f,E,G,U,X,F,M,D,e){const i=c.Util.bezierBoundingBox(f,E,G,U,X,F,M,D);if(e){e[0]=Math.min(e[0],i[0],i[2]),e[1]=Math.max(e[1],i[0],i[2]),e[2]=Math.min(e[2],i[1],i[3]),e[3]=Math.max(e[3],i[1],i[3]);return}this.updateRectMinMax(h,i)}getPathBoundingBox(h=W.PathType.FILL,f=null){const E=[this.minX,this.minY,this.maxX,this.maxY];if(h===W.PathType.STROKE){f||(0,c.unreachable)("Stroke bounding box must include transform.");const G=c.Util.singularValueDecompose2dScale(f),U=G[0]*this.lineWidth/2,X=G[1]*this.lineWidth/2;E[0]-=U,E[1]-=X,E[2]+=U,E[3]+=X}return E}updateClipFromPath(){const h=c.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(h||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(h){this.clipBox=h,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(h=W.PathType.FILL,f=null){return c.Util.intersect(this.clipBox,this.getPathBoundingBox(h,f))}}function m(V,h){if(typeof ImageData<"u"&&h instanceof ImageData){V.putImageData(h,0,0);return}const f=h.height,E=h.width,G=f%p,U=(f-G)/p,X=G===0?U:U+1,F=V.createImageData(E,p);let M=0,D;const e=h.data,i=F.data;let g,v,T,H;if(h.kind===c.ImageKind.GRAYSCALE_1BPP){const nt=e.byteLength,K=new Uint32Array(i.buffer,0,i.byteLength>>2),at=K.length,ot=E+7>>3,et=4294967295,st=c.FeatureTest.isLittleEndian?4278190080:255;for(g=0;g<X;g++){for(T=g<U?p:G,D=0,v=0;v<T;v++){const ut=nt-M;let ft=0;const Et=ut>ot?E:ut*8-7,vt=Et&-8;let Tt=0,Y=0;for(;ft<vt;ft+=8)Y=e[M++],K[D++]=Y&128?et:st,K[D++]=Y&64?et:st,K[D++]=Y&32?et:st,K[D++]=Y&16?et:st,K[D++]=Y&8?et:st,K[D++]=Y&4?et:st,K[D++]=Y&2?et:st,K[D++]=Y&1?et:st;for(;ft<Et;ft++)Tt===0&&(Y=e[M++],Tt=128),K[D++]=Y&Tt?et:st,Tt>>=1}for(;D<at;)K[D++]=0;V.putImageData(F,0,g*p)}}else if(h.kind===c.ImageKind.RGBA_32BPP){for(v=0,H=E*p*4,g=0;g<U;g++)i.set(e.subarray(M,M+H)),M+=H,V.putImageData(F,0,v),v+=p;g<X&&(H=E*G*4,i.set(e.subarray(M,M+H)),V.putImageData(F,0,v))}else if(h.kind===c.ImageKind.RGB_24BPP)for(T=p,H=E*T,g=0;g<X;g++){for(g>=U&&(T=G,H=E*T),D=0,v=H;v--;)i[D++]=e[M++],i[D++]=e[M++],i[D++]=e[M++],i[D++]=255;V.putImageData(F,0,g*p)}else throw new Error(`bad image kind: ${h.kind}`)}function t(V,h){if(h.bitmap){V.drawImage(h.bitmap,0,0);return}const f=h.height,E=h.width,G=f%p,U=(f-G)/p,X=G===0?U:U+1,F=V.createImageData(E,p);let M=0;const D=h.data,e=F.data;for(let i=0;i<X;i++){const g=i<U?p:G;({srcPos:M}=(0,q.convertBlackAndWhiteToRGBA)({src:D,srcPos:M,dest:e,width:E,height:g,nonBlackColor:0})),V.putImageData(F,0,i*p)}}function o(V,h){const f=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const E of f)V[E]!==void 0&&(h[E]=V[E]);V.setLineDash!==void 0&&(h.setLineDash(V.getLineDash()),h.lineDashOffset=V.lineDashOffset)}function l(V){V.strokeStyle=V.fillStyle="#000000",V.fillRule="nonzero",V.globalAlpha=1,V.lineWidth=1,V.lineCap="butt",V.lineJoin="miter",V.miterLimit=10,V.globalCompositeOperation="source-over",V.font="10px sans-serif",V.setLineDash!==void 0&&(V.setLineDash([]),V.lineDashOffset=0),Z.isNodeJS||(V.filter="none")}function s(V,h,f,E){const G=V.length;for(let U=3;U<G;U+=4){const X=V[U];if(X===0)V[U-3]=h,V[U-2]=f,V[U-1]=E;else if(X<255){const F=255-X;V[U-3]=V[U-3]*X+h*F>>8,V[U-2]=V[U-2]*X+f*F>>8,V[U-1]=V[U-1]*X+E*F>>8}}}function d(V,h,f){const E=V.length,G=1/255;for(let U=3;U<E;U+=4){const X=f?f[V[U]]:V[U];h[U]=h[U]*X*G|0}}function R(V,h,f){const E=V.length;for(let G=3;G<E;G+=4){const U=V[G-3]*77+V[G-2]*152+V[G-1]*28;h[G]=f?h[G]*f[U>>8]>>8:h[G]*U>>16}}function n(V,h,f,E,G,U,X,F,M,D,e){const i=!!U,g=i?U[0]:0,v=i?U[1]:0,T=i?U[2]:0;let H;G==="Luminosity"?H=R:H=d;const K=Math.min(E,Math.ceil(1048576/f));for(let at=0;at<E;at+=K){const ot=Math.min(K,E-at),et=V.getImageData(F-D,at+(M-e),f,ot),st=h.getImageData(F,at+M,f,ot);i&&s(et.data,g,v,T),H(et.data,st.data,X),h.putImageData(st,F,at+M)}}function I(V,h,f,E){const G=E[0],U=E[1],X=E[2]-G,F=E[3]-U;X===0||F===0||(n(h.context,f,X,F,h.subtype,h.backdrop,h.transferMap,G,U,h.offsetX,h.offsetY),V.save(),V.globalAlpha=1,V.globalCompositeOperation="source-over",V.setTransform(1,0,0,1,0,0),V.drawImage(f.canvas,0,0),V.restore())}function $(V,h){const f=c.Util.singularValueDecompose2dScale(V);f[0]=Math.fround(f[0]),f[1]=Math.fround(f[1]);const E=Math.fround((globalThis.devicePixelRatio||1)*A.PixelsPerInch.PDF_TO_CSS_UNITS);return h!==void 0?h:f[0]<=E||f[1]<=E}const z=["butt","round","square"],J=["miter","round","bevel"],tt={},ht={},yt=class yt{constructor(h,f,E,G,U,{optionalContentConfig:X,markedContentStack:F=null},M,D){Q(this,ct);Q(this,At);this.ctx=h,this.current=new C(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=f,this.objs=E,this.canvasFactory=G,this.filterFactory=U,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=F||[],this.optionalContentConfig=X,this.cachedCanvases=new a(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=M,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=D,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(h,f=null){return typeof h=="string"?h.startsWith("g_")?this.commonObjs.get(h):this.objs.get(h):f}beginDrawing({transform:h,viewport:f,transparency:E=!1,background:G=null}){const U=this.ctx.canvas.width,X=this.ctx.canvas.height,F=this.ctx.fillStyle;if(this.ctx.fillStyle=G||"#ffffff",this.ctx.fillRect(0,0,U,X),this.ctx.fillStyle=F,E){const M=this.cachedCanvases.getCanvas("transparent",U,X);this.compositeCtx=this.ctx,this.transparentCanvas=M.canvas,this.ctx=M.context,this.ctx.save(),this.ctx.transform(...(0,A.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),l(this.ctx),h&&(this.ctx.transform(...h),this.outputScaleX=h[0],this.outputScaleY=h[0]),this.ctx.transform(...f.transform),this.viewportScale=f.scale,this.baseTransform=(0,A.getCurrentTransform)(this.ctx)}executeOperatorList(h,f,E,G){const U=h.argsArray,X=h.fnArray;let F=f||0;const M=U.length;if(M===F)return F;const D=M-F>x&&typeof E=="function",e=D?Date.now()+N:0;let i=0;const g=this.commonObjs,v=this.objs;let T;for(;;){if(G!==void 0&&F===G.nextBreakPoint)return G.breakIt(F,E),F;if(T=X[F],T!==c.OPS.dependency)this[T].apply(this,U[F]);else for(const H of U[F]){const nt=H.startsWith("g_")?g:v;if(!nt.has(H))return nt.get(H,E),F}if(F++,F===M)return F;if(D&&++i>x){if(Date.now()>e)return E(),F;i=0}}}endDrawing(){it(this,ct,be).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const h of this._cachedBitmapsMap.values()){for(const f of h.values())typeof HTMLCanvasElement<"u"&&f instanceof HTMLCanvasElement&&(f.width=f.height=0);h.clear()}this._cachedBitmapsMap.clear(),it(this,At,ye).call(this)}_scaleImage(h,f){const E=h.width,G=h.height;let U=Math.max(Math.hypot(f[0],f[1]),1),X=Math.max(Math.hypot(f[2],f[3]),1),F=E,M=G,D="prescale1",e,i;for(;U>2&&F>1||X>2&&M>1;){let g=F,v=M;U>2&&F>1&&(g=F>=16384?Math.floor(F/2)-1||1:Math.ceil(F/2),U/=F/g),X>2&&M>1&&(v=M>=16384?Math.floor(M/2)-1||1:Math.ceil(M)/2,X/=M/v),e=this.cachedCanvases.getCanvas(D,g,v),i=e.context,i.clearRect(0,0,g,v),i.drawImage(h,0,0,F,M,0,0,g,v),h=e.canvas,F=g,M=v,D=D==="prescale1"?"prescale2":"prescale1"}return{img:h,paintWidth:F,paintHeight:M}}_createMaskCanvas(h){const f=this.ctx,{width:E,height:G}=h,U=this.current.fillColor,X=this.current.patternFill,F=(0,A.getCurrentTransform)(f);let M,D,e,i;if((h.bitmap||h.data)&&h.count>1){const ft=h.bitmap||h.data.buffer;D=JSON.stringify(X?F:[F.slice(0,4),U]),M=this._cachedBitmapsMap.get(ft),M||(M=new Map,this._cachedBitmapsMap.set(ft,M));const Et=M.get(D);if(Et&&!X){const vt=Math.round(Math.min(F[0],F[2])+F[4]),Tt=Math.round(Math.min(F[1],F[3])+F[5]);return{canvas:Et,offsetX:vt,offsetY:Tt}}e=Et}e||(i=this.cachedCanvases.getCanvas("maskCanvas",E,G),t(i.context,h));let g=c.Util.transform(F,[1/E,0,0,-1/G,0,0]);g=c.Util.transform(g,[1,0,0,1,0,-G]);const v=c.Util.applyTransform([0,0],g),T=c.Util.applyTransform([E,G],g),H=c.Util.normalizeRect([v[0],v[1],T[0],T[1]]),nt=Math.round(H[2]-H[0])||1,K=Math.round(H[3]-H[1])||1,at=this.cachedCanvases.getCanvas("fillCanvas",nt,K),ot=at.context,et=Math.min(v[0],T[0]),st=Math.min(v[1],T[1]);ot.translate(-et,-st),ot.transform(...g),e||(e=this._scaleImage(i.canvas,(0,A.getCurrentTransformInverse)(ot)),e=e.img,M&&X&&M.set(D,e)),ot.imageSmoothingEnabled=$((0,A.getCurrentTransform)(ot),h.interpolate),y(ot,e,0,0,e.width,e.height,0,0,E,G),ot.globalCompositeOperation="source-in";const ut=c.Util.transform((0,A.getCurrentTransformInverse)(ot),[1,0,0,1,-et,-st]);return ot.fillStyle=X?U.getPattern(f,this,ut,W.PathType.FILL):U,ot.fillRect(0,0,E,G),M&&!X&&(this.cachedCanvases.delete("fillCanvas"),M.set(D,at.canvas)),{canvas:at.canvas,offsetX:Math.round(et),offsetY:Math.round(st)}}setLineWidth(h){h!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=h,this.ctx.lineWidth=h}setLineCap(h){this.ctx.lineCap=z[h]}setLineJoin(h){this.ctx.lineJoin=J[h]}setMiterLimit(h){this.ctx.miterLimit=h}setDash(h,f){const E=this.ctx;E.setLineDash!==void 0&&(E.setLineDash(h),E.lineDashOffset=f)}setRenderingIntent(h){}setFlatness(h){}setGState(h){for(const[f,E]of h)switch(f){case"LW":this.setLineWidth(E);break;case"LC":this.setLineCap(E);break;case"LJ":this.setLineJoin(E);break;case"ML":this.setMiterLimit(E);break;case"D":this.setDash(E[0],E[1]);break;case"RI":this.setRenderingIntent(E);break;case"FL":this.setFlatness(E);break;case"Font":this.setFont(E[0],E[1]);break;case"CA":this.current.strokeAlpha=E;break;case"ca":this.current.fillAlpha=E,this.ctx.globalAlpha=E;break;case"BM":this.ctx.globalCompositeOperation=E;break;case"SMask":this.current.activeSMask=E?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(E);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const h=this.inSMaskMode;this.current.activeSMask&&!h?this.beginSMaskMode():!this.current.activeSMask&&h&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const h=this.ctx.canvas.width,f=this.ctx.canvas.height,E="smaskGroupAt"+this.groupLevel,G=this.cachedCanvases.getCanvas(E,h,f);this.suspendedCtx=this.ctx,this.ctx=G.context;const U=this.ctx;U.setTransform(...(0,A.getCurrentTransform)(this.suspendedCtx)),o(this.suspendedCtx,U),u(U,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),o(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(h){if(!this.current.activeSMask)return;h?(h[0]=Math.floor(h[0]),h[1]=Math.floor(h[1]),h[2]=Math.ceil(h[2]),h[3]=Math.ceil(h[3])):h=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const f=this.current.activeSMask,E=this.suspendedCtx;I(E,f,this.ctx,h),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(o(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const h=this.current;this.stateStack.push(h),this.current=h.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),o(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(h,f,E,G,U,X){this.ctx.transform(h,f,E,G,U,X),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(h,f,E){const G=this.ctx,U=this.current;let X=U.x,F=U.y,M,D;const e=(0,A.getCurrentTransform)(G),i=e[0]===0&&e[3]===0||e[1]===0&&e[2]===0,g=i?E.slice(0):null;for(let v=0,T=0,H=h.length;v<H;v++)switch(h[v]|0){case c.OPS.rectangle:X=f[T++],F=f[T++];const nt=f[T++],K=f[T++],at=X+nt,ot=F+K;G.moveTo(X,F),nt===0||K===0?G.lineTo(at,ot):(G.lineTo(at,F),G.lineTo(at,ot),G.lineTo(X,ot)),i||U.updateRectMinMax(e,[X,F,at,ot]),G.closePath();break;case c.OPS.moveTo:X=f[T++],F=f[T++],G.moveTo(X,F),i||U.updatePathMinMax(e,X,F);break;case c.OPS.lineTo:X=f[T++],F=f[T++],G.lineTo(X,F),i||U.updatePathMinMax(e,X,F);break;case c.OPS.curveTo:M=X,D=F,X=f[T+4],F=f[T+5],G.bezierCurveTo(f[T],f[T+1],f[T+2],f[T+3],X,F),U.updateCurvePathMinMax(e,M,D,f[T],f[T+1],f[T+2],f[T+3],X,F,g),T+=6;break;case c.OPS.curveTo2:M=X,D=F,G.bezierCurveTo(X,F,f[T],f[T+1],f[T+2],f[T+3]),U.updateCurvePathMinMax(e,M,D,X,F,f[T],f[T+1],f[T+2],f[T+3],g),X=f[T+2],F=f[T+3],T+=4;break;case c.OPS.curveTo3:M=X,D=F,X=f[T+2],F=f[T+3],G.bezierCurveTo(f[T],f[T+1],X,F,X,F),U.updateCurvePathMinMax(e,M,D,f[T],f[T+1],X,F,X,F,g),T+=4;break;case c.OPS.closePath:G.closePath();break}i&&U.updateScalingPathMinMax(e,g),U.setCurrentPoint(X,F)}closePath(){this.ctx.closePath()}stroke(h=!0){const f=this.ctx,E=this.current.strokeColor;f.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof E=="object"&&(E!=null&&E.getPattern)?(f.save(),f.strokeStyle=E.getPattern(f,this,(0,A.getCurrentTransformInverse)(f),W.PathType.STROKE),this.rescaleAndStroke(!1),f.restore()):this.rescaleAndStroke(!0)),h&&this.consumePath(this.current.getClippedPathBoundingBox()),f.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(h=!0){const f=this.ctx,E=this.current.fillColor,G=this.current.patternFill;let U=!1;G&&(f.save(),f.fillStyle=E.getPattern(f,this,(0,A.getCurrentTransformInverse)(f),W.PathType.FILL),U=!0);const X=this.current.getClippedPathBoundingBox();this.contentVisible&&X!==null&&(this.pendingEOFill?(f.fill("evenodd"),this.pendingEOFill=!1):f.fill()),U&&f.restore(),h&&this.consumePath(X)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=tt}eoClip(){this.pendingClip=ht}beginText(){this.current.textMatrix=c.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const h=this.pendingTextPaths,f=this.ctx;if(h===void 0){f.beginPath();return}f.save(),f.beginPath();for(const E of h)f.setTransform(...E.transform),f.translate(E.x,E.y),E.addToPath(f,E.fontSize);f.restore(),f.clip(),f.beginPath(),delete this.pendingTextPaths}setCharSpacing(h){this.current.charSpacing=h}setWordSpacing(h){this.current.wordSpacing=h}setHScale(h){this.current.textHScale=h/100}setLeading(h){this.current.leading=-h}setFont(h,f){const E=this.commonObjs.get(h),G=this.current;if(!E)throw new Error(`Can't find font for ${h}`);if(G.fontMatrix=E.fontMatrix||c.FONT_IDENTITY_MATRIX,(G.fontMatrix[0]===0||G.fontMatrix[3]===0)&&(0,c.warn)("Invalid font matrix for font "+h),f<0?(f=-f,G.fontDirection=-1):G.fontDirection=1,this.current.font=E,this.current.fontSize=f,E.isType3Font)return;const U=E.loadedName||"sans-serif";let X="normal";E.black?X="900":E.bold&&(X="bold");const F=E.italic?"italic":"normal",M=`"${U}", ${E.fallbackName}`;let D=f;f<L?D=L:f>k&&(D=k),this.current.fontSizeScale=f/D,this.ctx.font=`${F} ${X} ${D}px ${M}`}setTextRenderingMode(h){this.current.textRenderingMode=h}setTextRise(h){this.current.textRise=h}moveText(h,f){this.current.x=this.current.lineX+=h,this.current.y=this.current.lineY+=f}setLeadingMoveText(h,f){this.setLeading(-f),this.moveText(h,f)}setTextMatrix(h,f,E,G,U,X){this.current.textMatrix=[h,f,E,G,U,X],this.current.textMatrixScale=Math.hypot(h,f),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(h,f,E,G){const U=this.ctx,X=this.current,F=X.font,M=X.textRenderingMode,D=X.fontSize/X.fontSizeScale,e=M&c.TextRenderingMode.FILL_STROKE_MASK,i=!!(M&c.TextRenderingMode.ADD_TO_PATH_FLAG),g=X.patternFill&&!F.missingFile;let v;(F.disableFontFace||i||g)&&(v=F.getPathGenerator(this.commonObjs,h)),F.disableFontFace||g?(U.save(),U.translate(f,E),U.beginPath(),v(U,D),G&&U.setTransform(...G),(e===c.TextRenderingMode.FILL||e===c.TextRenderingMode.FILL_STROKE)&&U.fill(),(e===c.TextRenderingMode.STROKE||e===c.TextRenderingMode.FILL_STROKE)&&U.stroke(),U.restore()):((e===c.TextRenderingMode.FILL||e===c.TextRenderingMode.FILL_STROKE)&&U.fillText(h,f,E),(e===c.TextRenderingMode.STROKE||e===c.TextRenderingMode.FILL_STROKE)&&U.strokeText(h,f,E)),i&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,A.getCurrentTransform)(U),x:f,y:E,fontSize:D,addToPath:v})}get isFontSubpixelAAEnabled(){const{context:h}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);h.scale(1.5,1),h.fillText("I",0,10);const f=h.getImageData(0,0,10,10).data;let E=!1;for(let G=3;G<f.length;G+=4)if(f[G]>0&&f[G]<255){E=!0;break}return(0,c.shadow)(this,"isFontSubpixelAAEnabled",E)}showText(h){const f=this.current,E=f.font;if(E.isType3Font)return this.showType3Text(h);const G=f.fontSize;if(G===0)return;const U=this.ctx,X=f.fontSizeScale,F=f.charSpacing,M=f.wordSpacing,D=f.fontDirection,e=f.textHScale*D,i=h.length,g=E.vertical,v=g?1:-1,T=E.defaultVMetrics,H=G*f.fontMatrix[0],nt=f.textRenderingMode===c.TextRenderingMode.FILL&&!E.disableFontFace&&!f.patternFill;U.save(),U.transform(...f.textMatrix),U.translate(f.x,f.y+f.textRise),D>0?U.scale(e,-1):U.scale(e,1);let K;if(f.patternFill){U.save();const ut=f.fillColor.getPattern(U,this,(0,A.getCurrentTransformInverse)(U),W.PathType.FILL);K=(0,A.getCurrentTransform)(U),U.restore(),U.fillStyle=ut}let at=f.lineWidth;const ot=f.textMatrixScale;if(ot===0||at===0){const ut=f.textRenderingMode&c.TextRenderingMode.FILL_STROKE_MASK;(ut===c.TextRenderingMode.STROKE||ut===c.TextRenderingMode.FILL_STROKE)&&(at=this.getSinglePixelWidth())}else at/=ot;if(X!==1&&(U.scale(X,X),at/=X),U.lineWidth=at,E.isInvalidPDFjsFont){const ut=[];let ft=0;for(const Et of h)ut.push(Et.unicode),ft+=Et.width;U.fillText(ut.join(""),0,0),f.x+=ft*H*e,U.restore(),this.compose();return}let et=0,st;for(st=0;st<i;++st){const ut=h[st];if(typeof ut=="number"){et+=v*ut*G/1e3;continue}let ft=!1;const Et=(ut.isSpace?M:0)+F,vt=ut.fontChar,Tt=ut.accent;let Y,bt,_t=ut.width;if(g){const dt=ut.vmetric||T,w=-(ut.vmetric?dt[1]:_t*.5)*H,O=dt[2]*H;_t=dt?-dt[0]:_t,Y=w/X,bt=(et+O)/X}else Y=et/X,bt=0;if(E.remeasure&&_t>0){const dt=U.measureText(vt).width*1e3/G*X;if(_t<dt&&this.isFontSubpixelAAEnabled){const w=_t/dt;ft=!0,U.save(),U.scale(w,1),Y/=w}else _t!==dt&&(Y+=(_t-dt)/2e3*G/X)}if(this.contentVisible&&(ut.isInFont||E.missingFile)){if(nt&&!Tt)U.fillText(vt,Y,bt);else if(this.paintChar(vt,Y,bt,K),Tt){const dt=Y+G*Tt.offset.x/X,w=bt-G*Tt.offset.y/X;this.paintChar(Tt.fontChar,dt,w,K)}}let kt;g?kt=_t*H-Et*D:kt=_t*H+Et*D,et+=kt,ft&&U.restore()}g?f.y-=et:f.x+=et*e,U.restore(),this.compose()}showType3Text(h){const f=this.ctx,E=this.current,G=E.font,U=E.fontSize,X=E.fontDirection,F=G.vertical?1:-1,M=E.charSpacing,D=E.wordSpacing,e=E.textHScale*X,i=E.fontMatrix||c.FONT_IDENTITY_MATRIX,g=h.length,v=E.textRenderingMode===c.TextRenderingMode.INVISIBLE;let T,H,nt,K;if(!(v||U===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,f.save(),f.transform(...E.textMatrix),f.translate(E.x,E.y),f.scale(e,X),T=0;T<g;++T){if(H=h[T],typeof H=="number"){K=F*H*U/1e3,this.ctx.translate(K,0),E.x+=K*e;continue}const at=(H.isSpace?D:0)+M,ot=G.charProcOperatorList[H.operatorListId];if(!ot){(0,c.warn)(`Type3 character "${H.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=H,this.save(),f.scale(U,U),f.transform(...i),this.executeOperatorList(ot),this.restore()),nt=c.Util.applyTransform([H.width,0],i)[0]*U+at,f.translate(nt,0),E.x+=nt*e}f.restore(),this.processingType3=null}}setCharWidth(h,f){}setCharWidthAndBounds(h,f,E,G,U,X){this.ctx.rect(E,G,U-E,X-G),this.ctx.clip(),this.endPath()}getColorN_Pattern(h){let f;if(h[0]==="TilingPattern"){const E=h[1],G=this.baseTransform||(0,A.getCurrentTransform)(this.ctx),U={createCanvasGraphics:X=>new yt(X,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};f=new W.TilingPattern(h,E,this.ctx,U,G)}else f=this._getPattern(h[1],h[2]);return f}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(h,f,E){const G=c.Util.makeHexColor(h,f,E);this.ctx.strokeStyle=G,this.current.strokeColor=G}setFillRGBColor(h,f,E){const G=c.Util.makeHexColor(h,f,E);this.ctx.fillStyle=G,this.current.fillColor=G,this.current.patternFill=!1}_getPattern(h,f=null){let E;return this.cachedPatterns.has(h)?E=this.cachedPatterns.get(h):(E=(0,W.getShadingPattern)(this.getObject(h)),this.cachedPatterns.set(h,E)),f&&(E.matrix=f),E}shadingFill(h){if(!this.contentVisible)return;const f=this.ctx;this.save();const E=this._getPattern(h);f.fillStyle=E.getPattern(f,this,(0,A.getCurrentTransformInverse)(f),W.PathType.SHADING);const G=(0,A.getCurrentTransformInverse)(f);if(G){const U=f.canvas,X=U.width,F=U.height,M=c.Util.applyTransform([0,0],G),D=c.Util.applyTransform([0,F],G),e=c.Util.applyTransform([X,0],G),i=c.Util.applyTransform([X,F],G),g=Math.min(M[0],D[0],e[0],i[0]),v=Math.min(M[1],D[1],e[1],i[1]),T=Math.max(M[0],D[0],e[0],i[0]),H=Math.max(M[1],D[1],e[1],i[1]);this.ctx.fillRect(g,v,T-g,H-v)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,c.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,c.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(h,f){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(h)&&h.length===6&&this.transform(...h),this.baseTransform=(0,A.getCurrentTransform)(this.ctx),f)){const E=f[2]-f[0],G=f[3]-f[1];this.ctx.rect(f[0],f[1],E,G),this.current.updateRectMinMax((0,A.getCurrentTransform)(this.ctx),f),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(h){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const f=this.ctx;h.isolated||(0,c.info)("TODO: Support non-isolated groups."),h.knockout&&(0,c.warn)("Knockout groups not supported.");const E=(0,A.getCurrentTransform)(f);if(h.matrix&&f.transform(...h.matrix),!h.bbox)throw new Error("Bounding box is required.");let G=c.Util.getAxialAlignedBoundingBox(h.bbox,(0,A.getCurrentTransform)(f));const U=[0,0,f.canvas.width,f.canvas.height];G=c.Util.intersect(G,U)||[0,0,0,0];const X=Math.floor(G[0]),F=Math.floor(G[1]);let M=Math.max(Math.ceil(G[2])-X,1),D=Math.max(Math.ceil(G[3])-F,1),e=1,i=1;M>_&&(e=M/_,M=_),D>_&&(i=D/_,D=_),this.current.startNewPathAndClipBox([0,0,M,D]);let g="groupAt"+this.groupLevel;h.smask&&(g+="_smask_"+this.smaskCounter++%2);const v=this.cachedCanvases.getCanvas(g,M,D),T=v.context;T.scale(1/e,1/i),T.translate(-X,-F),T.transform(...E),h.smask?this.smaskStack.push({canvas:v.canvas,context:T,offsetX:X,offsetY:F,scaleX:e,scaleY:i,subtype:h.smask.subtype,backdrop:h.smask.backdrop,transferMap:h.smask.transferMap||null,startTransformInverse:null}):(f.setTransform(1,0,0,1,0,0),f.translate(X,F),f.scale(e,i),f.save()),o(f,T),this.ctx=T,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(f),this.groupLevel++}endGroup(h){if(!this.contentVisible)return;this.groupLevel--;const f=this.ctx,E=this.groupStack.pop();if(this.ctx=E,this.ctx.imageSmoothingEnabled=!1,h.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const G=(0,A.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...G);const U=c.Util.getAxialAlignedBoundingBox([0,0,f.canvas.width,f.canvas.height],G);this.ctx.drawImage(f.canvas,0,0),this.ctx.restore(),this.compose(U)}}beginAnnotation(h,f,E,G,U){if(it(this,ct,be).call(this),l(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(f)&&f.length===4){const X=f[2]-f[0],F=f[3]-f[1];if(U&&this.annotationCanvasMap){E=E.slice(),E[4]-=f[0],E[5]-=f[1],f=f.slice(),f[0]=f[1]=0,f[2]=X,f[3]=F;const[M,D]=c.Util.singularValueDecompose2dScale((0,A.getCurrentTransform)(this.ctx)),{viewportScale:e}=this,i=Math.ceil(X*this.outputScaleX*e),g=Math.ceil(F*this.outputScaleY*e);this.annotationCanvas=this.canvasFactory.create(i,g);const{canvas:v,context:T}=this.annotationCanvas;this.annotationCanvasMap.set(h,v),this.annotationCanvas.savedCtx=this.ctx,this.ctx=T,this.ctx.save(),this.ctx.setTransform(M,0,0,-D,0,F*D),l(this.ctx)}else l(this.ctx),this.ctx.rect(f[0],f[1],X,F),this.ctx.clip(),this.endPath()}this.current=new C(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...E),this.transform(...G)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),it(this,At,ye).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(h){if(!this.contentVisible)return;const f=h.count;h=this.getObject(h.data,h),h.count=f;const E=this.ctx,G=this.processingType3;if(G&&(G.compiled===void 0&&(G.compiled=S(h)),G.compiled)){G.compiled(E);return}const U=this._createMaskCanvas(h),X=U.canvas;E.save(),E.setTransform(1,0,0,1,0,0),E.drawImage(X,U.offsetX,U.offsetY),E.restore(),this.compose()}paintImageMaskXObjectRepeat(h,f,E=0,G=0,U,X){if(!this.contentVisible)return;h=this.getObject(h.data,h);const F=this.ctx;F.save();const M=(0,A.getCurrentTransform)(F);F.transform(f,E,G,U,0,0);const D=this._createMaskCanvas(h);F.setTransform(1,0,0,1,D.offsetX-M[4],D.offsetY-M[5]);for(let e=0,i=X.length;e<i;e+=2){const g=c.Util.transform(M,[f,E,G,U,X[e],X[e+1]]),[v,T]=c.Util.applyTransform([0,0],g);F.drawImage(D.canvas,v,T)}F.restore(),this.compose()}paintImageMaskXObjectGroup(h){if(!this.contentVisible)return;const f=this.ctx,E=this.current.fillColor,G=this.current.patternFill;for(const U of h){const{data:X,width:F,height:M,transform:D}=U,e=this.cachedCanvases.getCanvas("maskCanvas",F,M),i=e.context;i.save();const g=this.getObject(X,U);t(i,g),i.globalCompositeOperation="source-in",i.fillStyle=G?E.getPattern(i,this,(0,A.getCurrentTransformInverse)(f),W.PathType.FILL):E,i.fillRect(0,0,F,M),i.restore(),f.save(),f.transform(...D),f.scale(1,-1),y(f,e.canvas,0,0,F,M,0,-1,1,1),f.restore()}this.compose()}paintImageXObject(h){if(!this.contentVisible)return;const f=this.getObject(h);if(!f){(0,c.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(f)}paintImageXObjectRepeat(h,f,E,G){if(!this.contentVisible)return;const U=this.getObject(h);if(!U){(0,c.warn)("Dependent image isn't ready yet");return}const X=U.width,F=U.height,M=[];for(let D=0,e=G.length;D<e;D+=2)M.push({transform:[f,0,0,E,G[D],G[D+1]],x:0,y:0,w:X,h:F});this.paintInlineImageXObjectGroup(U,M)}applyTransferMapsToCanvas(h){return this.current.transferMaps!=="none"&&(h.filter=this.current.transferMaps,h.drawImage(h.canvas,0,0),h.filter="none"),h.canvas}applyTransferMapsToBitmap(h){if(this.current.transferMaps==="none")return h.bitmap;const{bitmap:f,width:E,height:G}=h,U=this.cachedCanvases.getCanvas("inlineImage",E,G),X=U.context;return X.filter=this.current.transferMaps,X.drawImage(f,0,0),X.filter="none",U.canvas}paintInlineImageXObject(h){if(!this.contentVisible)return;const f=h.width,E=h.height,G=this.ctx;this.save(),Z.isNodeJS||(G.filter="none"),G.scale(1/f,-1/E);let U;if(h.bitmap)U=this.applyTransferMapsToBitmap(h);else if(typeof HTMLElement=="function"&&h instanceof HTMLElement||!h.data)U=h;else{const M=this.cachedCanvases.getCanvas("inlineImage",f,E).context;m(M,h),U=this.applyTransferMapsToCanvas(M)}const X=this._scaleImage(U,(0,A.getCurrentTransformInverse)(G));G.imageSmoothingEnabled=$((0,A.getCurrentTransform)(G),h.interpolate),y(G,X.img,0,0,X.paintWidth,X.paintHeight,0,-E,f,E),this.compose(),this.restore()}paintInlineImageXObjectGroup(h,f){if(!this.contentVisible)return;const E=this.ctx;let G;if(h.bitmap)G=h.bitmap;else{const U=h.width,X=h.height,M=this.cachedCanvases.getCanvas("inlineImage",U,X).context;m(M,h),G=this.applyTransferMapsToCanvas(M)}for(const U of f)E.save(),E.transform(...U.transform),E.scale(1,-1),y(E,G,U.x,U.y,U.w,U.h,0,-1,1,1),E.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(h){}markPointProps(h,f){}beginMarkedContent(h){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(h,f){h==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(f)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(h){const f=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(h);const E=this.ctx;this.pendingClip&&(f||(this.pendingClip===ht?E.clip("evenodd"):E.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),E.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const h=(0,A.getCurrentTransform)(this.ctx);if(h[1]===0&&h[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(h[0]),Math.abs(h[3]));else{const f=Math.abs(h[0]*h[3]-h[2]*h[1]),E=Math.hypot(h[0],h[2]),G=Math.hypot(h[1],h[3]);this._cachedGetSinglePixelWidth=Math.max(E,G)/f}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:h}=this.current,f=(0,A.getCurrentTransform)(this.ctx);let E,G;if(f[1]===0&&f[2]===0){const U=Math.abs(f[0]),X=Math.abs(f[3]);if(h===0)E=1/U,G=1/X;else{const F=U*h,M=X*h;E=F<1?1/F:1,G=M<1?1/M:1}}else{const U=Math.abs(f[0]*f[3]-f[2]*f[1]),X=Math.hypot(f[0],f[1]),F=Math.hypot(f[2],f[3]);if(h===0)E=F/U,G=X/U;else{const M=h*U;E=F>M?F/M:1,G=X>M?X/M:1}}this._cachedScaleForStroking=[E,G]}return this._cachedScaleForStroking}rescaleAndStroke(h){const{ctx:f}=this,{lineWidth:E}=this.current,[G,U]=this.getScaleForStroking();if(f.lineWidth=E||1,G===1&&U===1){f.stroke();return}let X,F,M;h&&(X=(0,A.getCurrentTransform)(f),F=f.getLineDash().slice(),M=f.lineDashOffset),f.scale(G,U);const D=Math.max(G,U);f.setLineDash(f.getLineDash().map(e=>e/D)),f.lineDashOffset/=D,f.stroke(),h&&(f.setTransform(...X),f.setLineDash(F),f.lineDashOffset=M)}isContentVisible(){for(let h=this.markedContentStack.length-1;h>=0;h--)if(!this.markedContentStack[h].visible)return!1;return!0}};ct=new WeakSet,be=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},At=new WeakSet,ye=function(){if(this.pageColors){const h=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(h!=="none"){const f=this.ctx.filter;this.ctx.filter=h,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=f}}};let rt=yt;r.CanvasGraphics=rt;for(const V in c.OPS)rt.prototype[V]!==void 0&&(rt.prototype[c.OPS[V]]=rt.prototype[V])},(j,r,B)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TilingPattern=r.PathType=void 0,r.getShadingPattern=P;var c=B(1),A=B(6);const W={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};r.PathType=W;function q(y,S){if(!S)return;const C=S[2]-S[0],m=S[3]-S[1],t=new Path2D;t.rect(S[0],S[1],C,m),y.clip(t)}class Z{constructor(){this.constructor===Z&&(0,c.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,c.unreachable)("Abstract method `getPattern` called.")}}class L extends Z{constructor(S){super(),this._type=S[1],this._bbox=S[2],this._colorStops=S[3],this._p0=S[4],this._p1=S[5],this._r0=S[6],this._r1=S[7],this.matrix=null}_createGradient(S){let C;this._type==="axial"?C=S.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(C=S.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const m of this._colorStops)C.addColorStop(m[0],m[1]);return C}getPattern(S,C,m,t){let o;if(t===W.STROKE||t===W.FILL){const l=C.current.getClippedPathBoundingBox(t,(0,A.getCurrentTransform)(S))||[0,0,0,0],s=Math.ceil(l[2]-l[0])||1,d=Math.ceil(l[3]-l[1])||1,R=C.cachedCanvases.getCanvas("pattern",s,d,!0),n=R.context;n.clearRect(0,0,n.canvas.width,n.canvas.height),n.beginPath(),n.rect(0,0,n.canvas.width,n.canvas.height),n.translate(-l[0],-l[1]),m=c.Util.transform(m,[1,0,0,1,l[0],l[1]]),n.transform(...C.baseTransform),this.matrix&&n.transform(...this.matrix),q(n,this._bbox),n.fillStyle=this._createGradient(n),n.fill(),o=S.createPattern(R.canvas,"no-repeat");const I=new DOMMatrix(m);o.setTransform(I)}else q(S,this._bbox),o=this._createGradient(S);return o}}function k(y,S,C,m,t,o,l,s){const d=S.coords,R=S.colors,n=y.data,I=y.width*4;let $;d[C+1]>d[m+1]&&($=C,C=m,m=$,$=o,o=l,l=$),d[m+1]>d[t+1]&&($=m,m=t,t=$,$=l,l=s,s=$),d[C+1]>d[m+1]&&($=C,C=m,m=$,$=o,o=l,l=$);const z=(d[C]+S.offsetX)*S.scaleX,J=(d[C+1]+S.offsetY)*S.scaleY,tt=(d[m]+S.offsetX)*S.scaleX,ht=(d[m+1]+S.offsetY)*S.scaleY,rt=(d[t]+S.offsetX)*S.scaleX,ct=(d[t+1]+S.offsetY)*S.scaleY;if(J>=ct)return;const gt=R[o],At=R[o+1],St=R[o+2],yt=R[l],V=R[l+1],h=R[l+2],f=R[s],E=R[s+1],G=R[s+2],U=Math.round(J),X=Math.round(ct);let F,M,D,e,i,g,v,T;for(let H=U;H<=X;H++){if(H<ht){let et;H<J?et=0:et=(J-H)/(J-ht),F=z-(z-tt)*et,M=gt-(gt-yt)*et,D=At-(At-V)*et,e=St-(St-h)*et}else{let et;H>ct?et=1:ht===ct?et=0:et=(ht-H)/(ht-ct),F=tt-(tt-rt)*et,M=yt-(yt-f)*et,D=V-(V-E)*et,e=h-(h-G)*et}let nt;H<J?nt=0:H>ct?nt=1:nt=(J-H)/(J-ct),i=z-(z-rt)*nt,g=gt-(gt-f)*nt,v=At-(At-E)*nt,T=St-(St-G)*nt;const K=Math.round(Math.min(F,i)),at=Math.round(Math.max(F,i));let ot=I*H+K*4;for(let et=K;et<=at;et++)nt=(F-et)/(F-i),nt<0?nt=0:nt>1&&(nt=1),n[ot++]=M-(M-g)*nt|0,n[ot++]=D-(D-v)*nt|0,n[ot++]=e-(e-T)*nt|0,n[ot++]=255}}function _(y,S,C){const m=S.coords,t=S.colors;let o,l;switch(S.type){case"lattice":const s=S.verticesPerRow,d=Math.floor(m.length/s)-1,R=s-1;for(o=0;o<d;o++){let n=o*s;for(let I=0;I<R;I++,n++)k(y,C,m[n],m[n+1],m[n+s],t[n],t[n+1],t[n+s]),k(y,C,m[n+s+1],m[n+1],m[n+s],t[n+s+1],t[n+1],t[n+s])}break;case"triangles":for(o=0,l=m.length;o<l;o+=3)k(y,C,m[o],m[o+1],m[o+2],t[o],t[o+1],t[o+2]);break;default:throw new Error("illegal figure")}}class N extends Z{constructor(S){super(),this._coords=S[2],this._colors=S[3],this._figures=S[4],this._bounds=S[5],this._bbox=S[7],this._background=S[8],this.matrix=null}_createMeshCanvas(S,C,m){const s=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),R=Math.ceil(this._bounds[2])-s,n=Math.ceil(this._bounds[3])-d,I=Math.min(Math.ceil(Math.abs(R*S[0]*1.1)),3e3),$=Math.min(Math.ceil(Math.abs(n*S[1]*1.1)),3e3),z=R/I,J=n/$,tt={coords:this._coords,colors:this._colors,offsetX:-s,offsetY:-d,scaleX:1/z,scaleY:1/J},ht=I+2*2,rt=$+2*2,ct=m.getCanvas("mesh",ht,rt,!1),gt=ct.context,At=gt.createImageData(I,$);if(C){const yt=At.data;for(let V=0,h=yt.length;V<h;V+=4)yt[V]=C[0],yt[V+1]=C[1],yt[V+2]=C[2],yt[V+3]=255}for(const yt of this._figures)_(At,yt,tt);return gt.putImageData(At,2,2),{canvas:ct.canvas,offsetX:s-2*z,offsetY:d-2*J,scaleX:z,scaleY:J}}getPattern(S,C,m,t){q(S,this._bbox);let o;if(t===W.SHADING)o=c.Util.singularValueDecompose2dScale((0,A.getCurrentTransform)(S));else if(o=c.Util.singularValueDecompose2dScale(C.baseTransform),this.matrix){const s=c.Util.singularValueDecompose2dScale(this.matrix);o=[o[0]*s[0],o[1]*s[1]]}const l=this._createMeshCanvas(o,t===W.SHADING?null:this._background,C.cachedCanvases);return t!==W.SHADING&&(S.setTransform(...C.baseTransform),this.matrix&&S.transform(...this.matrix)),S.translate(l.offsetX,l.offsetY),S.scale(l.scaleX,l.scaleY),S.createPattern(l.canvas,"no-repeat")}}class x extends Z{getPattern(){return"hotpink"}}function P(y){switch(y[0]){case"RadialAxial":return new L(y);case"Mesh":return new N(y);case"Dummy":return new x}throw new Error(`Unknown IR type: ${y[0]}`)}const p={COLORED:1,UNCOLORED:2},a=class a{constructor(S,C,m,t,o){this.operatorList=S[2],this.matrix=S[3]||[1,0,0,1,0,0],this.bbox=S[4],this.xstep=S[5],this.ystep=S[6],this.paintType=S[7],this.tilingType=S[8],this.color=C,this.ctx=m,this.canvasGraphicsFactory=t,this.baseTransform=o}createPatternCanvas(S){const C=this.operatorList,m=this.bbox,t=this.xstep,o=this.ystep,l=this.paintType,s=this.tilingType,d=this.color,R=this.canvasGraphicsFactory;(0,c.info)("TilingType: "+s);const n=m[0],I=m[1],$=m[2],z=m[3],J=c.Util.singularValueDecompose2dScale(this.matrix),tt=c.Util.singularValueDecompose2dScale(this.baseTransform),ht=[J[0]*tt[0],J[1]*tt[1]],rt=this.getSizeAndScale(t,this.ctx.canvas.width,ht[0]),ct=this.getSizeAndScale(o,this.ctx.canvas.height,ht[1]),gt=S.cachedCanvases.getCanvas("pattern",rt.size,ct.size,!0),At=gt.context,St=R.createCanvasGraphics(At);St.groupLevel=S.groupLevel,this.setFillAndStrokeStyleToContext(St,l,d);let yt=n,V=I,h=$,f=z;return n<0&&(yt=0,h+=Math.abs(n)),I<0&&(V=0,f+=Math.abs(I)),At.translate(-(rt.scale*yt),-(ct.scale*V)),St.transform(rt.scale,0,0,ct.scale,0,0),At.save(),this.clipBbox(St,yt,V,h,f),St.baseTransform=(0,A.getCurrentTransform)(St.ctx),St.executeOperatorList(C),St.endDrawing(),{canvas:gt.canvas,scaleX:rt.scale,scaleY:ct.scale,offsetX:yt,offsetY:V}}getSizeAndScale(S,C,m){S=Math.abs(S);const t=Math.max(a.MAX_PATTERN_SIZE,C);let o=Math.ceil(S*m);return o>=t?o=t:m=o/S,{scale:m,size:o}}clipBbox(S,C,m,t,o){const l=t-C,s=o-m;S.ctx.rect(C,m,l,s),S.current.updateRectMinMax((0,A.getCurrentTransform)(S.ctx),[C,m,t,o]),S.clip(),S.endPath()}setFillAndStrokeStyleToContext(S,C,m){const t=S.ctx,o=S.current;switch(C){case p.COLORED:const l=this.ctx;t.fillStyle=l.fillStyle,t.strokeStyle=l.strokeStyle,o.fillColor=l.fillStyle,o.strokeColor=l.strokeStyle;break;case p.UNCOLORED:const s=c.Util.makeHexColor(m[0],m[1],m[2]);t.fillStyle=s,t.strokeStyle=s,o.fillColor=s,o.strokeColor=s;break;default:throw new c.FormatError(`Unsupported paint type: ${C}`)}}getPattern(S,C,m,t){let o=m;t!==W.SHADING&&(o=c.Util.transform(o,C.baseTransform),this.matrix&&(o=c.Util.transform(o,this.matrix)));const l=this.createPatternCanvas(C);let s=new DOMMatrix(o);s=s.translate(l.offsetX,l.offsetY),s=s.scale(1/l.scaleX,1/l.scaleY);const d=S.createPattern(l.canvas,"repeat");return d.setTransform(s),d}};Dt(a,"MAX_PATTERN_SIZE",3e3);let u=a;r.TilingPattern=u},(j,r,B)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.convertBlackAndWhiteToRGBA=W,r.convertToRGBA=A,r.grayToRGBA=Z;var c=B(1);function A(L){switch(L.kind){case c.ImageKind.GRAYSCALE_1BPP:return W(L);case c.ImageKind.RGB_24BPP:return q(L)}return null}function W({src:L,srcPos:k=0,dest:_,width:N,height:x,nonBlackColor:P=4294967295,inverseDecode:p=!1}){const u=c.FeatureTest.isLittleEndian?4278190080:255,[a,y]=p?[P,u]:[u,P],S=N>>3,C=N&7,m=L.length;_=new Uint32Array(_.buffer);let t=0;for(let o=0;o<x;o++){for(const s=k+S;k<s;k++){const d=k<m?L[k]:255;_[t++]=d&128?y:a,_[t++]=d&64?y:a,_[t++]=d&32?y:a,_[t++]=d&16?y:a,_[t++]=d&8?y:a,_[t++]=d&4?y:a,_[t++]=d&2?y:a,_[t++]=d&1?y:a}if(C===0)continue;const l=k<m?L[k++]:255;for(let s=0;s<C;s++)_[t++]=l&1<<7-s?y:a}return{srcPos:k,destPos:t}}function q({src:L,srcPos:k=0,dest:_,destPos:N=0,width:x,height:P}){let p=0;const u=L.length>>2,a=new Uint32Array(L.buffer,k,u);if(c.FeatureTest.isLittleEndian){for(;p<u-2;p+=3,N+=4){const y=a[p],S=a[p+1],C=a[p+2];_[N]=y|4278190080,_[N+1]=y>>>24|S<<8|4278190080,_[N+2]=S>>>16|C<<16|4278190080,_[N+3]=C>>>8|4278190080}for(let y=p*4,S=L.length;y<S;y+=3)_[N++]=L[y]|L[y+1]<<8|L[y+2]<<16|4278190080}else{for(;p<u-2;p+=3,N+=4){const y=a[p],S=a[p+1],C=a[p+2];_[N]=y|255,_[N+1]=y<<24|S>>>8|255,_[N+2]=S<<16|C>>>16|255,_[N+3]=C<<8|255}for(let y=p*4,S=L.length;y<S;y+=3)_[N++]=L[y]<<24|L[y+1]<<16|L[y+2]<<8|255}return{srcPos:k,destPos:N}}function Z(L,k){if(c.FeatureTest.isLittleEndian)for(let _=0,N=L.length;_<N;_++)k[_]=L[_]*65793|4278190080;else for(let _=0,N=L.length;_<N;_++)k[_]=L[_]*16843008|255}},(j,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.GlobalWorkerOptions=void 0;const B=Object.create(null);r.GlobalWorkerOptions=B,B.workerPort=null,B.workerSrc=""},(j,r,B)=>{var L,We,_,Ge,x,ae;Object.defineProperty(r,"__esModule",{value:!0}),r.MessageHandler=void 0;var c=B(1);const A={UNKNOWN:0,DATA:1,ERROR:2},W={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function q(p){switch(p instanceof Error||typeof p=="object"&&p!==null||(0,c.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),p.name){case"AbortException":return new c.AbortException(p.message);case"MissingPDFException":return new c.MissingPDFException(p.message);case"PasswordException":return new c.PasswordException(p.message,p.code);case"UnexpectedResponseException":return new c.UnexpectedResponseException(p.message,p.status);case"UnknownErrorException":return new c.UnknownErrorException(p.message,p.details);default:return new c.UnknownErrorException(p.message,p.toString())}}class Z{constructor(u,a,y){Q(this,L);Q(this,_);Q(this,x);this.sourceName=u,this.targetName=a,this.comObj=y,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=S=>{const C=S.data;if(C.targetName!==this.sourceName)return;if(C.stream){it(this,_,Ge).call(this,C);return}if(C.callback){const t=C.callbackId,o=this.callbackCapabilities[t];if(!o)throw new Error(`Cannot resolve callback ${t}`);if(delete this.callbackCapabilities[t],C.callback===A.DATA)o.resolve(C.data);else if(C.callback===A.ERROR)o.reject(q(C.reason));else throw new Error("Unexpected callback case");return}const m=this.actionHandler[C.action];if(!m)throw new Error(`Unknown action from worker: ${C.action}`);if(C.callbackId){const t=this.sourceName,o=C.sourceName;new Promise(function(l){l(m(C.data))}).then(function(l){y.postMessage({sourceName:t,targetName:o,callback:A.DATA,callbackId:C.callbackId,data:l})},function(l){y.postMessage({sourceName:t,targetName:o,callback:A.ERROR,callbackId:C.callbackId,reason:q(l)})});return}if(C.streamId){it(this,L,We).call(this,C);return}m(C.data)},y.addEventListener("message",this._onComObjOnMessage)}on(u,a){const y=this.actionHandler;if(y[u])throw new Error(`There is already an actionName called "${u}"`);y[u]=a}send(u,a,y){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:u,data:a},y)}sendWithPromise(u,a,y){const S=this.callbackId++,C=new c.PromiseCapability;this.callbackCapabilities[S]=C;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:u,callbackId:S,data:a},y)}catch(m){C.reject(m)}return C.promise}sendWithStream(u,a,y,S){const C=this.streamId++,m=this.sourceName,t=this.targetName,o=this.comObj;return new ReadableStream({start:l=>{const s=new c.PromiseCapability;return this.streamControllers[C]={controller:l,startCall:s,pullCall:null,cancelCall:null,isClosed:!1},o.postMessage({sourceName:m,targetName:t,action:u,streamId:C,data:a,desiredSize:l.desiredSize},S),s.promise},pull:l=>{const s=new c.PromiseCapability;return this.streamControllers[C].pullCall=s,o.postMessage({sourceName:m,targetName:t,stream:W.PULL,streamId:C,desiredSize:l.desiredSize}),s.promise},cancel:l=>{(0,c.assert)(l instanceof Error,"cancel must have a valid reason");const s=new c.PromiseCapability;return this.streamControllers[C].cancelCall=s,this.streamControllers[C].isClosed=!0,o.postMessage({sourceName:m,targetName:t,stream:W.CANCEL,streamId:C,reason:q(l)}),s.promise}},y)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}L=new WeakSet,We=function(u){const a=u.streamId,y=this.sourceName,S=u.sourceName,C=this.comObj,m=this,t=this.actionHandler[u.action],o={enqueue(l,s=1,d){if(this.isCancelled)return;const R=this.desiredSize;this.desiredSize-=s,R>0&&this.desiredSize<=0&&(this.sinkCapability=new c.PromiseCapability,this.ready=this.sinkCapability.promise),C.postMessage({sourceName:y,targetName:S,stream:W.ENQUEUE,streamId:a,chunk:l},d)},close(){this.isCancelled||(this.isCancelled=!0,C.postMessage({sourceName:y,targetName:S,stream:W.CLOSE,streamId:a}),delete m.streamSinks[a])},error(l){(0,c.assert)(l instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,C.postMessage({sourceName:y,targetName:S,stream:W.ERROR,streamId:a,reason:q(l)}))},sinkCapability:new c.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:u.desiredSize,ready:null};o.sinkCapability.resolve(),o.ready=o.sinkCapability.promise,this.streamSinks[a]=o,new Promise(function(l){l(t(u.data,o))}).then(function(){C.postMessage({sourceName:y,targetName:S,stream:W.START_COMPLETE,streamId:a,success:!0})},function(l){C.postMessage({sourceName:y,targetName:S,stream:W.START_COMPLETE,streamId:a,reason:q(l)})})},_=new WeakSet,Ge=function(u){const a=u.streamId,y=this.sourceName,S=u.sourceName,C=this.comObj,m=this.streamControllers[a],t=this.streamSinks[a];switch(u.stream){case W.START_COMPLETE:u.success?m.startCall.resolve():m.startCall.reject(q(u.reason));break;case W.PULL_COMPLETE:u.success?m.pullCall.resolve():m.pullCall.reject(q(u.reason));break;case W.PULL:if(!t){C.postMessage({sourceName:y,targetName:S,stream:W.PULL_COMPLETE,streamId:a,success:!0});break}t.desiredSize<=0&&u.desiredSize>0&&t.sinkCapability.resolve(),t.desiredSize=u.desiredSize,new Promise(function(o){var l;o((l=t.onPull)==null?void 0:l.call(t))}).then(function(){C.postMessage({sourceName:y,targetName:S,stream:W.PULL_COMPLETE,streamId:a,success:!0})},function(o){C.postMessage({sourceName:y,targetName:S,stream:W.PULL_COMPLETE,streamId:a,reason:q(o)})});break;case W.ENQUEUE:if((0,c.assert)(m,"enqueue should have stream controller"),m.isClosed)break;m.controller.enqueue(u.chunk);break;case W.CLOSE:if((0,c.assert)(m,"close should have stream controller"),m.isClosed)break;m.isClosed=!0,m.controller.close(),it(this,x,ae).call(this,m,a);break;case W.ERROR:(0,c.assert)(m,"error should have stream controller"),m.controller.error(q(u.reason)),it(this,x,ae).call(this,m,a);break;case W.CANCEL_COMPLETE:u.success?m.cancelCall.resolve():m.cancelCall.reject(q(u.reason)),it(this,x,ae).call(this,m,a);break;case W.CANCEL:if(!t)break;new Promise(function(o){var l;o((l=t.onCancel)==null?void 0:l.call(t,q(u.reason)))}).then(function(){C.postMessage({sourceName:y,targetName:S,stream:W.CANCEL_COMPLETE,streamId:a,success:!0})},function(o){C.postMessage({sourceName:y,targetName:S,stream:W.CANCEL_COMPLETE,streamId:a,reason:q(o)})}),t.sinkCapability.reject(q(u.reason)),t.isCancelled=!0,delete this.streamSinks[a];break;default:throw new Error("Unexpected stream case")}},x=new WeakSet,ae=async function(u,a){var y,S,C;await Promise.allSettled([(y=u.startCall)==null?void 0:y.promise,(S=u.pullCall)==null?void 0:S.promise,(C=u.cancelCall)==null?void 0:C.promise]),delete this.streamControllers[a]},r.MessageHandler=Z},(j,r,B)=>{var W,q;Object.defineProperty(r,"__esModule",{value:!0}),r.Metadata=void 0;var c=B(1);class A{constructor({parsedData:L,rawData:k}){Q(this,W,void 0);Q(this,q,void 0);pt(this,W,L),pt(this,q,k)}getRaw(){return b(this,q)}get(L){return b(this,W).get(L)??null}getAll(){return(0,c.objectFromMap)(b(this,W))}has(L){return b(this,W).has(L)}}W=new WeakMap,q=new WeakMap,r.Metadata=A},(j,r,B)=>{var L,k,_,N,x,P,Ae;Object.defineProperty(r,"__esModule",{value:!0}),r.OptionalContentConfig=void 0;var c=B(1),A=B(8);const W=Symbol("INTERNAL");class q{constructor(a,y){Q(this,L,!0);this.name=a,this.intent=y}get visible(){return b(this,L)}_setVisible(a,y){a!==W&&(0,c.unreachable)("Internal method `_setVisible` called."),pt(this,L,y)}}L=new WeakMap;class Z{constructor(a){Q(this,P);Q(this,k,null);Q(this,_,new Map);Q(this,N,null);Q(this,x,null);if(this.name=null,this.creator=null,a!==null){this.name=a.name,this.creator=a.creator,pt(this,x,a.order);for(const y of a.groups)b(this,_).set(y.id,new q(y.name,y.intent));if(a.baseState==="OFF")for(const y of b(this,_).values())y._setVisible(W,!1);for(const y of a.on)b(this,_).get(y)._setVisible(W,!0);for(const y of a.off)b(this,_).get(y)._setVisible(W,!1);pt(this,N,this.getHash())}}isVisible(a){if(b(this,_).size===0)return!0;if(!a)return(0,c.warn)("Optional content group not defined."),!0;if(a.type==="OCG")return b(this,_).has(a.id)?b(this,_).get(a.id).visible:((0,c.warn)(`Optional content group not found: ${a.id}`),!0);if(a.type==="OCMD"){if(a.expression)return it(this,P,Ae).call(this,a.expression);if(!a.policy||a.policy==="AnyOn"){for(const y of a.ids){if(!b(this,_).has(y))return(0,c.warn)(`Optional content group not found: ${y}`),!0;if(b(this,_).get(y).visible)return!0}return!1}else if(a.policy==="AllOn"){for(const y of a.ids){if(!b(this,_).has(y))return(0,c.warn)(`Optional content group not found: ${y}`),!0;if(!b(this,_).get(y).visible)return!1}return!0}else if(a.policy==="AnyOff"){for(const y of a.ids){if(!b(this,_).has(y))return(0,c.warn)(`Optional content group not found: ${y}`),!0;if(!b(this,_).get(y).visible)return!0}return!1}else if(a.policy==="AllOff"){for(const y of a.ids){if(!b(this,_).has(y))return(0,c.warn)(`Optional content group not found: ${y}`),!0;if(b(this,_).get(y).visible)return!1}return!0}return(0,c.warn)(`Unknown optional content policy ${a.policy}.`),!0}return(0,c.warn)(`Unknown group type ${a.type}.`),!0}setVisibility(a,y=!0){if(!b(this,_).has(a)){(0,c.warn)(`Optional content group not found: ${a}`);return}b(this,_).get(a)._setVisible(W,!!y),pt(this,k,null)}get hasInitialVisibility(){return this.getHash()===b(this,N)}getOrder(){return b(this,_).size?b(this,x)?b(this,x).slice():[...b(this,_).keys()]:null}getGroups(){return b(this,_).size>0?(0,c.objectFromMap)(b(this,_)):null}getGroup(a){return b(this,_).get(a)||null}getHash(){if(b(this,k)!==null)return b(this,k);const a=new A.MurmurHash3_64;for(const[y,S]of b(this,_))a.update(`${y}:${S.visible}`);return pt(this,k,a.hexdigest())}}k=new WeakMap,_=new WeakMap,N=new WeakMap,x=new WeakMap,P=new WeakSet,Ae=function(a){const y=a.length;if(y<2)return!0;const S=a[0];for(let C=1;C<y;C++){const m=a[C];let t;if(Array.isArray(m))t=it(this,P,Ae).call(this,m);else if(b(this,_).has(m))t=b(this,_).get(m).visible;else return(0,c.warn)(`Optional content group not found: ${m}`),!0;switch(S){case"And":if(!t)return!1;break;case"Or":if(t)return!0;break;case"Not":return!t;default:return!0}}return S==="And"},r.OptionalContentConfig=Z},(j,r,B)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PDFDataTransportStream=void 0;var c=B(1),A=B(6);class W{constructor({length:k,initialData:_,progressiveDone:N=!1,contentDispositionFilename:x=null,disableRange:P=!1,disableStream:p=!1},u){if((0,c.assert)(u,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=N,this._contentDispositionFilename=x,(_==null?void 0:_.length)>0){const a=_ instanceof Uint8Array&&_.byteLength===_.buffer.byteLength?_.buffer:new Uint8Array(_).buffer;this._queuedChunks.push(a)}this._pdfDataRangeTransport=u,this._isStreamingSupported=!p,this._isRangeSupported=!P,this._contentLength=k,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((a,y)=>{this._onReceiveData({begin:a,chunk:y})}),this._pdfDataRangeTransport.addProgressListener((a,y)=>{this._onProgress({loaded:a,total:y})}),this._pdfDataRangeTransport.addProgressiveReadListener(a=>{this._onReceiveData({chunk:a})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:k,chunk:_}){const N=_ instanceof Uint8Array&&_.byteLength===_.buffer.byteLength?_.buffer:new Uint8Array(_).buffer;if(k===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(N):this._queuedChunks.push(N);else{const x=this._rangeReaders.some(function(P){return P._begin!==k?!1:(P._enqueue(N),!0)});(0,c.assert)(x,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var k;return((k=this._fullRequestReader)==null?void 0:k._loaded)??0}_onProgress(k){var _,N,x,P;k.total===void 0?(N=(_=this._rangeReaders[0])==null?void 0:_.onProgress)==null||N.call(_,{loaded:k.loaded}):(P=(x=this._fullRequestReader)==null?void 0:x.onProgress)==null||P.call(x,{loaded:k.loaded,total:k.total})}_onProgressiveDone(){var k;(k=this._fullRequestReader)==null||k.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(k){const _=this._rangeReaders.indexOf(k);_>=0&&this._rangeReaders.splice(_,1)}getFullReader(){(0,c.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const k=this._queuedChunks;return this._queuedChunks=null,new q(this,k,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(k,_){if(_<=this._progressiveDataLength)return null;const N=new Z(this,k,_);return this._pdfDataRangeTransport.requestDataRange(k,_),this._rangeReaders.push(N),N}cancelAllRequests(k){var _;(_=this._fullRequestReader)==null||_.cancel(k);for(const N of this._rangeReaders.slice(0))N.cancel(k);this._pdfDataRangeTransport.abort()}}r.PDFDataTransportStream=W;class q{constructor(k,_,N=!1,x=null){this._stream=k,this._done=N||!1,this._filename=(0,A.isPdfFile)(x)?x:null,this._queuedChunks=_||[],this._loaded=0;for(const P of this._queuedChunks)this._loaded+=P.byteLength;this._requests=[],this._headersReady=Promise.resolve(),k._fullRequestReader=this,this.onProgress=null}_enqueue(k){this._done||(this._requests.length>0?this._requests.shift().resolve({value:k,done:!1}):this._queuedChunks.push(k),this._loaded+=k.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const k=new c.PromiseCapability;return this._requests.push(k),k.promise}cancel(k){this._done=!0;for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Z{constructor(k,_,N){this._stream=k,this._begin=_,this._end=N,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(k){if(!this._done){if(this._requests.length===0)this._queuedChunk=k;else{this._requests.shift().resolve({value:k,done:!1});for(const N of this._requests)N.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const _=this._queuedChunk;return this._queuedChunk=null,{value:_,done:!1}}if(this._done)return{value:void 0,done:!0};const k=new c.PromiseCapability;return this._requests.push(k),k.promise}cancel(k){this._done=!0;for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(j,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.XfaText=void 0;class B{static textContent(A){const W=[],q={items:W,styles:Object.create(null)};function Z(L){var N;if(!L)return;let k=null;const _=L.name;if(_==="#text")k=L.value;else if(B.shouldBuildText(_))(N=L==null?void 0:L.attributes)!=null&&N.textContent?k=L.attributes.textContent:L.value&&(k=L.value);else return;if(k!==null&&W.push({str:k}),!!L.children)for(const x of L.children)Z(x)}return Z(A),q}static shouldBuildText(A){return!(A==="textarea"||A==="input"||A==="option"||A==="select")}}r.XfaText=B},(j,r,B)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.NodeStandardFontDataFactory=r.NodeFilterFactory=r.NodeCanvasFactory=r.NodeCMapReaderFactory=void 0;var c=B(7);const A=function(k){return new Promise((_,N)=>{require$$5.readFile(k,(P,p)=>{if(P||!p){N(new Error(P));return}_(new Uint8Array(p))})})};class W extends c.BaseFilterFactory{}r.NodeFilterFactory=W;class q extends c.BaseCanvasFactory{_createCanvas(_,N){return require$$5.createCanvas(_,N)}}r.NodeCanvasFactory=q;class Z extends c.BaseCMapReaderFactory{_fetchData(_,N){return A(_).then(x=>({cMapData:x,compressionType:N}))}}r.NodeCMapReaderFactory=Z;class L extends c.BaseStandardFontDataFactory{_fetchData(_){return A(_)}}r.NodeStandardFontDataFactory=L},(j,r,B)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PDFNodeStream=void 0;var c=B(1),A=B(22);const W=require$$5,q=require$$5,Z=require$$5,L=require$$5,k=/^file:\/\/\/[a-zA-Z]:\//;function _(C){const m=L.parse(C);return m.protocol==="file:"||m.host?m:/^[a-z]:[/\\]/i.test(C)?L.parse(`file:///${C}`):(m.host||(m.protocol="file:"),m)}class N{constructor(m){this.source=m,this.url=_(m.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&m.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var m;return((m=this._fullRequestReader)==null?void 0:m._loaded)??0}getFullReader(){return(0,c.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new y(this):new u(this),this._fullRequestReader}getRangeReader(m,t){if(t<=this._progressiveDataLength)return null;const o=this.isFsUrl?new S(this,m,t):new a(this,m,t);return this._rangeRequestReaders.push(o),o}cancelAllRequests(m){var t;(t=this._fullRequestReader)==null||t.cancel(m);for(const o of this._rangeRequestReaders.slice(0))o.cancel(m)}}r.PDFNodeStream=N;class x{constructor(m){this._url=m.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=m.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=new c.PromiseCapability,this._headersCapability=new c.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var o;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const m=this._readableStream.read();return m===null?(this._readCapability=new c.PromiseCapability,this.read()):(this._loaded+=m.length,(o=this.onProgress)==null||o.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(m).buffer,done:!1})}cancel(m){if(!this._readableStream){this._error(m);return}this._readableStream.destroy(m)}_error(m){this._storedError=m,this._readCapability.resolve()}_setReadableStream(m){this._readableStream=m,m.on("readable",()=>{this._readCapability.resolve()}),m.on("end",()=>{m.destroy(),this._done=!0,this._readCapability.resolve()}),m.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new c.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class P{constructor(m){this._url=m.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new c.PromiseCapability;const t=m.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var o;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const m=this._readableStream.read();return m===null?(this._readCapability=new c.PromiseCapability,this.read()):(this._loaded+=m.length,(o=this.onProgress)==null||o.call(this,{loaded:this._loaded}),{value:new Uint8Array(m).buffer,done:!1})}cancel(m){if(!this._readableStream){this._error(m);return}this._readableStream.destroy(m)}_error(m){this._storedError=m,this._readCapability.resolve()}_setReadableStream(m){this._readableStream=m,m.on("readable",()=>{this._readCapability.resolve()}),m.on("end",()=>{m.destroy(),this._done=!0,this._readCapability.resolve()}),m.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function p(C,m){return{protocol:C.protocol,auth:C.auth,host:C.hostname,port:C.port,path:C.path,method:"GET",headers:m}}class u extends x{constructor(m){super(m);const t=o=>{if(o.statusCode===404){const R=new c.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=R,this._headersCapability.reject(R);return}this._headersCapability.resolve(),this._setReadableStream(o);const l=R=>this._readableStream.headers[R.toLowerCase()],{allowRangeRequests:s,suggestedLength:d}=(0,A.validateRangeRequestCapabilities)({getResponseHeader:l,isHttp:m.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=s,this._contentLength=d||this._contentLength,this._filename=(0,A.extractFilenameFromHeader)(l)};this._request=null,this._url.protocol==="http:"?this._request=q.request(p(this._url,m.httpHeaders),t):this._request=Z.request(p(this._url,m.httpHeaders),t),this._request.on("error",o=>{this._storedError=o,this._headersCapability.reject(o)}),this._request.end()}}class a extends P{constructor(m,t,o){super(m),this._httpHeaders={};for(const s in m.httpHeaders){const d=m.httpHeaders[s];d!==void 0&&(this._httpHeaders[s]=d)}this._httpHeaders.Range=`bytes=${t}-${o-1}`;const l=s=>{if(s.statusCode===404){const d=new c.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=d;return}this._setReadableStream(s)};this._request=null,this._url.protocol==="http:"?this._request=q.request(p(this._url,this._httpHeaders),l):this._request=Z.request(p(this._url,this._httpHeaders),l),this._request.on("error",s=>{this._storedError=s}),this._request.end()}}class y extends x{constructor(m){super(m);let t=decodeURIComponent(this._url.path);k.test(this._url.href)&&(t=t.replace(/^\//,"")),W.lstat(t,(o,l)=>{if(o){o.code==="ENOENT"&&(o=new c.MissingPDFException(`Missing PDF "${t}".`)),this._storedError=o,this._headersCapability.reject(o);return}this._contentLength=l.size,this._setReadableStream(W.createReadStream(t)),this._headersCapability.resolve()})}}class S extends P{constructor(m,t,o){super(m);let l=decodeURIComponent(this._url.path);k.test(this._url.href)&&(l=l.replace(/^\//,"")),this._setReadableStream(W.createReadStream(l,{start:t,end:o-1}))}}},(j,r,B)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.createResponseStatusError=L,r.extractFilenameFromHeader=Z,r.validateRangeRequestCapabilities=q,r.validateResponseStatus=k;var c=B(1),A=B(23),W=B(6);function q({getResponseHeader:_,isHttp:N,rangeChunkSize:x,disableRange:P}){const p={allowRangeRequests:!1,suggestedLength:void 0},u=parseInt(_("Content-Length"),10);return!Number.isInteger(u)||(p.suggestedLength=u,u<=2*x)||P||!N||_("Accept-Ranges")!=="bytes"||(_("Content-Encoding")||"identity")!=="identity"||(p.allowRangeRequests=!0),p}function Z(_){const N=_("Content-Disposition");if(N){let x=(0,A.getFilenameFromContentDispositionHeader)(N);if(x.includes("%"))try{x=decodeURIComponent(x)}catch{}if((0,W.isPdfFile)(x))return x}return null}function L(_,N){return _===404||_===0&&N.startsWith("file:")?new c.MissingPDFException('Missing PDF "'+N+'".'):new c.UnexpectedResponseException(`Unexpected server response (${_}) while retrieving PDF "${N}".`,_)}function k(_){return _===200||_===206}},(j,r,B)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.getFilenameFromContentDispositionHeader=A;var c=B(1);function A(W){let q=!0,Z=L("filename\\*","i").exec(W);if(Z){Z=Z[1];let u=x(Z);return u=unescape(u),u=P(u),u=p(u),_(u)}if(Z=N(W),Z){const u=p(Z);return _(u)}if(Z=L("filename","i").exec(W),Z){Z=Z[1];let u=x(Z);return u=p(u),_(u)}function L(u,a){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',a)}function k(u,a){if(u){if(!/^[\x00-\xFF]+$/.test(a))return a;try{const y=new TextDecoder(u,{fatal:!0}),S=(0,c.stringToBytes)(a);a=y.decode(S),q=!1}catch{}}return a}function _(u){return q&&/[\x80-\xff]/.test(u)&&(u=k("utf-8",u),q&&(u=k("iso-8859-1",u))),u}function N(u){const a=[];let y;const S=L("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=S.exec(u))!==null;){let[,m,t,o]=y;if(m=parseInt(m,10),m in a){if(m===0)break;continue}a[m]=[t,o]}const C=[];for(let m=0;m<a.length&&m in a;++m){let[t,o]=a[m];o=x(o),t&&(o=unescape(o),m===0&&(o=P(o))),C.push(o)}return C.join("")}function x(u){if(u.startsWith('"')){const a=u.slice(1).split('\\"');for(let y=0;y<a.length;++y){const S=a[y].indexOf('"');S!==-1&&(a[y]=a[y].slice(0,S),a.length=y+1),a[y]=a[y].replaceAll(/\\(.)/g,"$1")}u=a.join('"')}return u}function P(u){const a=u.indexOf("'");if(a===-1)return u;const y=u.slice(0,a),C=u.slice(a+1).replace(/^[^']*'/,"");return k(y,C)}function p(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(a,y,S,C){if(S==="q"||S==="Q")return C=C.replaceAll("_"," "),C=C.replaceAll(/=([0-9a-fA-F]{2})/g,function(m,t){return String.fromCharCode(parseInt(t,16))}),k(y,C);try{C=atob(C)}catch{}return k(y,C)})}return""}},(j,r,B)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PDFNetworkStream=void 0;var c=B(1),A=B(22);const W=200,q=206;function Z(x){const P=x.response;return typeof P!="string"?P:(0,c.stringToBytes)(P).buffer}class L{constructor(P,p={}){this.url=P,this.isHttp=/^https?:/i.test(P),this.httpHeaders=this.isHttp&&p.httpHeaders||Object.create(null),this.withCredentials=p.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(P,p,u){const a={begin:P,end:p};for(const y in u)a[y]=u[y];return this.request(a)}requestFull(P){return this.request(P)}request(P){const p=new XMLHttpRequest,u=this.currXhrId++,a=this.pendingRequests[u]={xhr:p};p.open("GET",this.url),p.withCredentials=this.withCredentials;for(const y in this.httpHeaders){const S=this.httpHeaders[y];S!==void 0&&p.setRequestHeader(y,S)}return this.isHttp&&"begin"in P&&"end"in P?(p.setRequestHeader("Range",`bytes=${P.begin}-${P.end-1}`),a.expectedStatus=q):a.expectedStatus=W,p.responseType="arraybuffer",P.onError&&(p.onerror=function(y){P.onError(p.status)}),p.onreadystatechange=this.onStateChange.bind(this,u),p.onprogress=this.onProgress.bind(this,u),a.onHeadersReceived=P.onHeadersReceived,a.onDone=P.onDone,a.onError=P.onError,a.onProgress=P.onProgress,p.send(null),u}onProgress(P,p){var a;const u=this.pendingRequests[P];u&&((a=u.onProgress)==null||a.call(u,p))}onStateChange(P,p){var m,t,o;const u=this.pendingRequests[P];if(!u)return;const a=u.xhr;if(a.readyState>=2&&u.onHeadersReceived&&(u.onHeadersReceived(),delete u.onHeadersReceived),a.readyState!==4||!(P in this.pendingRequests))return;if(delete this.pendingRequests[P],a.status===0&&this.isHttp){(m=u.onError)==null||m.call(u,a.status);return}const y=a.status||W;if(!(y===W&&u.expectedStatus===q)&&y!==u.expectedStatus){(t=u.onError)==null||t.call(u,a.status);return}const C=Z(a);if(y===q){const l=a.getResponseHeader("Content-Range"),s=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);u.onDone({begin:parseInt(s[1],10),chunk:C})}else C?u.onDone({begin:0,chunk:C}):(o=u.onError)==null||o.call(u,a.status)}getRequestXhr(P){return this.pendingRequests[P].xhr}isPendingRequest(P){return P in this.pendingRequests}abortRequest(P){const p=this.pendingRequests[P].xhr;delete this.pendingRequests[P],p.abort()}}class k{constructor(P){this._source=P,this._manager=new L(P.url,{httpHeaders:P.httpHeaders,withCredentials:P.withCredentials}),this._rangeChunkSize=P.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(P){const p=this._rangeRequestReaders.indexOf(P);p>=0&&this._rangeRequestReaders.splice(p,1)}getFullReader(){return(0,c.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new _(this._manager,this._source),this._fullRequestReader}getRangeReader(P,p){const u=new N(this._manager,P,p);return u.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(u),u}cancelAllRequests(P){var p;(p=this._fullRequestReader)==null||p.cancel(P);for(const u of this._rangeRequestReaders.slice(0))u.cancel(P)}}r.PDFNetworkStream=k;class _{constructor(P,p){this._manager=P;const u={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=p.url,this._fullRequestId=P.requestFull(u),this._headersReceivedCapability=new c.PromiseCapability,this._disableRange=p.disableRange||!1,this._contentLength=p.length,this._rangeChunkSize=p.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const P=this._fullRequestId,p=this._manager.getRequestXhr(P),u=S=>p.getResponseHeader(S),{allowRangeRequests:a,suggestedLength:y}=(0,A.validateRangeRequestCapabilities)({getResponseHeader:u,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=y||this._contentLength,this._filename=(0,A.extractFilenameFromHeader)(u),this._isRangeSupported&&this._manager.abortRequest(P),this._headersReceivedCapability.resolve()}_onDone(P){if(P&&(this._requests.length>0?this._requests.shift().resolve({value:P.chunk,done:!1}):this._cachedChunks.push(P.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(P){this._storedError=(0,A.createResponseStatusError)(P,this._url),this._headersReceivedCapability.reject(this._storedError);for(const p of this._requests)p.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(P){var p;(p=this.onProgress)==null||p.call(this,{loaded:P.loaded,total:P.lengthComputable?P.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const P=new c.PromiseCapability;return this._requests.push(P),P.promise}cancel(P){this._done=!0,this._headersReceivedCapability.reject(P);for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class N{constructor(P,p,u){this._manager=P;const a={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=P.url,this._requestId=P.requestRange(p,u,a),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var P;(P=this.onClosed)==null||P.call(this,this)}_onDone(P){const p=P.chunk;this._requests.length>0?this._requests.shift().resolve({value:p,done:!1}):this._queuedChunk=p,this._done=!0;for(const u of this._requests)u.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(P){this._storedError=(0,A.createResponseStatusError)(P,this._url);for(const p of this._requests)p.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(P){var p;this.isStreamingSupported||(p=this.onProgress)==null||p.call(this,{loaded:P.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const p=this._queuedChunk;return this._queuedChunk=null,{value:p,done:!1}}if(this._done)return{value:void 0,done:!0};const P=new c.PromiseCapability;return this._requests.push(P),P.promise}cancel(P){this._done=!0;for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(j,r,B)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PDFFetchStream=void 0;var c=B(1),A=B(22);function W(N,x,P){return{method:"GET",headers:N,signal:P.signal,mode:"cors",credentials:x?"include":"same-origin",redirect:"follow"}}function q(N){const x=new Headers;for(const P in N){const p=N[P];p!==void 0&&x.append(P,p)}return x}function Z(N){return N instanceof Uint8Array?N.buffer:N instanceof ArrayBuffer?N:((0,c.warn)(`getArrayBuffer - unexpected data format: ${N}`),new Uint8Array(N).buffer)}class L{constructor(x){this.source=x,this.isHttp=/^https?:/i.test(x.url),this.httpHeaders=this.isHttp&&x.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var x;return((x=this._fullRequestReader)==null?void 0:x._loaded)??0}getFullReader(){return(0,c.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new k(this),this._fullRequestReader}getRangeReader(x,P){if(P<=this._progressiveDataLength)return null;const p=new _(this,x,P);return this._rangeRequestReaders.push(p),p}cancelAllRequests(x){var P;(P=this._fullRequestReader)==null||P.cancel(x);for(const p of this._rangeRequestReaders.slice(0))p.cancel(x)}}r.PDFFetchStream=L;class k{constructor(x){this._stream=x,this._reader=null,this._loaded=0,this._filename=null;const P=x.source;this._withCredentials=P.withCredentials||!1,this._contentLength=P.length,this._headersCapability=new c.PromiseCapability,this._disableRange=P.disableRange||!1,this._rangeChunkSize=P.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!P.disableStream,this._isRangeSupported=!P.disableRange,this._headers=q(this._stream.httpHeaders);const p=P.url;fetch(p,W(this._headers,this._withCredentials,this._abortController)).then(u=>{if(!(0,A.validateResponseStatus)(u.status))throw(0,A.createResponseStatusError)(u.status,p);this._reader=u.body.getReader(),this._headersCapability.resolve();const a=C=>u.headers.get(C),{allowRangeRequests:y,suggestedLength:S}=(0,A.validateRangeRequestCapabilities)({getResponseHeader:a,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=y,this._contentLength=S||this._contentLength,this._filename=(0,A.extractFilenameFromHeader)(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new c.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var p;await this._headersCapability.promise;const{value:x,done:P}=await this._reader.read();return P?{value:x,done:P}:(this._loaded+=x.byteLength,(p=this.onProgress)==null||p.call(this,{loaded:this._loaded,total:this._contentLength}),{value:Z(x),done:!1})}cancel(x){var P;(P=this._reader)==null||P.cancel(x),this._abortController.abort()}}class _{constructor(x,P,p){this._stream=x,this._reader=null,this._loaded=0;const u=x.source;this._withCredentials=u.withCredentials||!1,this._readCapability=new c.PromiseCapability,this._isStreamingSupported=!u.disableStream,this._abortController=new AbortController,this._headers=q(this._stream.httpHeaders),this._headers.append("Range",`bytes=${P}-${p-1}`);const a=u.url;fetch(a,W(this._headers,this._withCredentials,this._abortController)).then(y=>{if(!(0,A.validateResponseStatus)(y.status))throw(0,A.createResponseStatusError)(y.status,a);this._readCapability.resolve(),this._reader=y.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var p;await this._readCapability.promise;const{value:x,done:P}=await this._reader.read();return P?{value:x,done:P}:(this._loaded+=x.byteLength,(p=this.onProgress)==null||p.call(this,{loaded:this._loaded}),{value:Z(x),done:!1})}cancel(x){var P;(P=this._reader)==null||P.cancel(x),this._abortController.abort()}}},(j,r,B)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TextLayerRenderTask=void 0,r.renderTextLayer=u,r.updateTextLayer=a;var c=B(1),A=B(6);const W=1e5,q=30,Z=.8,L=new Map;function k(y,S){let C;if(S&&c.FeatureTest.isOffscreenCanvasSupported)C=new OffscreenCanvas(y,y).getContext("2d",{alpha:!1});else{const m=document.createElement("canvas");m.width=m.height=y,C=m.getContext("2d",{alpha:!1})}return C}function _(y,S){const C=L.get(y);if(C)return C;const m=k(q,S);m.font=`${q}px ${y}`;const t=m.measureText("");let o=t.fontBoundingBoxAscent,l=Math.abs(t.fontBoundingBoxDescent);if(o){const d=o/(o+l);return L.set(y,d),m.canvas.width=m.canvas.height=0,d}m.strokeStyle="red",m.clearRect(0,0,q,q),m.strokeText("g",0,0);let s=m.getImageData(0,0,q,q).data;l=0;for(let d=s.length-1-3;d>=0;d-=4)if(s[d]>0){l=Math.ceil(d/4/q);break}m.clearRect(0,0,q,q),m.strokeText("A",0,q),s=m.getImageData(0,0,q,q).data,o=0;for(let d=0,R=s.length;d<R;d+=4)if(s[d]>0){o=q-Math.floor(d/4/q);break}if(m.canvas.width=m.canvas.height=0,o){const d=o/(o+l);return L.set(y,d),d}return L.set(y,Z),Z}function N(y,S,C){const m=document.createElement("span"),t={angle:0,canvasWidth:0,hasText:S.str!=="",hasEOL:S.hasEOL,fontSize:0};y._textDivs.push(m);const o=c.Util.transform(y._transform,S.transform);let l=Math.atan2(o[1],o[0]);const s=C[S.fontName];s.vertical&&(l+=Math.PI/2);const d=Math.hypot(o[2],o[3]),R=d*_(s.fontFamily,y._isOffscreenCanvasSupported);let n,I;l===0?(n=o[4],I=o[5]-R):(n=o[4]+R*Math.sin(l),I=o[5]-R*Math.cos(l));const $="calc(var(--scale-factor)*",z=m.style;y._container===y._rootContainer?(z.left=`${(100*n/y._pageWidth).toFixed(2)}%`,z.top=`${(100*I/y._pageHeight).toFixed(2)}%`):(z.left=`${$}${n.toFixed(2)}px)`,z.top=`${$}${I.toFixed(2)}px)`),z.fontSize=`${$}${d.toFixed(2)}px)`,z.fontFamily=s.fontFamily,t.fontSize=d,m.setAttribute("role","presentation"),m.textContent=S.str,m.dir=S.dir,y._fontInspectorEnabled&&(m.dataset.fontName=S.fontName),l!==0&&(t.angle=l*(180/Math.PI));let J=!1;if(S.str.length>1)J=!0;else if(S.str!==" "&&S.transform[0]!==S.transform[3]){const tt=Math.abs(S.transform[0]),ht=Math.abs(S.transform[3]);tt!==ht&&Math.max(tt,ht)/Math.min(tt,ht)>1.5&&(J=!0)}J&&(t.canvasWidth=s.vertical?S.height:S.width),y._textDivProperties.set(m,t),y._isReadableStream&&y._layoutText(m)}function x(y){const{div:S,scale:C,properties:m,ctx:t,prevFontSize:o,prevFontFamily:l}=y,{style:s}=S;let d="";if(m.canvasWidth!==0&&m.hasText){const{fontFamily:R}=s,{canvasWidth:n,fontSize:I}=m;(o!==I||l!==R)&&(t.font=`${I*C}px ${R}`,y.prevFontSize=I,y.prevFontFamily=R);const{width:$}=t.measureText(S.textContent);$>0&&(d=`scaleX(${n*C/$})`)}m.angle!==0&&(d=`rotate(${m.angle}deg) ${d}`),d.length>0&&(s.transform=d)}function P(y){if(y._canceled)return;const S=y._textDivs,C=y._capability;if(S.length>W){C.resolve();return}if(!y._isReadableStream)for(const t of S)y._layoutText(t);C.resolve()}class p{constructor({textContentSource:S,container:C,viewport:m,textDivs:t,textDivProperties:o,textContentItemsStr:l,isOffscreenCanvasSupported:s}){var $;this._textContentSource=S,this._isReadableStream=S instanceof ReadableStream,this._container=this._rootContainer=C,this._textDivs=t||[],this._textContentItemsStr=l||[],this._isOffscreenCanvasSupported=s,this._fontInspectorEnabled=!!(($=globalThis.FontInspector)!=null&&$.enabled),this._reader=null,this._textDivProperties=o||new WeakMap,this._canceled=!1,this._capability=new c.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:m.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:k(0,s)};const{pageWidth:d,pageHeight:R,pageX:n,pageY:I}=m.rawDims;this._transform=[1,0,0,-1,-n,I+R],this._pageWidth=d,this._pageHeight=R,(0,A.setLayerDimensions)(C,m),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new c.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new c.AbortException("TextLayer task cancelled."))}_processItems(S,C){for(const m of S){if(m.str===void 0){if(m.type==="beginMarkedContentProps"||m.type==="beginMarkedContent"){const t=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),m.id!==null&&this._container.setAttribute("id",`${m.id}`),t.append(this._container)}else m.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(m.str),N(this,m,C)}}_layoutText(S){const C=this._layoutTextParams.properties=this._textDivProperties.get(S);if(this._layoutTextParams.div=S,x(this._layoutTextParams),C.hasText&&this._container.append(S),C.hasEOL){const m=document.createElement("br");m.setAttribute("role","presentation"),this._container.append(m)}}_render(){const S=new c.PromiseCapability;let C=Object.create(null);if(this._isReadableStream){const m=()=>{this._reader.read().then(({value:t,done:o})=>{if(o){S.resolve();return}Object.assign(C,t.styles),this._processItems(t.items,C),m()},S.reject)};this._reader=this._textContentSource.getReader(),m()}else if(this._textContentSource){const{items:m,styles:t}=this._textContentSource;this._processItems(m,t),S.resolve()}else throw new Error('No "textContentSource" parameter specified.');S.promise.then(()=>{C=null,P(this)},this._capability.reject)}}r.TextLayerRenderTask=p;function u(y){!y.textContentSource&&(y.textContent||y.textContentStream)&&((0,A.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),y.textContentSource=y.textContent||y.textContentStream);const{container:S,viewport:C}=y,m=getComputedStyle(S),t=m.getPropertyValue("visibility"),o=parseFloat(m.getPropertyValue("--scale-factor"));t==="visible"&&(!o||Math.abs(o-C.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const l=new p(y);return l._render(),l}function a({container:y,viewport:S,textDivs:C,textDivProperties:m,isOffscreenCanvasSupported:t,mustRotate:o=!0,mustRescale:l=!0}){if(o&&(0,A.setLayerDimensions)(y,{rotation:S.rotation}),l){const s=k(0,t),R={prevFontSize:null,prevFontFamily:null,div:null,scale:S.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:s};for(const n of C)R.properties=m.get(n),R.div=n,x(R)}}},(j,r,B)=>{var k,_,N,x,P,p,u,a,y,_e,C,He,t,ve,l,Se;Object.defineProperty(r,"__esModule",{value:!0}),r.AnnotationEditorLayer=void 0;var c=B(1),A=B(5),W=B(28),q=B(29),Z=B(6);const d=class d{constructor(n){Q(this,y);Q(this,C);Q(this,t);Q(this,l);Q(this,k,void 0);Q(this,_,!1);Q(this,N,this.pointerup.bind(this));Q(this,x,this.pointerdown.bind(this));Q(this,P,new Map);Q(this,p,!1);Q(this,u,!1);Q(this,a,void 0);d._initialized||(d._initialized=!0,W.FreeTextEditor.initialize(n.l10n),q.InkEditor.initialize(n.l10n)),n.uiManager.registerEditorTypes([W.FreeTextEditor,q.InkEditor]),pt(this,a,n.uiManager),this.pageIndex=n.pageIndex,this.div=n.div,pt(this,k,n.accessibilityManager),b(this,a).addLayer(this)}get isEmpty(){return b(this,P).size===0}updateToolbar(n){b(this,a).updateToolbar(n)}updateMode(n=b(this,a).getMode()){it(this,l,Se).call(this),n===c.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),b(this,a).unselectAll(),n!==c.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",n===c.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",n===c.AnnotationEditorType.INK),this.div.hidden=!1)}addInkEditorIfNeeded(n){if(!n&&b(this,a).getMode()!==c.AnnotationEditorType.INK)return;if(!n){for(const $ of b(this,P).values())if($.isEmpty()){$.setInBackground();return}}it(this,t,ve).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(n){b(this,a).setEditingState(n)}addCommands(n){b(this,a).addCommands(n)}enable(){this.div.style.pointerEvents="auto";for(const n of b(this,P).values())n.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const n of b(this,P).values())n.disableEditing();it(this,l,Se).call(this),this.isEmpty&&(this.div.hidden=!0)}setActiveEditor(n){b(this,a).getActive()!==n&&b(this,a).setActiveEditor(n)}enableClick(){this.div.addEventListener("pointerdown",b(this,x)),this.div.addEventListener("pointerup",b(this,N))}disableClick(){this.div.removeEventListener("pointerdown",b(this,x)),this.div.removeEventListener("pointerup",b(this,N))}attach(n){b(this,P).set(n.id,n)}detach(n){var I;b(this,P).delete(n.id),(I=b(this,k))==null||I.removePointerInTextLayer(n.contentDiv)}remove(n){b(this,a).removeEditor(n),this.detach(n),n.div.style.display="none",setTimeout(()=>{n.div.style.display="",n.div.remove(),n.isAttachedToDOM=!1,document.activeElement===document.body&&b(this,a).focusMainContainer()},0),b(this,u)||this.addInkEditorIfNeeded(!1)}add(n){if(it(this,y,_e).call(this,n),b(this,a).addEditor(n),this.attach(n),!n.isAttachedToDOM){const I=n.render();this.div.append(I),n.isAttachedToDOM=!0}this.moveEditorInDOM(n),n.onceAdded(),b(this,a).addToAnnotationStorage(n)}moveEditorInDOM(n){var I;(I=b(this,k))==null||I.moveElementInDOM(this.div,n.div,n.contentDiv,!0)}addOrRebuild(n){n.needsToBeRebuilt()?n.rebuild():this.add(n)}addANewEditor(n){const I=()=>{this.addOrRebuild(n)},$=()=>{n.remove()};this.addCommands({cmd:I,undo:$,mustExec:!0})}addUndoableEditor(n){const I=()=>{this.addOrRebuild(n)},$=()=>{n.remove()};this.addCommands({cmd:I,undo:$,mustExec:!1})}getNextId(){return b(this,a).getId()}deserialize(n){switch(n.annotationType){case c.AnnotationEditorType.FREETEXT:return W.FreeTextEditor.deserialize(n,this,b(this,a));case c.AnnotationEditorType.INK:return q.InkEditor.deserialize(n,this,b(this,a))}return null}setSelected(n){b(this,a).setSelected(n)}toggleSelected(n){b(this,a).toggleSelected(n)}isSelected(n){return b(this,a).isSelected(n)}unselect(n){b(this,a).unselect(n)}pointerup(n){const{isMac:I}=c.FeatureTest.platform;if(!(n.button!==0||n.ctrlKey&&I)&&n.target===this.div&&b(this,p)){if(pt(this,p,!1),!b(this,_)){pt(this,_,!0);return}it(this,t,ve).call(this,n)}}pointerdown(n){const{isMac:I}=c.FeatureTest.platform;if(n.button!==0||n.ctrlKey&&I||n.target!==this.div)return;pt(this,p,!0);const $=b(this,a).getActive();pt(this,_,!$||$.isEmpty())}drop(n){const I=n.dataTransfer.getData("text/plain"),$=b(this,a).getEditor(I);if(!$)return;n.preventDefault(),n.dataTransfer.dropEffect="move",it(this,y,_e).call(this,$);const z=this.div.getBoundingClientRect(),J=n.clientX-z.x,tt=n.clientY-z.y;$.translate(J-$.startX,tt-$.startY),this.moveEditorInDOM($),$.div.focus()}dragover(n){n.preventDefault()}destroy(){var n,I;((n=b(this,a).getActive())==null?void 0:n.parent)===this&&b(this,a).setActiveEditor(null);for(const $ of b(this,P).values())(I=b(this,k))==null||I.removePointerInTextLayer($.contentDiv),$.setParent(null),$.isAttachedToDOM=!1,$.div.remove();this.div=null,b(this,P).clear(),b(this,a).removeLayer(this)}render({viewport:n}){this.viewport=n,(0,Z.setLayerDimensions)(this.div,n),(0,A.bindEvents)(this,this.div,["dragover","drop"]);for(const I of b(this,a).getEditors(this.pageIndex))this.add(I);this.updateMode()}update({viewport:n}){b(this,a).commitOrRemove(),this.viewport=n,(0,Z.setLayerDimensions)(this.div,{rotation:n.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:n,pageHeight:I}=this.viewport.rawDims;return[n,I]}};k=new WeakMap,_=new WeakMap,N=new WeakMap,x=new WeakMap,P=new WeakMap,p=new WeakMap,u=new WeakMap,a=new WeakMap,y=new WeakSet,_e=function(n){var I;n.parent!==this&&(this.attach(n),(I=n.parent)==null||I.detach(n),n.setParent(this),n.div&&n.isAttachedToDOM&&(n.div.remove(),this.div.append(n.div)))},C=new WeakSet,He=function(n){switch(b(this,a).getMode()){case c.AnnotationEditorType.FREETEXT:return new W.FreeTextEditor(n);case c.AnnotationEditorType.INK:return new q.InkEditor(n)}return null},t=new WeakSet,ve=function(n){const I=this.getNextId(),$=it(this,C,He).call(this,{parent:this,id:I,x:n.offsetX,y:n.offsetY,uiManager:b(this,a)});return $&&this.add($),$},l=new WeakSet,Se=function(){pt(this,u,!0);for(const n of b(this,P).values())n.isEmpty()&&n.remove();pt(this,u,!1)},Dt(d,"_initialized",!1);let L=d;r.AnnotationEditorLayer=L},(j,r,B)=>{var Z,L,k,_,N,x,P,p,u,a,qe,S,$e,m,Ve,o,Ee;Object.defineProperty(r,"__esModule",{value:!0}),r.FreeTextEditor=void 0;var c=B(1),A=B(5),W=B(4);const s=class s extends W.AnnotationEditor{constructor(n){super({...n,name:"freeTextEditor"});Q(this,a);Q(this,S);Q(this,m);Q(this,o);Q(this,Z,this.editorDivBlur.bind(this));Q(this,L,this.editorDivFocus.bind(this));Q(this,k,this.editorDivInput.bind(this));Q(this,_,this.editorDivKeydown.bind(this));Q(this,N,void 0);Q(this,x,"");Q(this,P,`${this.id}-editor`);Q(this,p,!1);Q(this,u,void 0);pt(this,N,n.color||s._defaultColor||W.AnnotationEditor._defaultLineColor),pt(this,u,n.fontSize||s._defaultFontSize)}static initialize(n){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map($=>[$,n.get($)]));const I=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(I.getPropertyValue("--freetext-padding"))}static updateDefaultParams(n,I){switch(n){case c.AnnotationEditorParamsType.FREETEXT_SIZE:s._defaultFontSize=I;break;case c.AnnotationEditorParamsType.FREETEXT_COLOR:s._defaultColor=I;break}}updateParams(n,I){switch(n){case c.AnnotationEditorParamsType.FREETEXT_SIZE:it(this,a,qe).call(this,I);break;case c.AnnotationEditorParamsType.FREETEXT_COLOR:it(this,S,$e).call(this,I);break}}static get defaultPropertiesToUpdate(){return[[c.AnnotationEditorParamsType.FREETEXT_SIZE,s._defaultFontSize],[c.AnnotationEditorParamsType.FREETEXT_COLOR,s._defaultColor||W.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[c.AnnotationEditorParamsType.FREETEXT_SIZE,b(this,u)],[c.AnnotationEditorParamsType.FREETEXT_COLOR,b(this,N)]]}getInitialTranslation(){const n=this.parentScale;return[-s._internalPadding*n,-(s._internalPadding+b(this,u))*n]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(c.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",b(this,_)),this.editorDiv.addEventListener("focus",b(this,L)),this.editorDiv.addEventListener("blur",b(this,Z)),this.editorDiv.addEventListener("input",b(this,k)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",b(this,P)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",b(this,_)),this.editorDiv.removeEventListener("focus",b(this,L)),this.editorDiv.removeEventListener("blur",b(this,Z)),this.editorDiv.removeEventListener("input",b(this,k)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(n){super.focusin(n),n.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),super.remove()}commit(){this.isInEditMode()&&(super.commit(),b(this,p)||(pt(this,p,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),pt(this,x,it(this,m,Ve).call(this).trimEnd()),it(this,o,Ee).call(this))}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(n){this.enableEditMode(),this.editorDiv.focus()}keydown(n){n.target===this.div&&n.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(n){s._keyboardManager.exec(this,n)}editorDivFocus(n){this.isEditing=!0}editorDivBlur(n){this.isEditing=!1}editorDivInput(n){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let n,I;this.width&&(n=this.x,I=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",b(this,P)),this.enableEditing(),s._l10nPromise.get("editor_free_text2_aria_label").then(z=>{var J;return(J=this.editorDiv)==null?void 0:J.setAttribute("aria-label",z)}),s._l10nPromise.get("free_text2_default_content").then(z=>{var J;return(J=this.editorDiv)==null?void 0:J.setAttribute("default-content",z)}),this.editorDiv.contentEditable=!0;const{style:$}=this.editorDiv;if($.fontSize=`calc(${b(this,u)}px * var(--scale-factor))`,$.color=b(this,N),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,A.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[z,J]=this.parentDimensions;this.setAt(n*z,I*J,this.width*z,this.height*J);for(const tt of b(this,x).split(`
`)){const ht=document.createElement("div");ht.append(tt?document.createTextNode(tt):document.createElement("br")),this.editorDiv.append(ht)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(n,I,$){const z=super.deserialize(n,I,$);return pt(z,u,n.fontSize),pt(z,N,c.Util.makeHexColor(...n.color)),pt(z,x,n.value),z}serialize(){if(this.isEmpty())return null;const n=s._internalPadding*this.parentScale,I=this.getRect(n,n),$=W.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:b(this,N));return{annotationType:c.AnnotationEditorType.FREETEXT,color:$,fontSize:b(this,u),value:b(this,x),pageIndex:this.pageIndex,rect:I,rotation:this.rotation}}};Z=new WeakMap,L=new WeakMap,k=new WeakMap,_=new WeakMap,N=new WeakMap,x=new WeakMap,P=new WeakMap,p=new WeakMap,u=new WeakMap,a=new WeakSet,qe=function(n){const I=z=>{this.editorDiv.style.fontSize=`calc(${z}px * var(--scale-factor))`,this.translate(0,-(z-b(this,u))*this.parentScale),pt(this,u,z),it(this,o,Ee).call(this)},$=b(this,u);this.addCommands({cmd:()=>{I(n)},undo:()=>{I($)},mustExec:!0,type:c.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},S=new WeakSet,$e=function(n){const I=b(this,N);this.addCommands({cmd:()=>{pt(this,N,this.editorDiv.style.color=n)},undo:()=>{pt(this,N,this.editorDiv.style.color=I)},mustExec:!0,type:c.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},m=new WeakSet,Ve=function(){const n=this.editorDiv.getElementsByTagName("div");if(n.length===0)return this.editorDiv.innerText;const I=[];for(const $ of n)I.push($.innerText.replace(/\r\n?|\n/,""));return I.join(`
`)},o=new WeakSet,Ee=function(){const[n,I]=this.parentDimensions;let $;if(this.isAttachedToDOM)$=this.div.getBoundingClientRect();else{const{currentLayer:z,div:J}=this,tt=J.style.display;J.style.display="hidden",z.div.append(this.div),$=J.getBoundingClientRect(),J.remove(),J.style.display=tt}this.width=$.width/n,this.height=$.height/I},Dt(s,"_freeTextDefaultContent",""),Dt(s,"_l10nPromise"),Dt(s,"_internalPadding",0),Dt(s,"_defaultColor",null),Dt(s,"_defaultFontSize",10),Dt(s,"_keyboardManager",new A.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],s.prototype.commitOrRemove]])),Dt(s,"_type","freetext");let q=s;r.FreeTextEditor=q},(j,r,B)=>{var k,_,N,x,P,p,u,a,y,S,C,m,t,o,l,Xe,d,ze,n,Ye,$,Ke,J,Te,ht,Je,ct,Qe,At,Ze,yt,Vt,h,Pe,E,oe,U,le,F,Qt,D,Ce,i,ce,v,xe,H,tn,K,en,ot,nn,st,we,ft,he,vt,Zt,Y,Re;Object.defineProperty(r,"__esModule",{value:!0}),r.InkEditor=void 0,Object.defineProperty(r,"fitCurve",{enumerable:!0,get:function(){return W.fitCurve}});var c=B(1),A=B(4),W=B(30),q=B(5);const Z=16,_t=class _t extends A.AnnotationEditor{constructor(w){super({...w,name:"inkEditor"});Q(this,l);Q(this,d);Q(this,n);Q(this,$);Q(this,J);Q(this,ht);Q(this,ct);Q(this,At);Q(this,yt);Q(this,h);Q(this,E);Q(this,U);Q(this,F);Q(this,D);Q(this,i);Q(this,H);Q(this,K);Q(this,ot);Q(this,st);Q(this,ft);Q(this,vt);Q(this,Y);Q(this,k,0);Q(this,_,0);Q(this,N,0);Q(this,x,this.canvasPointermove.bind(this));Q(this,P,this.canvasPointerleave.bind(this));Q(this,p,this.canvasPointerup.bind(this));Q(this,u,this.canvasPointerdown.bind(this));Q(this,a,!1);Q(this,y,!1);Q(this,S,null);Q(this,C,null);Q(this,m,0);Q(this,t,0);Q(this,o,null);this.color=w.color||null,this.thickness=w.thickness||null,this.opacity=w.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(w){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(O=>[O,w.get(O)]))}static updateDefaultParams(w,O){switch(w){case c.AnnotationEditorParamsType.INK_THICKNESS:_t._defaultThickness=O;break;case c.AnnotationEditorParamsType.INK_COLOR:_t._defaultColor=O;break;case c.AnnotationEditorParamsType.INK_OPACITY:_t._defaultOpacity=O/100;break}}updateParams(w,O){switch(w){case c.AnnotationEditorParamsType.INK_THICKNESS:it(this,l,Xe).call(this,O);break;case c.AnnotationEditorParamsType.INK_COLOR:it(this,d,ze).call(this,O);break;case c.AnnotationEditorParamsType.INK_OPACITY:it(this,n,Ye).call(this,O);break}}static get defaultPropertiesToUpdate(){return[[c.AnnotationEditorParamsType.INK_THICKNESS,_t._defaultThickness],[c.AnnotationEditorParamsType.INK_COLOR,_t._defaultColor||A.AnnotationEditor._defaultLineColor],[c.AnnotationEditorParamsType.INK_OPACITY,Math.round(_t._defaultOpacity*100)]]}get propertiesToUpdate(){return[[c.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||_t._defaultThickness],[c.AnnotationEditorParamsType.INK_COLOR,this.color||_t._defaultColor||A.AnnotationEditor._defaultLineColor],[c.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??_t._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(it(this,E,oe).call(this),it(this,U,le).call(this)),this.isAttachedToDOM||(this.parent.add(this),it(this,F,Qt).call(this)),it(this,vt,Zt).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,b(this,C).disconnect(),pt(this,C,null),super.remove())}setParent(w){!this.parent&&w?this._uiManager.removeShouldRescale(this):this.parent&&w===null&&this._uiManager.addShouldRescale(this),super.setParent(w)}onScaleChanging(){const[w,O]=this.parentDimensions,lt=this.width*w,mt=this.height*O;this.setDimensions(lt,mt)}enableEditMode(){b(this,a)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",b(this,u)),this.canvas.addEventListener("pointerup",b(this,p)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",b(this,u)),this.canvas.removeEventListener("pointerup",b(this,p)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){b(this,a)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),pt(this,a,!0),this.div.classList.add("disabled"),it(this,vt,Zt).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}focusin(w){super.focusin(w),this.enableEditMode()}canvasPointerdown(w){w.button!==0||!this.isInEditMode()||b(this,a)||(this.setInForeground(),w.type!=="mouse"&&this.div.focus(),w.stopPropagation(),this.canvas.addEventListener("pointerleave",b(this,P)),this.canvas.addEventListener("pointermove",b(this,x)),it(this,ht,Je).call(this,w.offsetX,w.offsetY))}canvasPointermove(w){w.stopPropagation(),it(this,ct,Qe).call(this,w.offsetX,w.offsetY)}canvasPointerup(w){w.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(w.stopPropagation(),it(this,h,Pe).call(this,w),this.setInBackground())}canvasPointerleave(w){it(this,h,Pe).call(this,w),this.setInBackground()}render(){if(this.div)return this.div;let w,O;this.width&&(w=this.x,O=this.y),super.render(),_t._l10nPromise.get("editor_ink2_aria_label").then(Rt=>{var wt;return(wt=this.div)==null?void 0:wt.setAttribute("aria-label",Rt)});const[lt,mt,Pt,xt]=it(this,$,Ke).call(this);if(this.setAt(lt,mt,0,0),this.setDims(Pt,xt),it(this,E,oe).call(this),this.width){const[Rt,wt]=this.parentDimensions;this.setAt(w*Rt,O*wt,this.width*Rt,this.height*wt),pt(this,y,!0),it(this,F,Qt).call(this),this.setDims(this.width*Rt,this.height*wt),it(this,yt,Vt).call(this),it(this,Y,Re).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return it(this,U,le).call(this),this.div}setDimensions(w,O){const lt=Math.round(w),mt=Math.round(O);if(b(this,m)===lt&&b(this,t)===mt)return;pt(this,m,lt),pt(this,t,mt),this.canvas.style.visibility="hidden",b(this,k)&&Math.abs(b(this,k)-w/O)>.01&&(O=Math.ceil(w/b(this,k)),this.setDims(w,O));const[Pt,xt]=this.parentDimensions;this.width=w/Pt,this.height=O/xt,b(this,a)&&it(this,D,Ce).call(this,w,O),it(this,F,Qt).call(this),it(this,yt,Vt).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(w,O,lt){var Ot,Lt;const mt=super.deserialize(w,O,lt);mt.thickness=w.thickness,mt.color=c.Util.makeHexColor(...w.color),mt.opacity=w.opacity;const[Pt,xt]=mt.pageDimensions,Rt=mt.width*Pt,wt=mt.height*xt,Mt=mt.parentScale,Ct=w.thickness/2;pt(mt,k,Rt/wt),pt(mt,a,!0),pt(mt,m,Math.round(Rt)),pt(mt,t,Math.round(wt));for(const{bezier:Ft}of w.paths){const Bt=[];mt.paths.push(Bt);let Ut=Mt*(Ft[0]-Ct),Wt=Mt*(wt-Ft[1]-Ct);for(let Nt=2,jt=Ft.length;Nt<jt;Nt+=6){const qt=Mt*(Ft[Nt]-Ct),Xt=Mt*(wt-Ft[Nt+1]-Ct),ne=Mt*(Ft[Nt+2]-Ct),se=Mt*(wt-Ft[Nt+3]-Ct),Me=Mt*(Ft[Nt+4]-Ct),Oe=Mt*(wt-Ft[Nt+5]-Ct);Bt.push([[Ut,Wt],[qt,Xt],[ne,se],[Me,Oe]]),Ut=Me,Wt=Oe}const Ht=it(this,v,xe).call(this,Bt);mt.bezierPath2D.push(Ht)}const It=it(Ot=mt,st,we).call(Ot);return pt(mt,N,Math.max(Z,It[2]-It[0])),pt(mt,_,Math.max(Z,It[3]-It[1])),it(Lt=mt,D,Ce).call(Lt,Rt,wt),mt}serialize(){if(this.isEmpty())return null;const w=this.getRect(0,0),O=this.rotation%180===0?w[3]-w[1]:w[2]-w[0],lt=A.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:c.AnnotationEditorType.INK,color:lt,thickness:this.thickness,opacity:this.opacity,paths:it(this,H,tn).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,O),pageIndex:this.pageIndex,rect:w,rotation:this.rotation}}};k=new WeakMap,_=new WeakMap,N=new WeakMap,x=new WeakMap,P=new WeakMap,p=new WeakMap,u=new WeakMap,a=new WeakMap,y=new WeakMap,S=new WeakMap,C=new WeakMap,m=new WeakMap,t=new WeakMap,o=new WeakMap,l=new WeakSet,Xe=function(w){const O=this.thickness;this.addCommands({cmd:()=>{this.thickness=w,it(this,vt,Zt).call(this)},undo:()=>{this.thickness=O,it(this,vt,Zt).call(this)},mustExec:!0,type:c.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},d=new WeakSet,ze=function(w){const O=this.color;this.addCommands({cmd:()=>{this.color=w,it(this,yt,Vt).call(this)},undo:()=>{this.color=O,it(this,yt,Vt).call(this)},mustExec:!0,type:c.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},n=new WeakSet,Ye=function(w){w/=100;const O=this.opacity;this.addCommands({cmd:()=>{this.opacity=w,it(this,yt,Vt).call(this)},undo:()=>{this.opacity=O,it(this,yt,Vt).call(this)},mustExec:!0,type:c.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},$=new WeakSet,Ke=function(){const{parentRotation:w,parentDimensions:[O,lt]}=this;switch(w){case 90:return[0,lt,lt,O];case 180:return[O,lt,O,lt];case 270:return[O,0,lt,O];default:return[0,0,O,lt]}},J=new WeakSet,Te=function(){const{ctx:w,color:O,opacity:lt,thickness:mt,parentScale:Pt,scaleFactor:xt}=this;w.lineWidth=mt*Pt/xt,w.lineCap="round",w.lineJoin="round",w.miterLimit=10,w.strokeStyle=`${O}${(0,q.opacityToHex)(lt)}`},ht=new WeakSet,Je=function(w,O){this.isEditing=!0,b(this,y)||(pt(this,y,!0),it(this,F,Qt).call(this),this.thickness||(this.thickness=_t._defaultThickness),this.color||(this.color=_t._defaultColor||A.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=_t._defaultOpacity)),this.currentPath.push([w,O]),pt(this,S,null),it(this,J,Te).call(this),this.ctx.beginPath(),this.ctx.moveTo(w,O),pt(this,o,()=>{b(this,o)&&(b(this,S)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):it(this,yt,Vt).call(this),this.ctx.lineTo(...b(this,S)),pt(this,S,null),this.ctx.stroke()),window.requestAnimationFrame(b(this,o)))}),window.requestAnimationFrame(b(this,o))},ct=new WeakSet,Qe=function(w,O){const[lt,mt]=this.currentPath.at(-1);w===lt&&O===mt||(this.currentPath.push([w,O]),pt(this,S,[w,O]))},At=new WeakSet,Ze=function(w,O){var Mt;this.ctx.closePath(),pt(this,o,null),w=Math.min(Math.max(w,0),this.canvas.width),O=Math.min(Math.max(O,0),this.canvas.height);const[lt,mt]=this.currentPath.at(-1);(w!==lt||O!==mt)&&this.currentPath.push([w,O]);let Pt;if(this.currentPath.length!==1)Pt=(0,W.fitCurve)(this.currentPath,30,null);else{const Ct=[w,O];Pt=[[Ct,Ct.slice(),Ct.slice(),Ct]]}const xt=it(Mt=_t,v,xe).call(Mt,Pt);this.currentPath.length=0;const Rt=()=>{this.paths.push(Pt),this.bezierPath2D.push(xt),this.rebuild()},wt=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(it(this,E,oe).call(this),it(this,U,le).call(this)),it(this,vt,Zt).call(this))};this.addCommands({cmd:Rt,undo:wt,mustExec:!0})},yt=new WeakSet,Vt=function(){if(this.isEmpty()){it(this,i,ce).call(this);return}it(this,J,Te).call(this);const{canvas:w,ctx:O}=this;O.setTransform(1,0,0,1,0,0),O.clearRect(0,0,w.width,w.height),it(this,i,ce).call(this);for(const lt of this.bezierPath2D)O.stroke(lt)},h=new WeakSet,Pe=function(w){it(this,At,Ze).call(this,w.offsetX,w.offsetY),this.canvas.removeEventListener("pointerleave",b(this,P)),this.canvas.removeEventListener("pointermove",b(this,x)),this.addToAnnotationStorage()},E=new WeakSet,oe=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",_t._l10nPromise.get("editor_ink_canvas_aria_label").then(w=>{var O;return(O=this.canvas)==null?void 0:O.setAttribute("aria-label",w)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},U=new WeakSet,le=function(){pt(this,C,new ResizeObserver(w=>{const O=w[0].contentRect;O.width&&O.height&&this.setDimensions(O.width,O.height)})),b(this,C).observe(this.div)},F=new WeakSet,Qt=function(){if(!b(this,y))return;const[w,O]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*w),this.canvas.height=Math.ceil(this.height*O),it(this,i,ce).call(this)},D=new WeakSet,Ce=function(w,O){const lt=it(this,ft,he).call(this),mt=(w-lt)/b(this,N),Pt=(O-lt)/b(this,_);this.scaleFactor=Math.min(mt,Pt)},i=new WeakSet,ce=function(){const w=it(this,ft,he).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+w,this.translationY*this.scaleFactor+w)},v=new WeakSet,xe=function(w){const O=new Path2D;for(let lt=0,mt=w.length;lt<mt;lt++){const[Pt,xt,Rt,wt]=w[lt];lt===0&&O.moveTo(...Pt),O.bezierCurveTo(xt[0],xt[1],Rt[0],Rt[1],wt[0],wt[1])}return O},H=new WeakSet,tn=function(w,O,lt,mt){const xt=[],Rt=this.thickness/2;let wt,Mt;for(const Ct of this.paths){wt=[],Mt=[];for(let It=0,Ot=Ct.length;It<Ot;It++){const[Lt,Ft,Bt,Ut]=Ct[It],Wt=w*(Lt[0]+O)+Rt,Ht=mt-w*(Lt[1]+lt)-Rt,Nt=w*(Ft[0]+O)+Rt,jt=mt-w*(Ft[1]+lt)-Rt,qt=w*(Bt[0]+O)+Rt,Xt=mt-w*(Bt[1]+lt)-Rt,ne=w*(Ut[0]+O)+Rt,se=mt-w*(Ut[1]+lt)-Rt;It===0&&(wt.push(Wt,Ht),Mt.push(Wt,Ht)),wt.push(Nt,jt,qt,Xt,ne,se),it(this,K,en).call(this,Wt,Ht,Nt,jt,qt,Xt,ne,se,4,Mt)}xt.push({bezier:wt,points:Mt})}return xt},K=new WeakSet,en=function(w,O,lt,mt,Pt,xt,Rt,wt,Mt,Ct){if(it(this,ot,nn).call(this,w,O,lt,mt,Pt,xt,Rt,wt)){Ct.push(Rt,wt);return}for(let It=1;It<Mt-1;It++){const Ot=It/Mt,Lt=1-Ot;let Ft=Ot*w+Lt*lt,Bt=Ot*O+Lt*mt,Ut=Ot*lt+Lt*Pt,Wt=Ot*mt+Lt*xt;const Ht=Ot*Pt+Lt*Rt,Nt=Ot*xt+Lt*wt;Ft=Ot*Ft+Lt*Ut,Bt=Ot*Bt+Lt*Wt,Ut=Ot*Ut+Lt*Ht,Wt=Ot*Wt+Lt*Nt,Ft=Ot*Ft+Lt*Ut,Bt=Ot*Bt+Lt*Wt,Ct.push(Ft,Bt)}Ct.push(Rt,wt)},ot=new WeakSet,nn=function(w,O,lt,mt,Pt,xt,Rt,wt){const Ct=(3*lt-2*w-Rt)**2,It=(3*mt-2*O-wt)**2,Ot=(3*Pt-w-2*Rt)**2,Lt=(3*xt-O-2*wt)**2;return Math.max(Ct,Ot)+Math.max(It,Lt)<=10},st=new WeakSet,we=function(){let w=1/0,O=-1/0,lt=1/0,mt=-1/0;for(const Pt of this.paths)for(const[xt,Rt,wt,Mt]of Pt){const Ct=c.Util.bezierBoundingBox(...xt,...Rt,...wt,...Mt);w=Math.min(w,Ct[0]),lt=Math.min(lt,Ct[1]),O=Math.max(O,Ct[2]),mt=Math.max(mt,Ct[3])}return[w,lt,O,mt]},ft=new WeakSet,he=function(){return b(this,a)?Math.ceil(this.thickness*this.parentScale):0},vt=new WeakSet,Zt=function(w=!1){if(this.isEmpty())return;if(!b(this,a)){it(this,yt,Vt).call(this);return}const O=it(this,st,we).call(this),lt=it(this,ft,he).call(this);pt(this,N,Math.max(Z,O[2]-O[0])),pt(this,_,Math.max(Z,O[3]-O[1]));const mt=Math.ceil(lt+b(this,N)*this.scaleFactor),Pt=Math.ceil(lt+b(this,_)*this.scaleFactor),[xt,Rt]=this.parentDimensions;this.width=mt/xt,this.height=Pt/Rt,pt(this,k,mt/Pt),it(this,Y,Re).call(this);const wt=this.translationX,Mt=this.translationY;this.translationX=-O[0],this.translationY=-O[1],it(this,F,Qt).call(this),it(this,yt,Vt).call(this),pt(this,m,mt),pt(this,t,Pt),this.setDims(mt,Pt);const Ct=w?lt/this.scaleFactor/2:0;this.translate(wt-this.translationX-Ct,Mt-this.translationY-Ct)},Y=new WeakSet,Re=function(){const{style:w}=this.div;b(this,k)>=1?(w.minHeight=`${Z}px`,w.minWidth=`${Math.round(b(this,k)*Z)}px`):(w.minWidth=`${Z}px`,w.minHeight=`${Math.round(Z/b(this,k))}px`)},Q(_t,v),Dt(_t,"_defaultColor",null),Dt(_t,"_defaultOpacity",1),Dt(_t,"_defaultThickness",1),Dt(_t,"_l10nPromise"),Dt(_t,"_type","ink");let L=_t;r.InkEditor=L},(j,r,B)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.fitCurve=void 0;const c=B(31);r.fitCurve=c},j=>{function r(p,u,a){if(!Array.isArray(p))throw new TypeError("First argument should be an array");if(p.forEach(m=>{if(!Array.isArray(m)||m.some(t=>typeof t!="number")||m.length!==p[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),p=p.filter((m,t)=>t===0||!m.every((o,l)=>o===p[t-1][l])),p.length<2)return[];const y=p.length,S=N(p[1],p[0]),C=N(p[y-2],p[y-1]);return B(p,S,C,u,a)}function B(p,u,a,y,S){var m,t,o,l,s,d,R,n,I,$,z,J,tt;if(p.length===2)return J=x.vectorLen(x.subtract(p[0],p[1]))/3,m=[p[0],x.addArrays(p[0],x.mulItems(u,J)),x.addArrays(p[1],x.mulItems(a,J)),p[1]],[m];if(t=Z(p),[m,l,d]=c(p,t,t,u,a,S),l===0||l<y)return[m];if(l<y*y)for(o=t,s=l,R=d,tt=0;tt<20;tt++){if(o=W(m,p,o),[m,l,d]=c(p,t,o,u,a,S),l<y)return[m];if(d===R){let ht=l/s;if(ht>.9999&&ht<1.0001)break}s=l,R=d}return z=[],n=x.subtract(p[d-1],p[d+1]),n.every(ht=>ht===0)&&(n=x.subtract(p[d-1],p[d]),[n[0],n[1]]=[-n[1],n[0]]),I=x.normalize(n),$=x.mulItems(I,-1),z=z.concat(B(p.slice(0,d+1),u,I,y,S)),z=z.concat(B(p.slice(d),$,a,y,S)),z}function c(p,u,a,y,S,C){var m,t,o;return m=A(p,a,y,S),[t,o]=L(p,m,u),C&&C({bez:m,points:p,params:u,maxErr:t,maxPoint:o}),[m,t,o]}function A(p,u,a,y){var S,C,m,t,o,l,s,d,R,n,I,$,z,J,tt,ht,rt,ct=p[0],gt=p[p.length-1];for(S=[ct,null,null,gt],C=x.zeros_Xx2x2(u.length),z=0,J=u.length;z<J;z++)ht=u[z],rt=1-ht,m=C[z],m[0]=x.mulItems(a,3*ht*(rt*rt)),m[1]=x.mulItems(y,3*rt*(ht*ht));for(t=[[0,0],[0,0]],o=[0,0],z=0,J=p.length;z<J;z++)ht=u[z],m=C[z],t[0][0]+=x.dot(m[0],m[0]),t[0][1]+=x.dot(m[0],m[1]),t[1][0]+=x.dot(m[0],m[1]),t[1][1]+=x.dot(m[1],m[1]),tt=x.subtract(p[z],P.q([ct,ct,gt,gt],ht)),o[0]+=x.dot(m[0],tt),o[1]+=x.dot(m[1],tt);return l=t[0][0]*t[1][1]-t[1][0]*t[0][1],s=t[0][0]*o[1]-t[1][0]*o[0],d=o[0]*t[1][1]-o[1]*t[0][1],R=l===0?0:d/l,n=l===0?0:s/l,$=x.vectorLen(x.subtract(ct,gt)),I=1e-6*$,R<I||n<I?(S[1]=x.addArrays(ct,x.mulItems(a,$/3)),S[2]=x.addArrays(gt,x.mulItems(y,$/3))):(S[1]=x.addArrays(ct,x.mulItems(a,R)),S[2]=x.addArrays(gt,x.mulItems(y,n))),S}function W(p,u,a){return a.map((y,S)=>q(p,u[S],y))}function q(p,u,a){var y=x.subtract(P.q(p,a),u),S=P.qprime(p,a),C=x.mulMatrix(y,S),m=x.sum(x.squareItems(S))+2*x.mulMatrix(y,P.qprimeprime(p,a));return m===0?a:a-C/m}function Z(p){var u=[],a,y,S;return p.forEach((C,m)=>{a=m?y+x.vectorLen(x.subtract(C,S)):0,u.push(a),y=a,S=C}),u=u.map(C=>C/y),u}function L(p,u,a){var y,S,C,m,t,o,l,s;S=0,C=Math.floor(p.length/2);const d=k(u,10);for(t=0,o=p.length;t<o;t++)l=p[t],s=_(u,a[t],d,10),m=x.subtract(P.q(u,s),l),y=m[0]*m[0]+m[1]*m[1],y>S&&(S=y,C=t);return[S,C]}var k=function(p,u){for(var a,y=[0],S=p[0],C=0,m=1;m<=u;m++)a=P.q(p,m/u),C+=x.vectorLen(x.subtract(a,S)),y.push(C),S=a;return y=y.map(t=>t/C),y};function _(p,u,a,y){if(u<0)return 0;if(u>1)return 1;for(var S,C,m,t,o,l=1;l<=y;l++)if(u<=a[l]){t=(l-1)/y,m=l/y,C=a[l-1],S=a[l],o=(u-C)/(S-C)*(m-t)+t;break}return o}function N(p,u){return x.normalize(x.subtract(p,u))}class x{static zeros_Xx2x2(u){for(var a=[];u--;)a.push([0,0]);return a}static mulItems(u,a){return u.map(y=>y*a)}static mulMatrix(u,a){return u.reduce((y,S,C)=>y+S*a[C],0)}static subtract(u,a){return u.map((y,S)=>y-a[S])}static addArrays(u,a){return u.map((y,S)=>y+a[S])}static addItems(u,a){return u.map(y=>y+a)}static sum(u){return u.reduce((a,y)=>a+y)}static dot(u,a){return x.mulMatrix(u,a)}static vectorLen(u){return Math.hypot(...u)}static divItems(u,a){return u.map(y=>y/a)}static squareItems(u){return u.map(a=>a*a)}static normalize(u){return this.divItems(u,this.vectorLen(u))}}class P{static q(u,a){var y=1-a,S=x.mulItems(u[0],y*y*y),C=x.mulItems(u[1],3*y*y*a),m=x.mulItems(u[2],3*y*a*a),t=x.mulItems(u[3],a*a*a);return x.addArrays(x.addArrays(S,C),x.addArrays(m,t))}static qprime(u,a){var y=1-a,S=x.mulItems(x.subtract(u[1],u[0]),3*y*y),C=x.mulItems(x.subtract(u[2],u[1]),6*y*a),m=x.mulItems(x.subtract(u[3],u[2]),3*a*a);return x.addArrays(x.addArrays(S,C),m)}static qprimeprime(u,a){return x.addArrays(x.mulItems(x.addArrays(x.subtract(u[2],x.mulItems(u[1],2)),u[0]),6*(1-a)),x.mulItems(x.addArrays(x.subtract(u[3],x.mulItems(u[2],2)),u[1]),6*a))}}j.exports=r,j.exports.fitCubic=B,j.exports.createTangent=N},(j,r,B)=>{var yt,Yt,h,sn,G,ke,X,Fe;Object.defineProperty(r,"__esModule",{value:!0}),r.AnnotationLayer=void 0;var c=B(1),A=B(6),W=B(3),q=B(33),Z=B(34);const L=1e3,k=9,_=new WeakSet;function N(D){return{width:D[2]-D[0],height:D[3]-D[1]}}class x{static create(e){switch(e.data.annotationType){case c.AnnotationType.LINK:return new p(e);case c.AnnotationType.TEXT:return new u(e);case c.AnnotationType.WIDGET:switch(e.data.fieldType){case"Tx":return new y(e);case"Btn":return e.data.radioButton?new C(e):e.data.checkBox?new S(e):new m(e);case"Ch":return new t(e)}return new a(e);case c.AnnotationType.POPUP:return new o(e);case c.AnnotationType.FREETEXT:return new s(e);case c.AnnotationType.LINE:return new d(e);case c.AnnotationType.SQUARE:return new R(e);case c.AnnotationType.CIRCLE:return new n(e);case c.AnnotationType.POLYLINE:return new I(e);case c.AnnotationType.CARET:return new z(e);case c.AnnotationType.INK:return new J(e);case c.AnnotationType.POLYGON:return new $(e);case c.AnnotationType.HIGHLIGHT:return new tt(e);case c.AnnotationType.UNDERLINE:return new ht(e);case c.AnnotationType.SQUIGGLY:return new rt(e);case c.AnnotationType.STRIKEOUT:return new ct(e);case c.AnnotationType.STAMP:return new gt(e);case c.AnnotationType.FILEATTACHMENT:return new At(e);default:return new P(e)}}}class P{constructor(e,{isRenderable:i=!1,ignoreBorder:g=!1,createQuadrilaterals:v=!1}={}){this.isRenderable=i,this.data=e.data,this.layer=e.layer,this.page=e.page,this.viewport=e.viewport,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,i&&(this.container=this._createContainer(g)),v&&(this.quadrilaterals=this._createQuadrilaterals(g))}_createContainer(e=!1){const{data:i,page:g,viewport:v}=this,T=document.createElement("section");T.setAttribute("data-annotation-id",i.id),i.noRotate&&T.classList.add("norotate");const{pageWidth:H,pageHeight:nt,pageX:K,pageY:at}=v.rawDims,{width:ot,height:et}=N(i.rect),st=c.Util.normalizeRect([i.rect[0],g.view[3]-i.rect[1]+g.view[1],i.rect[2],g.view[3]-i.rect[3]+g.view[1]]);if(!e&&i.borderStyle.width>0){T.style.borderWidth=`${i.borderStyle.width}px`;const ft=i.borderStyle.horizontalCornerRadius,Et=i.borderStyle.verticalCornerRadius;if(ft>0||Et>0){const Tt=`calc(${ft}px * var(--scale-factor)) / calc(${Et}px * var(--scale-factor))`;T.style.borderRadius=Tt}else if(this instanceof C){const Tt=`calc(${ot}px * var(--scale-factor)) / calc(${et}px * var(--scale-factor))`;T.style.borderRadius=Tt}switch(i.borderStyle.style){case c.AnnotationBorderStyleType.SOLID:T.style.borderStyle="solid";break;case c.AnnotationBorderStyleType.DASHED:T.style.borderStyle="dashed";break;case c.AnnotationBorderStyleType.BEVELED:(0,c.warn)("Unimplemented border style: beveled");break;case c.AnnotationBorderStyleType.INSET:(0,c.warn)("Unimplemented border style: inset");break;case c.AnnotationBorderStyleType.UNDERLINE:T.style.borderBottomStyle="solid";break}const vt=i.borderColor||null;vt?T.style.borderColor=c.Util.makeHexColor(vt[0]|0,vt[1]|0,vt[2]|0):T.style.borderWidth=0}T.style.left=`${100*(st[0]-K)/H}%`,T.style.top=`${100*(st[1]-at)/nt}%`;const{rotation:ut}=i;return i.hasOwnCanvas||ut===0?(T.style.width=`${100*ot/H}%`,T.style.height=`${100*et/nt}%`):this.setRotation(ut,T),T}setRotation(e,i=this.container){const{pageWidth:g,pageHeight:v}=this.viewport.rawDims,{width:T,height:H}=N(this.data.rect);let nt,K;e%180===0?(nt=100*T/g,K=100*H/v):(nt=100*H/g,K=100*T/v),i.style.width=`${nt}%`,i.style.height=`${K}%`,i.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(i,g,v)=>{const T=v.detail[i];v.target.style[g]=q.ColorConverters[`${T[0]}_HTML`](T.slice(1))};return(0,c.shadow)(this,"_commonActions",{display:i=>{const g=i.detail.display%2===1;this.container.style.visibility=g?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:g,print:i.detail.display===0||i.detail.display===3})},print:i=>{this.annotationStorage.setValue(this.data.id,{print:i.detail.print})},hidden:i=>{this.container.style.visibility=i.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:i.detail.hidden})},focus:i=>{setTimeout(()=>i.target.focus({preventScroll:!1}),0)},userName:i=>{i.target.title=i.detail.userName},readonly:i=>{i.detail.readonly?i.target.setAttribute("readonly",""):i.target.removeAttribute("readonly")},required:i=>{this._setRequired(i.target,i.detail.required)},bgColor:i=>{e("bgColor","backgroundColor",i)},fillColor:i=>{e("fillColor","backgroundColor",i)},fgColor:i=>{e("fgColor","color",i)},textColor:i=>{e("textColor","color",i)},borderColor:i=>{e("borderColor","borderColor",i)},strokeColor:i=>{e("strokeColor","borderColor",i)},rotation:i=>{const g=i.detail.rotation;this.setRotation(g),this.annotationStorage.setValue(this.data.id,{rotation:g})}})}_dispatchEventFromSandbox(e,i){const g=this._commonActions;for(const v of Object.keys(i.detail)){const T=e[v]||g[v];T==null||T(i)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const i=this.annotationStorage.getRawValue(this.data.id);if(!i)return;const g=this._commonActions;for(const[v,T]of Object.entries(i)){const H=g[v];if(H){const nt={detail:{[v]:T},target:e};H(nt),delete i[v]}}}_createQuadrilaterals(e=!1){if(!this.data.quadPoints)return null;const i=[],g=this.data.rect;for(const v of this.data.quadPoints)this.data.rect=[v[2].x,v[2].y,v[1].x,v[1].y],i.push(this._createContainer(e));return this.data.rect=g,i}_createPopup(e,i){let g=this.container;this.quadrilaterals&&(e||(e=this.quadrilaterals),g=this.quadrilaterals[0]),e||(e=document.createElement("div"),e.classList.add("popupTriggerArea"),g.append(e));const T=new l({container:g,trigger:e,color:i.color,titleObj:i.titleObj,modificationDate:i.modificationDate,contentsObj:i.contentsObj,richText:i.richText,hideWrapper:!0}).render();T.style.left="100%",g.append(T)}_renderQuadrilaterals(e){for(const i of this.quadrilaterals)i.classList.add(e);return this.quadrilaterals}render(){(0,c.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,i=null){const g=[];if(this._fieldObjects){const v=this._fieldObjects[e];if(v)for(const{page:T,id:H,exportValues:nt}of v){if(T===-1||H===i)continue;const K=typeof nt=="string"?nt:null,at=document.querySelector(`[data-element-id="${H}"]`);if(at&&!_.has(at)){(0,c.warn)(`_getElementsByName - element not allowed: ${H}`);continue}g.push({id:H,exportValue:K,domElement:at})}return g}for(const v of document.getElementsByName(e)){const{exportValue:T}=v,H=v.getAttribute("data-element-id");H!==i&&_.has(v)&&g.push({id:H,exportValue:T,domElement:v})}return g}}class p extends P{constructor(i,g=null){super(i,{isRenderable:!0,ignoreBorder:!!(g!=null&&g.ignoreBorder),createQuadrilaterals:!0});Q(this,yt);Q(this,h);this.isTooltipOnly=i.data.isTooltipOnly}render(){const{data:i,linkService:g}=this,v=document.createElement("a");v.setAttribute("data-element-id",i.id);let T=!1;return i.url?(g.addLinkAttributes(v,i.url,i.newWindow),T=!0):i.action?(this._bindNamedAction(v,i.action),T=!0):i.attachment?(this._bindAttachment(v,i.attachment),T=!0):i.setOCGState?(it(this,h,sn).call(this,v,i.setOCGState),T=!0):i.dest?(this._bindLink(v,i.dest),T=!0):(i.actions&&(i.actions.Action||i.actions["Mouse Up"]||i.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(v,i),T=!0),i.resetForm?(this._bindResetFormAction(v,i.resetForm),T=!0):this.isTooltipOnly&&!T&&(this._bindLink(v,""),T=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((H,nt)=>{const K=nt===0?v:v.cloneNode();return H.append(K),H}):(this.container.classList.add("linkAnnotation"),T&&this.container.append(v),this.container)}_bindLink(i,g){i.href=this.linkService.getDestinationHash(g),i.onclick=()=>(g&&this.linkService.goToDestination(g),!1),(g||g==="")&&it(this,yt,Yt).call(this)}_bindNamedAction(i,g){i.href=this.linkService.getAnchorUrl(""),i.onclick=()=>(this.linkService.executeNamedAction(g),!1),it(this,yt,Yt).call(this)}_bindAttachment(i,g){i.href=this.linkService.getAnchorUrl(""),i.onclick=()=>{var v;return(v=this.downloadManager)==null||v.openOrDownloadData(this.container,g.content,g.filename),!1},it(this,yt,Yt).call(this)}_bindJSAction(i,g){i.href=this.linkService.getAnchorUrl("");const v=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const T of Object.keys(g.actions)){const H=v.get(T);H&&(i[H]=()=>{var nt;return(nt=this.linkService.eventBus)==null||nt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:g.id,name:T}}),!1})}i.onclick||(i.onclick=()=>!1),it(this,yt,Yt).call(this)}_bindResetFormAction(i,g){const v=i.onclick;if(v||(i.href=this.linkService.getAnchorUrl("")),it(this,yt,Yt).call(this),!this._fieldObjects){(0,c.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),v||(i.onclick=()=>!1);return}i.onclick=()=>{var et;v==null||v();const{fields:T,refs:H,include:nt}=g,K=[];if(T.length!==0||H.length!==0){const st=new Set(H);for(const ut of T){const ft=this._fieldObjects[ut]||[];for(const{id:Et}of ft)st.add(Et)}for(const ut of Object.values(this._fieldObjects))for(const ft of ut)st.has(ft.id)===nt&&K.push(ft)}else for(const st of Object.values(this._fieldObjects))K.push(...st);const at=this.annotationStorage,ot=[];for(const st of K){const{id:ut}=st;switch(ot.push(ut),st.type){case"text":{const Et=st.defaultValue||"";at.setValue(ut,{value:Et});break}case"checkbox":case"radiobutton":{const Et=st.defaultValue===st.exportValues;at.setValue(ut,{value:Et});break}case"combobox":case"listbox":{const Et=st.defaultValue||"";at.setValue(ut,{value:Et});break}default:continue}const ft=document.querySelector(`[data-element-id="${ut}"]`);if(ft){if(!_.has(ft)){(0,c.warn)(`_bindResetFormAction - element not allowed: ${ut}`);continue}}else continue;ft.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((et=this.linkService.eventBus)==null||et.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:ot,name:"ResetForm"}})),!1}}}yt=new WeakSet,Yt=function(){this.container.setAttribute("data-internal-link","")},h=new WeakSet,sn=function(i,g){i.href=this.linkService.getAnchorUrl(""),i.onclick=()=>(this.linkService.executeSetOCGState(g),!1),it(this,yt,Yt).call(this)};class u extends P{constructor(e){var g,v,T;const i=!!(e.data.hasPopup||(g=e.data.titleObj)!=null&&g.str||(v=e.data.contentsObj)!=null&&v.str||(T=e.data.richText)!=null&&T.str);super(e,{isRenderable:i})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.alt="[{{type}} Annotation]",e.dataset.l10nId="text_annotation_type",e.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(e,this.data),this.container.append(e),this.container}}class a extends P{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(e){var i;this.data.hasOwnCanvas&&(((i=e.previousSibling)==null?void 0:i.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){const{isWin:i,isMac:g}=c.FeatureTest.platform;return i&&e.ctrlKey||g&&e.metaKey}_setEventListener(e,i,g,v){i.includes("mouse")?e.addEventListener(i,T=>{var H;(H=this.linkService.eventBus)==null||H.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:g,value:v(T),shift:T.shiftKey,modifier:this._getKeyModifier(T)}})}):e.addEventListener(i,T=>{var H;(H=this.linkService.eventBus)==null||H.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:g,value:v(T)}})})}_setEventListeners(e,i,g){var v;for(const[T,H]of i)(H==="Action"||(v=this.data.actions)!=null&&v[H])&&this._setEventListener(e,T,H,g)}_setBackgroundColor(e){const i=this.data.backgroundColor||null;e.style.backgroundColor=i===null?"transparent":c.Util.makeHexColor(i[0],i[1],i[2])}_setTextStyle(e){const i=["left","center","right"],{fontColor:g}=this.data.defaultAppearanceData,v=this.data.defaultAppearanceData.fontSize||k,T=e.style;let H;const nt=2,K=at=>Math.round(10*at)/10;if(this.data.multiLine){const at=Math.abs(this.data.rect[3]-this.data.rect[1]-nt),ot=Math.round(at/(c.LINE_FACTOR*v))||1,et=at/ot;H=Math.min(v,K(et/c.LINE_FACTOR))}else{const at=Math.abs(this.data.rect[3]-this.data.rect[1]-nt);H=Math.min(v,K(at/c.LINE_FACTOR))}T.fontSize=`calc(${H}px * var(--scale-factor))`,T.color=c.Util.makeHexColor(g[0],g[1],g[2]),this.data.textAlignment!==null&&(T.textAlign=i[this.data.textAlignment])}_setRequired(e,i){i?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",i)}}class y extends a{constructor(e){const i=e.renderForms||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:i})}setPropertyOnSiblings(e,i,g,v){const T=this.annotationStorage;for(const H of this._getElementsByName(e.name,e.id))H.domElement&&(H.domElement[i]=g),T.setValue(H.id,{[v]:g})}render(){var v;const e=this.annotationStorage,i=this.data.id;this.container.classList.add("textWidgetAnnotation");let g=null;if(this.renderForms){const T=e.getValue(i,{value:this.data.fieldValue});let H=T.formattedValue||T.value||"";const nt=e.getValue(i,{charLimit:this.data.maxLen}).charLimit;nt&&H.length>nt&&(H=H.slice(0,nt));const K={userValue:H,formattedValue:null,lastCommittedValue:null,commitKey:1};this.data.multiLine?(g=document.createElement("textarea"),g.textContent=H,this.data.doNotScroll&&(g.style.overflowY="hidden")):(g=document.createElement("input"),g.type="text",g.setAttribute("value",H),this.data.doNotScroll&&(g.style.overflowX="hidden")),this.data.hasOwnCanvas&&(g.hidden=!0),_.add(g),g.setAttribute("data-element-id",i),g.disabled=this.data.readOnly,g.name=this.data.fieldName,g.tabIndex=L,this._setRequired(g,this.data.required),nt&&(g.maxLength=nt),g.addEventListener("input",ot=>{e.setValue(i,{value:ot.target.value}),this.setPropertyOnSiblings(g,"value",ot.target.value,"value")}),g.addEventListener("resetform",ot=>{const et=this.data.defaultFieldValue??"";g.value=K.userValue=et,K.formattedValue=null});let at=ot=>{const{formattedValue:et}=K;et!=null&&(ot.target.value=et),ot.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){g.addEventListener("focus",et=>{const{target:st}=et;K.userValue&&(st.value=K.userValue),K.lastCommittedValue=st.value,K.commitKey=1}),g.addEventListener("updatefromsandbox",et=>{this.showElementAndHideCanvas(et.target);const st={value(ut){K.userValue=ut.detail.value??"",e.setValue(i,{value:K.userValue.toString()}),ut.target.value=K.userValue},formattedValue(ut){const{formattedValue:ft}=ut.detail;K.formattedValue=ft,ft!=null&&ut.target!==document.activeElement&&(ut.target.value=ft),e.setValue(i,{formattedValue:ft})},selRange(ut){ut.target.setSelectionRange(...ut.detail.selRange)},charLimit:ut=>{var Tt;const{charLimit:ft}=ut.detail,{target:Et}=ut;if(ft===0){Et.removeAttribute("maxLength");return}Et.setAttribute("maxLength",ft);let vt=K.userValue;!vt||vt.length<=ft||(vt=vt.slice(0,ft),Et.value=K.userValue=vt,e.setValue(i,{value:vt}),(Tt=this.linkService.eventBus)==null||Tt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:vt,willCommit:!0,commitKey:1,selStart:Et.selectionStart,selEnd:Et.selectionEnd}}))}};this._dispatchEventFromSandbox(st,et)}),g.addEventListener("keydown",et=>{var ft;K.commitKey=1;let st=-1;if(et.key==="Escape"?st=0:et.key==="Enter"&&!this.data.multiLine?st=2:et.key==="Tab"&&(K.commitKey=3),st===-1)return;const{value:ut}=et.target;K.lastCommittedValue!==ut&&(K.lastCommittedValue=ut,K.userValue=ut,(ft=this.linkService.eventBus)==null||ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:ut,willCommit:!0,commitKey:st,selStart:et.target.selectionStart,selEnd:et.target.selectionEnd}}))});const ot=at;at=null,g.addEventListener("blur",et=>{var ut;if(!et.relatedTarget)return;const{value:st}=et.target;K.userValue=st,K.lastCommittedValue!==st&&((ut=this.linkService.eventBus)==null||ut.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:st,willCommit:!0,commitKey:K.commitKey,selStart:et.target.selectionStart,selEnd:et.target.selectionEnd}})),ot(et)}),(v=this.data.actions)!=null&&v.Keystroke&&g.addEventListener("beforeinput",et=>{var bt;K.lastCommittedValue=null;const{data:st,target:ut}=et,{value:ft,selectionStart:Et,selectionEnd:vt}=ut;let Tt=Et,Y=vt;switch(et.inputType){case"deleteWordBackward":{const _t=ft.substring(0,Et).match(/\w*[^\w]*$/);_t&&(Tt-=_t[0].length);break}case"deleteWordForward":{const _t=ft.substring(Et).match(/^[^\w]*\w*/);_t&&(Y+=_t[0].length);break}case"deleteContentBackward":Et===vt&&(Tt-=1);break;case"deleteContentForward":Et===vt&&(Y+=1);break}et.preventDefault(),(bt=this.linkService.eventBus)==null||bt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:ft,change:st||"",willCommit:!1,selStart:Tt,selEnd:Y}})}),this._setEventListeners(g,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],et=>et.target.value)}if(at&&g.addEventListener("blur",at),this.data.comb){const et=(this.data.rect[2]-this.data.rect[0])/nt;g.classList.add("comb"),g.style.letterSpacing=`calc(${et}px * var(--scale-factor) - 1ch)`}}else g=document.createElement("div"),g.textContent=this.data.fieldValue,g.style.verticalAlign="middle",g.style.display="table-cell";return this._setTextStyle(g),this._setBackgroundColor(g),this._setDefaultPropertiesFromJS(g),this.container.append(g),this.container}}class S extends a{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,i=this.data,g=i.id;let v=e.getValue(g,{value:i.exportValue===i.fieldValue}).value;typeof v=="string"&&(v=v!=="Off",e.setValue(g,{value:v})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const T=document.createElement("input");return _.add(T),T.setAttribute("data-element-id",g),T.disabled=i.readOnly,this._setRequired(T,this.data.required),T.type="checkbox",T.name=i.fieldName,v&&T.setAttribute("checked",!0),T.setAttribute("exportValue",i.exportValue),T.tabIndex=L,T.addEventListener("change",H=>{const{name:nt,checked:K}=H.target;for(const at of this._getElementsByName(nt,g)){const ot=K&&at.exportValue===i.exportValue;at.domElement&&(at.domElement.checked=ot),e.setValue(at.id,{value:ot})}e.setValue(g,{value:K})}),T.addEventListener("resetform",H=>{const nt=i.defaultFieldValue||"Off";H.target.checked=nt===i.exportValue}),this.enableScripting&&this.hasJSActions&&(T.addEventListener("updatefromsandbox",H=>{const nt={value(K){K.target.checked=K.detail.value!=="Off",e.setValue(g,{value:K.target.checked})}};this._dispatchEventFromSandbox(nt,H)}),this._setEventListeners(T,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],H=>H.target.checked)),this._setBackgroundColor(T),this._setDefaultPropertiesFromJS(T),this.container.append(T),this.container}}class C extends a{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,i=this.data,g=i.id;let v=e.getValue(g,{value:i.fieldValue===i.buttonValue}).value;typeof v=="string"&&(v=v!==i.buttonValue,e.setValue(g,{value:v}));const T=document.createElement("input");if(_.add(T),T.setAttribute("data-element-id",g),T.disabled=i.readOnly,this._setRequired(T,this.data.required),T.type="radio",T.name=i.fieldName,v&&T.setAttribute("checked",!0),T.tabIndex=L,T.addEventListener("change",H=>{const{name:nt,checked:K}=H.target;for(const at of this._getElementsByName(nt,g))e.setValue(at.id,{value:!1});e.setValue(g,{value:K})}),T.addEventListener("resetform",H=>{const nt=i.defaultFieldValue;H.target.checked=nt!=null&&nt===i.buttonValue}),this.enableScripting&&this.hasJSActions){const H=i.buttonValue;T.addEventListener("updatefromsandbox",nt=>{const K={value:at=>{const ot=H===at.detail.value;for(const et of this._getElementsByName(at.target.name)){const st=ot&&et.id===g;et.domElement&&(et.domElement.checked=st),e.setValue(et.id,{value:st})}}};this._dispatchEventFromSandbox(K,nt)}),this._setEventListeners(T,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],nt=>nt.target.checked)}return this._setBackgroundColor(T),this._setDefaultPropertiesFromJS(T),this.container.append(T),this.container}}class m extends p{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(e.title=this.data.alternativeText);const i=e.lastChild;return this.enableScripting&&this.hasJSActions&&i&&(this._setDefaultPropertiesFromJS(i),i.addEventListener("updatefromsandbox",g=>{this._dispatchEventFromSandbox({},g)})),e}}class t extends a{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,i=this.data.id,g=e.getValue(i,{value:this.data.fieldValue}),v=document.createElement("select");_.add(v),v.setAttribute("data-element-id",i),v.disabled=this.data.readOnly,this._setRequired(v,this.data.required),v.name=this.data.fieldName,v.tabIndex=L;let T=this.data.combo&&this.data.options.length>0;this.data.combo||(v.size=this.data.options.length,this.data.multiSelect&&(v.multiple=!0)),v.addEventListener("resetform",ot=>{const et=this.data.defaultFieldValue;for(const st of v.options)st.selected=st.value===et});for(const ot of this.data.options){const et=document.createElement("option");et.textContent=ot.displayValue,et.value=ot.exportValue,g.value.includes(ot.exportValue)&&(et.setAttribute("selected",!0),T=!1),v.append(et)}let H=null;if(T){const ot=document.createElement("option");ot.value=" ",ot.setAttribute("hidden",!0),ot.setAttribute("selected",!0),v.prepend(ot),H=()=>{ot.remove(),v.removeEventListener("input",H),H=null},v.addEventListener("input",H)}const nt=ot=>{const et=ot?"value":"textContent",{options:st,multiple:ut}=v;return ut?Array.prototype.filter.call(st,ft=>ft.selected).map(ft=>ft[et]):st.selectedIndex===-1?null:st[st.selectedIndex][et]};let K=nt(!1);const at=ot=>{const et=ot.target.options;return Array.prototype.map.call(et,st=>({displayValue:st.textContent,exportValue:st.value}))};return this.enableScripting&&this.hasJSActions?(v.addEventListener("updatefromsandbox",ot=>{const et={value(st){H==null||H();const ut=st.detail.value,ft=new Set(Array.isArray(ut)?ut:[ut]);for(const Et of v.options)Et.selected=ft.has(Et.value);e.setValue(i,{value:nt(!0)}),K=nt(!1)},multipleSelection(st){v.multiple=!0},remove(st){const ut=v.options,ft=st.detail.remove;ut[ft].selected=!1,v.remove(ft),ut.length>0&&Array.prototype.findIndex.call(ut,vt=>vt.selected)===-1&&(ut[0].selected=!0),e.setValue(i,{value:nt(!0),items:at(st)}),K=nt(!1)},clear(st){for(;v.length!==0;)v.remove(0);e.setValue(i,{value:null,items:[]}),K=nt(!1)},insert(st){const{index:ut,displayValue:ft,exportValue:Et}=st.detail.insert,vt=v.children[ut],Tt=document.createElement("option");Tt.textContent=ft,Tt.value=Et,vt?vt.before(Tt):v.append(Tt),e.setValue(i,{value:nt(!0),items:at(st)}),K=nt(!1)},items(st){const{items:ut}=st.detail;for(;v.length!==0;)v.remove(0);for(const ft of ut){const{displayValue:Et,exportValue:vt}=ft,Tt=document.createElement("option");Tt.textContent=Et,Tt.value=vt,v.append(Tt)}v.options.length>0&&(v.options[0].selected=!0),e.setValue(i,{value:nt(!0),items:at(st)}),K=nt(!1)},indices(st){const ut=new Set(st.detail.indices);for(const ft of st.target.options)ft.selected=ut.has(ft.index);e.setValue(i,{value:nt(!0)}),K=nt(!1)},editable(st){st.target.disabled=!st.detail.editable}};this._dispatchEventFromSandbox(et,ot)}),v.addEventListener("input",ot=>{var st;const et=nt(!0);e.setValue(i,{value:et}),ot.preventDefault(),(st=this.linkService.eventBus)==null||st.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:K,changeEx:et,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(v,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],ot=>ot.target.value)):v.addEventListener("input",function(ot){e.setValue(i,{value:nt(!0)})}),this.data.combo&&this._setTextStyle(v),this._setBackgroundColor(v),this._setDefaultPropertiesFromJS(v),this.container.append(v),this.container}}const E=class E extends P{constructor(e){var v,T,H;const{data:i}=e,g=!E.IGNORE_TYPES.has(i.parentType)&&!!((v=i.titleObj)!=null&&v.str||(T=i.contentsObj)!=null&&T.str||(H=i.richText)!=null&&H.str);super(e,{isRenderable:g})}render(){this.container.classList.add("popupAnnotation");const e=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(e.length===0)return this.container;const i=new l({container:this.container,trigger:Array.from(e),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),g=this.page,v=c.Util.normalizeRect([this.data.parentRect[0],g.view[3]-this.data.parentRect[1]+g.view[1],this.data.parentRect[2],g.view[3]-this.data.parentRect[3]+g.view[1]]),T=v[0]+this.data.parentRect[2]-this.data.parentRect[0],H=v[1],{pageWidth:nt,pageHeight:K,pageX:at,pageY:ot}=this.viewport.rawDims;return this.container.style.left=`${100*(T-at)/nt}%`,this.container.style.top=`${100*(H-ot)/K}%`,this.container.append(i.render()),this.container}};Dt(E,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));let o=E;class l{constructor(e){this.container=e.container,this.trigger=e.trigger,this.color=e.color,this.titleObj=e.titleObj,this.modificationDate=e.modificationDate,this.contentsObj=e.contentsObj,this.richText=e.richText,this.hideWrapper=e.hideWrapper||!1,this.pinned=!1}render(){var nt,K;const i=document.createElement("div");i.classList.add("popupWrapper"),this.hideElement=this.hideWrapper?i:this.container,this.hideElement.hidden=!0;const g=document.createElement("div");g.classList.add("popup");const v=this.color;if(v){const at=.7*(255-v[0])+v[0],ot=.7*(255-v[1])+v[1],et=.7*(255-v[2])+v[2];g.style.backgroundColor=c.Util.makeHexColor(at|0,ot|0,et|0)}const T=document.createElement("h1");T.dir=this.titleObj.dir,T.textContent=this.titleObj.str,g.append(T);const H=A.PDFDateString.toDateObject(this.modificationDate);if(H){const at=document.createElement("span");at.classList.add("popupDate"),at.textContent="{{date}}, {{time}}",at.dataset.l10nId="annotation_date_string",at.dataset.l10nArgs=JSON.stringify({date:H.toLocaleDateString(),time:H.toLocaleTimeString()}),g.append(at)}if((nt=this.richText)!=null&&nt.str&&(!((K=this.contentsObj)!=null&&K.str)||this.contentsObj.str===this.richText.str))Z.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:g}),g.lastChild.classList.add("richText","popupContent");else{const at=this._formatContents(this.contentsObj);g.append(at)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const at of this.trigger)at.addEventListener("click",this._toggle.bind(this)),at.addEventListener("mouseover",this._show.bind(this,!1)),at.addEventListener("mouseout",this._hide.bind(this,!1));return g.addEventListener("click",this._hide.bind(this,!0)),i.append(g),i}_formatContents({str:e,dir:i}){const g=document.createElement("p");g.classList.add("popupContent"),g.dir=i;const v=e.split(/(?:\r\n?|\n)/);for(let T=0,H=v.length;T<H;++T){const nt=v[T];g.append(document.createTextNode(nt)),T<H-1&&g.append(document.createElement("br"))}return g}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(e=!1){e&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(e=!0){e&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class s extends P{constructor(e){var g,v,T;const i=!!(e.data.hasPopup||(g=e.data.titleObj)!=null&&g.str||(v=e.data.contentsObj)!=null&&v.str||(T=e.data.richText)!=null&&T.str);super(e,{isRenderable:i,ignoreBorder:!0}),this.textContent=e.data.textContent}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const i of this.textContent){const g=document.createElement("span");g.textContent=i,e.append(g)}this.container.append(e)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class d extends P{constructor(e){var g,v,T;const i=!!(e.data.hasPopup||(g=e.data.titleObj)!=null&&g.str||(v=e.data.contentsObj)!=null&&v.str||(T=e.data.richText)!=null&&T.str);super(e,{isRenderable:i,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:i,height:g}=N(e.rect),v=this.svgFactory.create(i,g,!0),T=this.svgFactory.createElement("svg:line");return T.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),T.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),T.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),T.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),T.setAttribute("stroke-width",e.borderStyle.width||1),T.setAttribute("stroke","transparent"),T.setAttribute("fill","transparent"),v.append(T),this.container.append(v),this._createPopup(T,e),this.container}}class R extends P{constructor(e){var g,v,T;const i=!!(e.data.hasPopup||(g=e.data.titleObj)!=null&&g.str||(v=e.data.contentsObj)!=null&&v.str||(T=e.data.richText)!=null&&T.str);super(e,{isRenderable:i,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:i,height:g}=N(e.rect),v=this.svgFactory.create(i,g,!0),T=e.borderStyle.width,H=this.svgFactory.createElement("svg:rect");return H.setAttribute("x",T/2),H.setAttribute("y",T/2),H.setAttribute("width",i-T),H.setAttribute("height",g-T),H.setAttribute("stroke-width",T||1),H.setAttribute("stroke","transparent"),H.setAttribute("fill","transparent"),v.append(H),this.container.append(v),this._createPopup(H,e),this.container}}class n extends P{constructor(e){var g,v,T;const i=!!(e.data.hasPopup||(g=e.data.titleObj)!=null&&g.str||(v=e.data.contentsObj)!=null&&v.str||(T=e.data.richText)!=null&&T.str);super(e,{isRenderable:i,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:i,height:g}=N(e.rect),v=this.svgFactory.create(i,g,!0),T=e.borderStyle.width,H=this.svgFactory.createElement("svg:ellipse");return H.setAttribute("cx",i/2),H.setAttribute("cy",g/2),H.setAttribute("rx",i/2-T/2),H.setAttribute("ry",g/2-T/2),H.setAttribute("stroke-width",T||1),H.setAttribute("stroke","transparent"),H.setAttribute("fill","transparent"),v.append(H),this.container.append(v),this._createPopup(H,e),this.container}}class I extends P{constructor(e){var g,v,T;const i=!!(e.data.hasPopup||(g=e.data.titleObj)!=null&&g.str||(v=e.data.contentsObj)!=null&&v.str||(T=e.data.richText)!=null&&T.str);super(e,{isRenderable:i,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const e=this.data,{width:i,height:g}=N(e.rect),v=this.svgFactory.create(i,g,!0);let T=[];for(const nt of e.vertices){const K=nt.x-e.rect[0],at=e.rect[3]-nt.y;T.push(K+","+at)}T=T.join(" ");const H=this.svgFactory.createElement(this.svgElementName);return H.setAttribute("points",T),H.setAttribute("stroke-width",e.borderStyle.width||1),H.setAttribute("stroke","transparent"),H.setAttribute("fill","transparent"),v.append(H),this.container.append(v),this._createPopup(H,e),this.container}}class $ extends I{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class z extends P{constructor(e){var g,v,T;const i=!!(e.data.hasPopup||(g=e.data.titleObj)!=null&&g.str||(v=e.data.contentsObj)!=null&&v.str||(T=e.data.richText)!=null&&T.str);super(e,{isRenderable:i,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class J extends P{constructor(e){var g,v,T;const i=!!(e.data.hasPopup||(g=e.data.titleObj)!=null&&g.str||(v=e.data.contentsObj)!=null&&v.str||(T=e.data.richText)!=null&&T.str);super(e,{isRenderable:i,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const e=this.data,{width:i,height:g}=N(e.rect),v=this.svgFactory.create(i,g,!0);for(const T of e.inkLists){let H=[];for(const K of T){const at=K.x-e.rect[0],ot=e.rect[3]-K.y;H.push(`${at},${ot}`)}H=H.join(" ");const nt=this.svgFactory.createElement(this.svgElementName);nt.setAttribute("points",H),nt.setAttribute("stroke-width",e.borderStyle.width||1),nt.setAttribute("stroke","transparent"),nt.setAttribute("fill","transparent"),this._createPopup(nt,e),v.append(nt)}return this.container.append(v),this.container}}class tt extends P{constructor(e){var g,v,T;const i=!!(e.data.hasPopup||(g=e.data.titleObj)!=null&&g.str||(v=e.data.contentsObj)!=null&&v.str||(T=e.data.richText)!=null&&T.str);super(e,{isRenderable:i,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.classList.add("highlightAnnotation"),this.container)}}class ht extends P{constructor(e){var g,v,T;const i=!!(e.data.hasPopup||(g=e.data.titleObj)!=null&&g.str||(v=e.data.contentsObj)!=null&&v.str||(T=e.data.richText)!=null&&T.str);super(e,{isRenderable:i,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.classList.add("underlineAnnotation"),this.container)}}class rt extends P{constructor(e){var g,v,T;const i=!!(e.data.hasPopup||(g=e.data.titleObj)!=null&&g.str||(v=e.data.contentsObj)!=null&&v.str||(T=e.data.richText)!=null&&T.str);super(e,{isRenderable:i,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.classList.add("squigglyAnnotation"),this.container)}}class ct extends P{constructor(e){var g,v,T;const i=!!(e.data.hasPopup||(g=e.data.titleObj)!=null&&g.str||(v=e.data.contentsObj)!=null&&v.str||(T=e.data.richText)!=null&&T.str);super(e,{isRenderable:i,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.classList.add("strikeoutAnnotation"),this.container)}}class gt extends P{constructor(e){var g,v,T;const i=!!(e.data.hasPopup||(g=e.data.titleObj)!=null&&g.str||(v=e.data.contentsObj)!=null&&v.str||(T=e.data.richText)!=null&&T.str);super(e,{isRenderable:i,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class At extends P{constructor(e){var v;super(e,{isRenderable:!0});const{filename:i,content:g}=this.data.file;this.filename=(0,A.getFilenameFromUrl)(i,!0),this.content=g,(v=this.linkService.eventBus)==null||v.dispatch("fileattachmentannotation",{source:this,filename:i,content:g})}render(){var i,g;this.container.classList.add("fileAttachmentAnnotation");let e;return this.data.hasAppearance?e=document.createElement("div"):(e=document.createElement("img"),e.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(this.data.name)?"paperclip":"pushpin"}.svg`),e.classList.add("popupTriggerArea"),e.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((i=this.data.titleObj)!=null&&i.str||(g=this.data.contentsObj)!=null&&g.str||this.data.richText)&&this._createPopup(e,this.data),this.container.append(e),this.container}_download(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.container,this.content,this.filename)}}const M=class M{static render(e){var K,at;const{annotations:i,div:g,viewport:v,accessibilityManager:T}=e;(0,A.setLayerDimensions)(g,v);const H={data:null,layer:g,page:e.page,viewport:v,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new A.DOMSVGFactory,annotationStorage:e.annotationStorage||new W.AnnotationStorage,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects};let nt=0;for(const ot of i){if(ot.noHTML)continue;if(ot.annotationType!==c.AnnotationType.POPUP){const{width:ut,height:ft}=N(ot.rect);if(ut<=0||ft<=0)continue}H.data=ot;const et=x.create(H);if(!et.isRenderable)continue;const st=et.render();if(ot.hidden&&(st.style.visibility="hidden"),Array.isArray(st))for(const ut of st)ut.style.zIndex=nt++,it(K=M,G,ke).call(K,ut,ot.id,g,T);else st.style.zIndex=nt++,et instanceof o?g.prepend(st):it(at=M,G,ke).call(at,st,ot.id,g,T)}it(this,X,Fe).call(this,g,e.annotationCanvasMap)}static update(e){const{annotationCanvasMap:i,div:g,viewport:v}=e;(0,A.setLayerDimensions)(g,{rotation:v.rotation}),it(this,X,Fe).call(this,g,i),g.hidden=!1}};G=new WeakSet,ke=function(e,i,g,v){const T=e.firstChild||e;T.id=`${A.AnnotationPrefix}${i}`,g.append(e),v==null||v.moveElementInDOM(g,e,T,!1)},X=new WeakSet,Fe=function(e,i){if(i){for(const[g,v]of i){const T=e.querySelector(`[data-annotation-id="${g}"]`);if(!T)continue;const{firstChild:H}=T;H?H.nodeName==="CANVAS"?H.replaceWith(v):H.before(v):T.append(v)}i.clear()}},Q(M,G),Q(M,X);let St=M;r.AnnotationLayer=St},(j,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ColorConverters=void 0;function B(A){return Math.floor(Math.max(0,Math.min(1,A))*255).toString(16).padStart(2,"0")}class c{static CMYK_G([W,q,Z,L]){return["G",1-Math.min(1,.3*W+.59*Z+.11*q+L)]}static G_CMYK([W]){return["CMYK",0,0,0,1-W]}static G_RGB([W]){return["RGB",W,W,W]}static G_HTML([W]){const q=B(W);return`#${q}${q}${q}`}static RGB_G([W,q,Z]){return["G",.3*W+.59*q+.11*Z]}static RGB_HTML([W,q,Z]){const L=B(W),k=B(q),_=B(Z);return`#${L}${k}${_}`}static T_HTML(){return"#00000000"}static CMYK_RGB([W,q,Z,L]){return["RGB",1-Math.min(1,W+L),1-Math.min(1,Z+L),1-Math.min(1,q+L)]}static CMYK_HTML(W){const q=this.CMYK_RGB(W).slice(1);return this.RGB_HTML(q)}static RGB_CMYK([W,q,Z]){const L=1-W,k=1-q,_=1-Z,N=Math.min(L,k,_);return["CMYK",L,k,_,N]}}r.ColorConverters=c},(j,r,B)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.XfaLayer=void 0;var c=B(19);class A{static setupStorage(q,Z,L,k,_){const N=k.getValue(Z,{value:null});switch(L.name){case"textarea":if(N.value!==null&&(q.textContent=N.value),_==="print")break;q.addEventListener("input",x=>{k.setValue(Z,{value:x.target.value})});break;case"input":if(L.attributes.type==="radio"||L.attributes.type==="checkbox"){if(N.value===L.attributes.xfaOn?q.setAttribute("checked",!0):N.value===L.attributes.xfaOff&&q.removeAttribute("checked"),_==="print")break;q.addEventListener("change",x=>{k.setValue(Z,{value:x.target.checked?x.target.getAttribute("xfaOn"):x.target.getAttribute("xfaOff")})})}else{if(N.value!==null&&q.setAttribute("value",N.value),_==="print")break;q.addEventListener("input",x=>{k.setValue(Z,{value:x.target.value})})}break;case"select":if(N.value!==null)for(const x of L.children)x.attributes.value===N.value&&(x.attributes.selected=!0);q.addEventListener("input",x=>{const P=x.target.options,p=P.selectedIndex===-1?"":P[P.selectedIndex].value;k.setValue(Z,{value:p})});break}}static setAttributes({html:q,element:Z,storage:L=null,intent:k,linkService:_}){const{attributes:N}=Z,x=q instanceof HTMLAnchorElement;N.type==="radio"&&(N.name=`${N.name}-${k}`);for(const[P,p]of Object.entries(N))if(p!=null)switch(P){case"class":p.length&&q.setAttribute(P,p.join(" "));break;case"dataId":break;case"id":q.setAttribute("data-element-id",p);break;case"style":Object.assign(q.style,p);break;case"textContent":q.textContent=p;break;default:(!x||P!=="href"&&P!=="newWindow")&&q.setAttribute(P,p)}x&&_.addLinkAttributes(q,N.href,N.newWindow),L&&N.dataId&&this.setupStorage(q,N.dataId,Z,L)}static render(q){var u;const Z=q.annotationStorage,L=q.linkService,k=q.xfaHtml,_=q.intent||"display",N=document.createElement(k.name);k.attributes&&this.setAttributes({html:N,element:k,intent:_,linkService:L});const x=[[k,-1,N]],P=q.div;if(P.append(N),q.viewport){const a=`matrix(${q.viewport.transform.join(",")})`;P.style.transform=a}_!=="richText"&&P.setAttribute("class","xfaLayer xfaFont");const p=[];for(;x.length>0;){const[a,y,S]=x.at(-1);if(y+1===a.children.length){x.pop();continue}const C=a.children[++x.at(-1)[1]];if(C===null)continue;const{name:m}=C;if(m==="#text"){const o=document.createTextNode(C.value);p.push(o),S.append(o);continue}let t;if((u=C==null?void 0:C.attributes)!=null&&u.xmlns?t=document.createElementNS(C.attributes.xmlns,m):t=document.createElement(m),S.append(t),C.attributes&&this.setAttributes({html:t,element:C,storage:Z,intent:_,linkService:L}),C.children&&C.children.length>0)x.push([C,-1,t]);else if(C.value){const o=document.createTextNode(C.value);c.XfaText.shouldBuildText(m)&&p.push(o),t.append(o)}}for(const a of P.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))a.setAttribute("readOnly",!0);return{textDivs:p}}static update(q){const Z=`matrix(${q.viewport.transform.join(",")})`;q.div.style.transform=Z,q.div.hidden=!1}}r.XfaLayer=A},(j,r,B)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.SVGGraphics=void 0;var c=B(6),A=B(1),W=B(10);let q=class{constructor(){(0,A.unreachable)("Not implemented: SVGGraphics")}};r.SVGGraphics=q;{let u=function(t){let o=[];const l=[];for(const s of t){if(s.fn==="save"){o.push({fnId:92,fn:"group",items:[]}),l.push(o),o=o.at(-1).items;continue}s.fn==="restore"?o=l.pop():o.push(s)}return o},a=function(t){if(Number.isInteger(t))return t.toString();const o=t.toFixed(10);let l=o.length-1;if(o[l]!=="0")return o;do l--;while(o[l]==="0");return o.substring(0,o[l]==="."?l:l+1)},y=function(t){if(t[4]===0&&t[5]===0){if(t[1]===0&&t[2]===0)return t[0]===1&&t[3]===1?"":`scale(${a(t[0])} ${a(t[3])})`;if(t[0]===t[3]&&t[1]===-t[2]){const o=Math.acos(t[0])*180/Math.PI;return`rotate(${a(o)})`}}else if(t[0]===1&&t[1]===0&&t[2]===0&&t[3]===1)return`translate(${a(t[4])} ${a(t[5])})`;return`matrix(${a(t[0])} ${a(t[1])} ${a(t[2])} ${a(t[3])} ${a(t[4])} ${a(t[5])})`};const Z={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},L="http://www.w3.org/XML/1998/namespace",k="http://www.w3.org/1999/xlink",_=["butt","round","square"],N=["miter","round","bevel"],x=function(t,o="",l=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!l)return URL.createObjectURL(new Blob([t],{type:o}));const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let d=`data:${o};base64,`;for(let R=0,n=t.length;R<n;R+=3){const I=t[R]&255,$=t[R+1]&255,z=t[R+2]&255,J=I>>2,tt=(I&3)<<4|$>>4,ht=R+1<n?($&15)<<2|z>>6:64,rt=R+2<n?z&63:64;d+=s[J]+s[tt]+s[ht]+s[rt]}return d},P=function(){const t=new Uint8Array([137,80,78,71,13,10,26,10]),o=12,l=new Int32Array(256);for(let z=0;z<256;z++){let J=z;for(let tt=0;tt<8;tt++)J&1?J=3988292384^J>>1&2147483647:J=J>>1&2147483647;l[z]=J}function s(z,J,tt){let ht=-1;for(let rt=J;rt<tt;rt++){const ct=(ht^z[rt])&255,gt=l[ct];ht=ht>>>8^gt}return ht^-1}function d(z,J,tt,ht){let rt=ht;const ct=J.length;tt[rt]=ct>>24&255,tt[rt+1]=ct>>16&255,tt[rt+2]=ct>>8&255,tt[rt+3]=ct&255,rt+=4,tt[rt]=z.charCodeAt(0)&255,tt[rt+1]=z.charCodeAt(1)&255,tt[rt+2]=z.charCodeAt(2)&255,tt[rt+3]=z.charCodeAt(3)&255,rt+=4,tt.set(J,rt),rt+=J.length;const gt=s(tt,ht+4,rt);tt[rt]=gt>>24&255,tt[rt+1]=gt>>16&255,tt[rt+2]=gt>>8&255,tt[rt+3]=gt&255}function R(z,J,tt){let ht=1,rt=0;for(let ct=J;ct<tt;++ct)ht=(ht+(z[ct]&255))%65521,rt=(rt+ht)%65521;return rt<<16|ht}function n(z){if(!W.isNodeJS)return I(z);try{let J;parseInt(process.versions.node)>=8?J=z:J=Buffer.from(z);const tt=require$$5.deflateSync(J,{level:9});return tt instanceof Uint8Array?tt:new Uint8Array(tt)}catch(J){(0,A.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+J)}return I(z)}function I(z){let J=z.length;const tt=65535,ht=Math.ceil(J/tt),rt=new Uint8Array(2+J+ht*5+4);let ct=0;rt[ct++]=120,rt[ct++]=156;let gt=0;for(;J>tt;)rt[ct++]=0,rt[ct++]=255,rt[ct++]=255,rt[ct++]=0,rt[ct++]=0,rt.set(z.subarray(gt,gt+tt),ct),ct+=tt,gt+=tt,J-=tt;rt[ct++]=1,rt[ct++]=J&255,rt[ct++]=J>>8&255,rt[ct++]=~J&65535&255,rt[ct++]=(~J&65535)>>8&255,rt.set(z.subarray(gt),ct),ct+=z.length-gt;const At=R(z,0,z.length);return rt[ct++]=At>>24&255,rt[ct++]=At>>16&255,rt[ct++]=At>>8&255,rt[ct++]=At&255,rt}function $(z,J,tt,ht){const rt=z.width,ct=z.height;let gt,At,St;const yt=z.data;switch(J){case A.ImageKind.GRAYSCALE_1BPP:At=0,gt=1,St=rt+7>>3;break;case A.ImageKind.RGB_24BPP:At=2,gt=8,St=rt*3;break;case A.ImageKind.RGBA_32BPP:At=6,gt=8,St=rt*4;break;default:throw new Error("invalid format")}const V=new Uint8Array((1+St)*ct);let h=0,f=0;for(let M=0;M<ct;++M)V[h++]=0,V.set(yt.subarray(f,f+St),h),f+=St,h+=St;if(J===A.ImageKind.GRAYSCALE_1BPP&&ht){h=0;for(let M=0;M<ct;M++){h++;for(let D=0;D<St;D++)V[h++]^=255}}const E=new Uint8Array([rt>>24&255,rt>>16&255,rt>>8&255,rt&255,ct>>24&255,ct>>16&255,ct>>8&255,ct&255,gt,At,0,0,0]),G=n(V),U=t.length+o*3+E.length+G.length,X=new Uint8Array(U);let F=0;return X.set(t,F),F+=t.length,d("IHDR",E,X,F),F+=o+E.length,d("IDATA",G,X,F),F+=o+G.length,d("IEND",new Uint8Array(0),X,F),x(X,"image/png",tt)}return function(J,tt,ht){const rt=J.kind===void 0?A.ImageKind.GRAYSCALE_1BPP:J.kind;return $(J,rt,tt,ht)}}();class p{constructor(){this.fontSizeScale=1,this.fontWeight=Z.fontWeight,this.fontSize=0,this.textMatrix=A.IDENTITY_MATRIX,this.fontMatrix=A.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=A.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=Z.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(o,l){this.x=o,this.y=l}}let S=0,C=0,m=0;r.SVGGraphics=q=class{constructor(t,o,l=!1){(0,c.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new c.DOMSVGFactory,this.current=new p,this.transformMatrix=A.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=t,this.objs=o,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!l,this._operatorIdMapping=[];for(const s in A.OPS)this._operatorIdMapping[A.OPS[s]]=s}getObject(t,o=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):o}save(){this.transformStack.push(this.transformMatrix);const t=this.current;this.extraStack.push(t),this.current=t.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(t){this.save(),this.executeOpTree(t),this.restore()}loadDependencies(t){const o=t.fnArray,l=t.argsArray;for(let s=0,d=o.length;s<d;s++)if(o[s]===A.OPS.dependency)for(const R of l[s]){const n=R.startsWith("g_")?this.commonObjs:this.objs,I=new Promise($=>{n.get(R,$)});this.current.dependencies.push(I)}return Promise.all(this.current.dependencies)}transform(t,o,l,s,d,R){const n=[t,o,l,s,d,R];this.transformMatrix=A.Util.transform(this.transformMatrix,n),this.tgrp=null}getSVG(t,o){this.viewport=o;const l=this._initialize(o);return this.loadDependencies(t).then(()=>(this.transformMatrix=A.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(t)),l))}convertOpList(t){const o=this._operatorIdMapping,l=t.argsArray,s=t.fnArray,d=[];for(let R=0,n=s.length;R<n;R++){const I=s[R];d.push({fnId:I,fn:o[I],args:l[R]})}return u(d)}executeOpTree(t){for(const o of t){const l=o.fn,s=o.fnId,d=o.args;switch(s|0){case A.OPS.beginText:this.beginText();break;case A.OPS.dependency:break;case A.OPS.setLeading:this.setLeading(d);break;case A.OPS.setLeadingMoveText:this.setLeadingMoveText(d[0],d[1]);break;case A.OPS.setFont:this.setFont(d);break;case A.OPS.showText:this.showText(d[0]);break;case A.OPS.showSpacedText:this.showText(d[0]);break;case A.OPS.endText:this.endText();break;case A.OPS.moveText:this.moveText(d[0],d[1]);break;case A.OPS.setCharSpacing:this.setCharSpacing(d[0]);break;case A.OPS.setWordSpacing:this.setWordSpacing(d[0]);break;case A.OPS.setHScale:this.setHScale(d[0]);break;case A.OPS.setTextMatrix:this.setTextMatrix(d[0],d[1],d[2],d[3],d[4],d[5]);break;case A.OPS.setTextRise:this.setTextRise(d[0]);break;case A.OPS.setTextRenderingMode:this.setTextRenderingMode(d[0]);break;case A.OPS.setLineWidth:this.setLineWidth(d[0]);break;case A.OPS.setLineJoin:this.setLineJoin(d[0]);break;case A.OPS.setLineCap:this.setLineCap(d[0]);break;case A.OPS.setMiterLimit:this.setMiterLimit(d[0]);break;case A.OPS.setFillRGBColor:this.setFillRGBColor(d[0],d[1],d[2]);break;case A.OPS.setStrokeRGBColor:this.setStrokeRGBColor(d[0],d[1],d[2]);break;case A.OPS.setStrokeColorN:this.setStrokeColorN(d);break;case A.OPS.setFillColorN:this.setFillColorN(d);break;case A.OPS.shadingFill:this.shadingFill(d[0]);break;case A.OPS.setDash:this.setDash(d[0],d[1]);break;case A.OPS.setRenderingIntent:this.setRenderingIntent(d[0]);break;case A.OPS.setFlatness:this.setFlatness(d[0]);break;case A.OPS.setGState:this.setGState(d[0]);break;case A.OPS.fill:this.fill();break;case A.OPS.eoFill:this.eoFill();break;case A.OPS.stroke:this.stroke();break;case A.OPS.fillStroke:this.fillStroke();break;case A.OPS.eoFillStroke:this.eoFillStroke();break;case A.OPS.clip:this.clip("nonzero");break;case A.OPS.eoClip:this.clip("evenodd");break;case A.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case A.OPS.paintImageXObject:this.paintImageXObject(d[0]);break;case A.OPS.paintInlineImageXObject:this.paintInlineImageXObject(d[0]);break;case A.OPS.paintImageMaskXObject:this.paintImageMaskXObject(d[0]);break;case A.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(d[0],d[1]);break;case A.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case A.OPS.closePath:this.closePath();break;case A.OPS.closeStroke:this.closeStroke();break;case A.OPS.closeFillStroke:this.closeFillStroke();break;case A.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case A.OPS.nextLine:this.nextLine();break;case A.OPS.transform:this.transform(d[0],d[1],d[2],d[3],d[4],d[5]);break;case A.OPS.constructPath:this.constructPath(d[0],d[1]);break;case A.OPS.endPath:this.endPath();break;case 92:this.group(o.items);break;default:(0,A.warn)(`Unimplemented operator ${l}`);break}}}setWordSpacing(t){this.current.wordSpacing=t}setCharSpacing(t){this.current.charSpacing=t}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(t,o,l,s,d,R){const n=this.current;n.textMatrix=n.lineMatrix=[t,o,l,s,d,R],n.textMatrixScale=Math.hypot(t,o),n.x=n.lineX=0,n.y=n.lineY=0,n.xcoords=[],n.ycoords=[],n.tspan=this.svgFactory.createElement("svg:tspan"),n.tspan.setAttributeNS(null,"font-family",n.fontFamily),n.tspan.setAttributeNS(null,"font-size",`${a(n.fontSize)}px`),n.tspan.setAttributeNS(null,"y",a(-n.y)),n.txtElement=this.svgFactory.createElement("svg:text"),n.txtElement.append(n.tspan)}beginText(){const t=this.current;t.x=t.lineX=0,t.y=t.lineY=0,t.textMatrix=A.IDENTITY_MATRIX,t.lineMatrix=A.IDENTITY_MATRIX,t.textMatrixScale=1,t.tspan=this.svgFactory.createElement("svg:tspan"),t.txtElement=this.svgFactory.createElement("svg:text"),t.txtgrp=this.svgFactory.createElement("svg:g"),t.xcoords=[],t.ycoords=[]}moveText(t,o){const l=this.current;l.x=l.lineX+=t,l.y=l.lineY+=o,l.xcoords=[],l.ycoords=[],l.tspan=this.svgFactory.createElement("svg:tspan"),l.tspan.setAttributeNS(null,"font-family",l.fontFamily),l.tspan.setAttributeNS(null,"font-size",`${a(l.fontSize)}px`),l.tspan.setAttributeNS(null,"y",a(-l.y))}showText(t){const o=this.current,l=o.font,s=o.fontSize;if(s===0)return;const d=o.fontSizeScale,R=o.charSpacing,n=o.wordSpacing,I=o.fontDirection,$=o.textHScale*I,z=l.vertical,J=z?1:-1,tt=l.defaultVMetrics,ht=s*o.fontMatrix[0];let rt=0;for(const At of t){if(At===null){rt+=I*n;continue}else if(typeof At=="number"){rt+=J*At*s/1e3;continue}const St=(At.isSpace?n:0)+R,yt=At.fontChar;let V,h,f=At.width;if(z){let G;const U=At.vmetric||tt;G=At.vmetric?U[1]:f*.5,G=-G*ht;const X=U[2]*ht;f=U?-U[0]:f,V=G/d,h=(rt+X)/d}else V=rt/d,h=0;(At.isInFont||l.missingFile)&&(o.xcoords.push(o.x+V),z&&o.ycoords.push(-o.y+h),o.tspan.textContent+=yt);let E;z?E=f*ht-St*I:E=f*ht+St*I,rt+=E}o.tspan.setAttributeNS(null,"x",o.xcoords.map(a).join(" ")),z?o.tspan.setAttributeNS(null,"y",o.ycoords.map(a).join(" ")):o.tspan.setAttributeNS(null,"y",a(-o.y)),z?o.y-=rt:o.x+=rt*$,o.tspan.setAttributeNS(null,"font-family",o.fontFamily),o.tspan.setAttributeNS(null,"font-size",`${a(o.fontSize)}px`),o.fontStyle!==Z.fontStyle&&o.tspan.setAttributeNS(null,"font-style",o.fontStyle),o.fontWeight!==Z.fontWeight&&o.tspan.setAttributeNS(null,"font-weight",o.fontWeight);const ct=o.textRenderingMode&A.TextRenderingMode.FILL_STROKE_MASK;if(ct===A.TextRenderingMode.FILL||ct===A.TextRenderingMode.FILL_STROKE?(o.fillColor!==Z.fillColor&&o.tspan.setAttributeNS(null,"fill",o.fillColor),o.fillAlpha<1&&o.tspan.setAttributeNS(null,"fill-opacity",o.fillAlpha)):o.textRenderingMode===A.TextRenderingMode.ADD_TO_PATH?o.tspan.setAttributeNS(null,"fill","transparent"):o.tspan.setAttributeNS(null,"fill","none"),ct===A.TextRenderingMode.STROKE||ct===A.TextRenderingMode.FILL_STROKE){const At=1/(o.textMatrixScale||1);this._setStrokeAttributes(o.tspan,At)}let gt=o.textMatrix;o.textRise!==0&&(gt=gt.slice(),gt[5]+=o.textRise),o.txtElement.setAttributeNS(null,"transform",`${y(gt)} scale(${a($)}, -1)`),o.txtElement.setAttributeNS(L,"xml:space","preserve"),o.txtElement.append(o.tspan),o.txtgrp.append(o.txtElement),this._ensureTransformGroup().append(o.txtElement)}setLeadingMoveText(t,o){this.setLeading(-o),this.moveText(t,o)}addFontStyle(t){if(!t.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const o=x(t.data,t.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${t.loadedName}"; src: url(${o}); }
`}setFont(t){const o=this.current,l=this.commonObjs.get(t[0]);let s=t[1];o.font=l,this.embedFonts&&!l.missingFile&&!this.embeddedFonts[l.loadedName]&&(this.addFontStyle(l),this.embeddedFonts[l.loadedName]=l),o.fontMatrix=l.fontMatrix||A.FONT_IDENTITY_MATRIX;let d="normal";l.black?d="900":l.bold&&(d="bold");const R=l.italic?"italic":"normal";s<0?(s=-s,o.fontDirection=-1):o.fontDirection=1,o.fontSize=s,o.fontFamily=l.loadedName,o.fontWeight=d,o.fontStyle=R,o.tspan=this.svgFactory.createElement("svg:tspan"),o.tspan.setAttributeNS(null,"y",a(-o.y)),o.xcoords=[],o.ycoords=[]}endText(){var o;const t=this.current;t.textRenderingMode&A.TextRenderingMode.ADD_TO_PATH_FLAG&&((o=t.txtElement)!=null&&o.hasChildNodes())&&(t.element=t.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(t){t>0&&(this.current.lineWidth=t)}setLineCap(t){this.current.lineCap=_[t]}setLineJoin(t){this.current.lineJoin=N[t]}setMiterLimit(t){this.current.miterLimit=t}setStrokeAlpha(t){this.current.strokeAlpha=t}setStrokeRGBColor(t,o,l){this.current.strokeColor=A.Util.makeHexColor(t,o,l)}setFillAlpha(t){this.current.fillAlpha=t}setFillRGBColor(t,o,l){this.current.fillColor=A.Util.makeHexColor(t,o,l),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(t){this.current.strokeColor=this._makeColorN_Pattern(t)}setFillColorN(t){this.current.fillColor=this._makeColorN_Pattern(t)}shadingFill(t){const o=this.viewport.width,l=this.viewport.height,s=A.Util.inverseTransform(this.transformMatrix),d=A.Util.applyTransform([0,0],s),R=A.Util.applyTransform([0,l],s),n=A.Util.applyTransform([o,0],s),I=A.Util.applyTransform([o,l],s),$=Math.min(d[0],R[0],n[0],I[0]),z=Math.min(d[1],R[1],n[1],I[1]),J=Math.max(d[0],R[0],n[0],I[0]),tt=Math.max(d[1],R[1],n[1],I[1]),ht=this.svgFactory.createElement("svg:rect");ht.setAttributeNS(null,"x",$),ht.setAttributeNS(null,"y",z),ht.setAttributeNS(null,"width",J-$),ht.setAttributeNS(null,"height",tt-z),ht.setAttributeNS(null,"fill",this._makeShadingPattern(t)),this.current.fillAlpha<1&&ht.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(ht)}_makeColorN_Pattern(t){return t[0]==="TilingPattern"?this._makeTilingPattern(t):this._makeShadingPattern(t)}_makeTilingPattern(t){const o=t[1],l=t[2],s=t[3]||A.IDENTITY_MATRIX,[d,R,n,I]=t[4],$=t[5],z=t[6],J=t[7],tt=`shading${m++}`,[ht,rt,ct,gt]=A.Util.normalizeRect([...A.Util.applyTransform([d,R],s),...A.Util.applyTransform([n,I],s)]),[At,St]=A.Util.singularValueDecompose2dScale(s),yt=$*At,V=z*St,h=this.svgFactory.createElement("svg:pattern");h.setAttributeNS(null,"id",tt),h.setAttributeNS(null,"patternUnits","userSpaceOnUse"),h.setAttributeNS(null,"width",yt),h.setAttributeNS(null,"height",V),h.setAttributeNS(null,"x",`${ht}`),h.setAttributeNS(null,"y",`${rt}`);const f=this.svg,E=this.transformMatrix,G=this.current.fillColor,U=this.current.strokeColor,X=this.svgFactory.create(ct-ht,gt-rt);if(this.svg=X,this.transformMatrix=s,J===2){const F=A.Util.makeHexColor(...o);this.current.fillColor=F,this.current.strokeColor=F}return this.executeOpTree(this.convertOpList(l)),this.svg=f,this.transformMatrix=E,this.current.fillColor=G,this.current.strokeColor=U,h.append(X.childNodes[0]),this.defs.append(h),`url(#${tt})`}_makeShadingPattern(t){switch(typeof t=="string"&&(t=this.objs.get(t)),t[0]){case"RadialAxial":const o=`shading${m++}`,l=t[3];let s;switch(t[1]){case"axial":const d=t[4],R=t[5];s=this.svgFactory.createElement("svg:linearGradient"),s.setAttributeNS(null,"id",o),s.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),s.setAttributeNS(null,"x1",d[0]),s.setAttributeNS(null,"y1",d[1]),s.setAttributeNS(null,"x2",R[0]),s.setAttributeNS(null,"y2",R[1]);break;case"radial":const n=t[4],I=t[5],$=t[6],z=t[7];s=this.svgFactory.createElement("svg:radialGradient"),s.setAttributeNS(null,"id",o),s.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),s.setAttributeNS(null,"cx",I[0]),s.setAttributeNS(null,"cy",I[1]),s.setAttributeNS(null,"r",z),s.setAttributeNS(null,"fx",n[0]),s.setAttributeNS(null,"fy",n[1]),s.setAttributeNS(null,"fr",$);break;default:throw new Error(`Unknown RadialAxial type: ${t[1]}`)}for(const d of l){const R=this.svgFactory.createElement("svg:stop");R.setAttributeNS(null,"offset",d[0]),R.setAttributeNS(null,"stop-color",d[1]),s.append(R)}return this.defs.append(s),`url(#${o})`;case"Mesh":return(0,A.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${t[0]}`)}}setDash(t,o){this.current.dashArray=t,this.current.dashPhase=o}constructPath(t,o){const l=this.current;let s=l.x,d=l.y,R=[],n=0;for(const I of t)switch(I|0){case A.OPS.rectangle:s=o[n++],d=o[n++];const $=o[n++],z=o[n++],J=s+$,tt=d+z;R.push("M",a(s),a(d),"L",a(J),a(d),"L",a(J),a(tt),"L",a(s),a(tt),"Z");break;case A.OPS.moveTo:s=o[n++],d=o[n++],R.push("M",a(s),a(d));break;case A.OPS.lineTo:s=o[n++],d=o[n++],R.push("L",a(s),a(d));break;case A.OPS.curveTo:s=o[n+4],d=o[n+5],R.push("C",a(o[n]),a(o[n+1]),a(o[n+2]),a(o[n+3]),a(s),a(d)),n+=6;break;case A.OPS.curveTo2:R.push("C",a(s),a(d),a(o[n]),a(o[n+1]),a(o[n+2]),a(o[n+3])),s=o[n+2],d=o[n+3],n+=4;break;case A.OPS.curveTo3:s=o[n+2],d=o[n+3],R.push("C",a(o[n]),a(o[n+1]),a(s),a(d),a(s),a(d)),n+=4;break;case A.OPS.closePath:R.push("Z");break}R=R.join(" "),l.path&&t.length>0&&t[0]!==A.OPS.rectangle&&t[0]!==A.OPS.moveTo?R=l.path.getAttributeNS(null,"d")+R:(l.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(l.path)),l.path.setAttributeNS(null,"d",R),l.path.setAttributeNS(null,"fill","none"),l.element=l.path,l.setCurrentPoint(s,d)}endPath(){const t=this.current;if(t.path=null,!this.pendingClip)return;if(!t.element){this.pendingClip=null;return}const o=`clippath${S++}`,l=this.svgFactory.createElement("svg:clipPath");l.setAttributeNS(null,"id",o),l.setAttributeNS(null,"transform",y(this.transformMatrix));const s=t.element.cloneNode(!0);if(this.pendingClip==="evenodd"?s.setAttributeNS(null,"clip-rule","evenodd"):s.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,l.append(s),this.defs.append(l),t.activeClipUrl){t.clipGroup=null;for(const d of this.extraStack)d.clipGroup=null;l.setAttributeNS(null,"clip-path",t.activeClipUrl)}t.activeClipUrl=`url(#${o})`,this.tgrp=null}clip(t){this.pendingClip=t}closePath(){const t=this.current;if(t.path){const o=`${t.path.getAttributeNS(null,"d")}Z`;t.path.setAttributeNS(null,"d",o)}}setLeading(t){this.current.leading=-t}setTextRise(t){this.current.textRise=t}setTextRenderingMode(t){this.current.textRenderingMode=t}setHScale(t){this.current.textHScale=t/100}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[o,l]of t)switch(o){case"LW":this.setLineWidth(l);break;case"LC":this.setLineCap(l);break;case"LJ":this.setLineJoin(l);break;case"ML":this.setMiterLimit(l);break;case"D":this.setDash(l[0],l[1]);break;case"RI":this.setRenderingIntent(l);break;case"FL":this.setFlatness(l);break;case"Font":this.setFont(l);break;case"CA":this.setStrokeAlpha(l);break;case"ca":this.setFillAlpha(l);break;default:(0,A.warn)(`Unimplemented graphic state operator ${o}`);break}}fill(){const t=this.current;t.element&&(t.element.setAttributeNS(null,"fill",t.fillColor),t.element.setAttributeNS(null,"fill-opacity",t.fillAlpha),this.endPath())}stroke(){const t=this.current;t.element&&(this._setStrokeAttributes(t.element),t.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(t,o=1){const l=this.current;let s=l.dashArray;o!==1&&s.length>0&&(s=s.map(function(d){return o*d})),t.setAttributeNS(null,"stroke",l.strokeColor),t.setAttributeNS(null,"stroke-opacity",l.strokeAlpha),t.setAttributeNS(null,"stroke-miterlimit",a(l.miterLimit)),t.setAttributeNS(null,"stroke-linecap",l.lineCap),t.setAttributeNS(null,"stroke-linejoin",l.lineJoin),t.setAttributeNS(null,"stroke-width",a(o*l.lineWidth)+"px"),t.setAttributeNS(null,"stroke-dasharray",s.map(a).join(" ")),t.setAttributeNS(null,"stroke-dashoffset",a(o*l.dashPhase)+"px")}eoFill(){var t;(t=this.current.element)==null||t.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var t;(t=this.current.element)==null||t.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const t=this.svgFactory.createElement("svg:rect");t.setAttributeNS(null,"x","0"),t.setAttributeNS(null,"y","0"),t.setAttributeNS(null,"width","1px"),t.setAttributeNS(null,"height","1px"),t.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(t)}paintImageXObject(t){const o=this.getObject(t);if(!o){(0,A.warn)(`Dependent image with object ID ${t} is not ready yet`);return}this.paintInlineImageXObject(o)}paintInlineImageXObject(t,o){const l=t.width,s=t.height,d=P(t,this.forceDataSchema,!!o),R=this.svgFactory.createElement("svg:rect");R.setAttributeNS(null,"x","0"),R.setAttributeNS(null,"y","0"),R.setAttributeNS(null,"width",a(l)),R.setAttributeNS(null,"height",a(s)),this.current.element=R,this.clip("nonzero");const n=this.svgFactory.createElement("svg:image");n.setAttributeNS(k,"xlink:href",d),n.setAttributeNS(null,"x","0"),n.setAttributeNS(null,"y",a(-s)),n.setAttributeNS(null,"width",a(l)+"px"),n.setAttributeNS(null,"height",a(s)+"px"),n.setAttributeNS(null,"transform",`scale(${a(1/l)} ${a(-1/s)})`),o?o.append(n):this._ensureTransformGroup().append(n)}paintImageMaskXObject(t){const o=this.getObject(t.data,t);if(o.bitmap){(0,A.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const l=this.current,s=o.width,d=o.height,R=l.fillColor;l.maskId=`mask${C++}`;const n=this.svgFactory.createElement("svg:mask");n.setAttributeNS(null,"id",l.maskId);const I=this.svgFactory.createElement("svg:rect");I.setAttributeNS(null,"x","0"),I.setAttributeNS(null,"y","0"),I.setAttributeNS(null,"width",a(s)),I.setAttributeNS(null,"height",a(d)),I.setAttributeNS(null,"fill",R),I.setAttributeNS(null,"mask",`url(#${l.maskId})`),this.defs.append(n),this._ensureTransformGroup().append(I),this.paintInlineImageXObject(o,n)}paintFormXObjectBegin(t,o){if(Array.isArray(t)&&t.length===6&&this.transform(t[0],t[1],t[2],t[3],t[4],t[5]),o){const l=o[2]-o[0],s=o[3]-o[1],d=this.svgFactory.createElement("svg:rect");d.setAttributeNS(null,"x",o[0]),d.setAttributeNS(null,"y",o[1]),d.setAttributeNS(null,"width",a(l)),d.setAttributeNS(null,"height",a(s)),this.current.element=d,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(t){const o=this.svgFactory.create(t.width,t.height),l=this.svgFactory.createElement("svg:defs");o.append(l),this.defs=l;const s=this.svgFactory.createElement("svg:g");return s.setAttributeNS(null,"transform",y(t.transform)),o.append(s),this.svg=s,o}_ensureClipGroup(){if(!this.current.clipGroup){const t=this.svgFactory.createElement("svg:g");t.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(t),this.current.clipGroup=t}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",y(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}}],__webpack_module_cache__={};function __w_pdfjs_require__(j){var r=__webpack_module_cache__[j];if(r!==void 0)return r.exports;var B=__webpack_module_cache__[j]={exports:{}};return __webpack_modules__[j](B,B.exports,__w_pdfjs_require__),B.exports}var __webpack_exports__={};return(()=>{var j=__webpack_exports__;Object.defineProperty(j,"__esModule",{value:!0}),Object.defineProperty(j,"AbortException",{enumerable:!0,get:function(){return r.AbortException}}),Object.defineProperty(j,"AnnotationEditorLayer",{enumerable:!0,get:function(){return W.AnnotationEditorLayer}}),Object.defineProperty(j,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return r.AnnotationEditorParamsType}}),Object.defineProperty(j,"AnnotationEditorType",{enumerable:!0,get:function(){return r.AnnotationEditorType}}),Object.defineProperty(j,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return q.AnnotationEditorUIManager}}),Object.defineProperty(j,"AnnotationLayer",{enumerable:!0,get:function(){return Z.AnnotationLayer}}),Object.defineProperty(j,"AnnotationMode",{enumerable:!0,get:function(){return r.AnnotationMode}}),Object.defineProperty(j,"CMapCompressionType",{enumerable:!0,get:function(){return r.CMapCompressionType}}),Object.defineProperty(j,"FeatureTest",{enumerable:!0,get:function(){return r.FeatureTest}}),Object.defineProperty(j,"GlobalWorkerOptions",{enumerable:!0,get:function(){return L.GlobalWorkerOptions}}),Object.defineProperty(j,"InvalidPDFException",{enumerable:!0,get:function(){return r.InvalidPDFException}}),Object.defineProperty(j,"MissingPDFException",{enumerable:!0,get:function(){return r.MissingPDFException}}),Object.defineProperty(j,"OPS",{enumerable:!0,get:function(){return r.OPS}}),Object.defineProperty(j,"PDFDataRangeTransport",{enumerable:!0,get:function(){return B.PDFDataRangeTransport}}),Object.defineProperty(j,"PDFDateString",{enumerable:!0,get:function(){return c.PDFDateString}}),Object.defineProperty(j,"PDFWorker",{enumerable:!0,get:function(){return B.PDFWorker}}),Object.defineProperty(j,"PasswordResponses",{enumerable:!0,get:function(){return r.PasswordResponses}}),Object.defineProperty(j,"PermissionFlag",{enumerable:!0,get:function(){return r.PermissionFlag}}),Object.defineProperty(j,"PixelsPerInch",{enumerable:!0,get:function(){return c.PixelsPerInch}}),Object.defineProperty(j,"PromiseCapability",{enumerable:!0,get:function(){return r.PromiseCapability}}),Object.defineProperty(j,"RenderingCancelledException",{enumerable:!0,get:function(){return c.RenderingCancelledException}}),Object.defineProperty(j,"SVGGraphics",{enumerable:!0,get:function(){return k.SVGGraphics}}),Object.defineProperty(j,"UnexpectedResponseException",{enumerable:!0,get:function(){return r.UnexpectedResponseException}}),Object.defineProperty(j,"Util",{enumerable:!0,get:function(){return r.Util}}),Object.defineProperty(j,"VerbosityLevel",{enumerable:!0,get:function(){return r.VerbosityLevel}}),Object.defineProperty(j,"XfaLayer",{enumerable:!0,get:function(){return _.XfaLayer}}),Object.defineProperty(j,"build",{enumerable:!0,get:function(){return B.build}}),Object.defineProperty(j,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return r.createValidAbsoluteUrl}}),Object.defineProperty(j,"getDocument",{enumerable:!0,get:function(){return B.getDocument}}),Object.defineProperty(j,"getFilenameFromUrl",{enumerable:!0,get:function(){return c.getFilenameFromUrl}}),Object.defineProperty(j,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return c.getPdfFilenameFromUrl}}),Object.defineProperty(j,"getXfaPageViewport",{enumerable:!0,get:function(){return c.getXfaPageViewport}}),Object.defineProperty(j,"isDataScheme",{enumerable:!0,get:function(){return c.isDataScheme}}),Object.defineProperty(j,"isPdfFile",{enumerable:!0,get:function(){return c.isPdfFile}}),Object.defineProperty(j,"loadScript",{enumerable:!0,get:function(){return c.loadScript}}),Object.defineProperty(j,"normalizeUnicode",{enumerable:!0,get:function(){return r.normalizeUnicode}}),Object.defineProperty(j,"renderTextLayer",{enumerable:!0,get:function(){return A.renderTextLayer}}),Object.defineProperty(j,"setLayerDimensions",{enumerable:!0,get:function(){return c.setLayerDimensions}}),Object.defineProperty(j,"shadow",{enumerable:!0,get:function(){return r.shadow}}),Object.defineProperty(j,"updateTextLayer",{enumerable:!0,get:function(){return A.updateTextLayer}}),Object.defineProperty(j,"version",{enumerable:!0,get:function(){return B.version}});var r=__w_pdfjs_require__(1),B=__w_pdfjs_require__(2),c=__w_pdfjs_require__(6),A=__w_pdfjs_require__(26),W=__w_pdfjs_require__(27),q=__w_pdfjs_require__(5),Z=__w_pdfjs_require__(32),L=__w_pdfjs_require__(14),k=__w_pdfjs_require__(35),_=__w_pdfjs_require__(34)})(),__webpack_exports__})())})(pdf$1);var pdfExports=pdf$1.exports;const pdf=getDefaultExportFromCjs(pdfExports),pdfjsModule=_mergeNamespaces({__proto__:null,default:pdf},[pdfExports]),pdfjs="default"in pdfjsModule?pdf:pdfjsModule,pdfjs$1=pdfjs;var __spreadArray=globalThis&&globalThis.__spreadArray||function(j,r,B){if(B||arguments.length===2)for(var c=0,A=r.length,W;c<A;c++)(W||!(c in r))&&(W||(W=Array.prototype.slice.call(r,0,c)),W[c]=r[c]);return j.concat(W||Array.prototype.slice.call(r))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),focusEvents,!0),formEvents,!0),imageEvents,!0),keyboardEvents,!0),mediaEvents,!0),mouseEvents,!0),dragEvents,!0),selectionEvents,!0),touchEvents,!0),pointerEvents,!0),uiEvents,!0),wheelEvents,!0),animationEvents,!0),transitionEvents,!0),changeEvents,!0),otherEvents,!0);function makeEventProps(j,r){var B={};return allEvents.forEach(function(c){var A=j[c];A&&(r?B[c]=function(W){return A(W,r(c))}:B[c]=A)}),B}function makeCancellablePromise(j){var r=!1,B=new Promise(function(c,A){j.then(function(W){return!r&&c(W)}).catch(function(W){return!r&&A(W)})});return{promise:B,cancel:function(){r=!0}}}var isProduction=!0,prefix="Invariant failed";function invariant(j,r){if(!j){if(isProduction)throw new Error(prefix);var B=typeof r=="function"?r():r,c=B?"".concat(prefix,": ").concat(B):prefix;throw new Error(c)}}const DocumentContext=reactExports.createContext(null);function Message({children:j,type:r}){return React.createElement("div",{className:`react-pdf__message react-pdf__message--${r}`},j)}const DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(r){this.pdfDocument=r}setViewer(r){this.pdfViewer=r}setExternalLinkRel(r){this.externalLinkRel=r}setExternalLinkTarget(r){this.externalLinkTarget=r}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(r){invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=r}get rotation(){return 0}set rotation(r){}goToDestination(r){return new Promise(B=>{invariant(this.pdfDocument,"PDF document not loaded."),invariant(r,"Destination is not specified."),typeof r=="string"?this.pdfDocument.getDestination(r).then(B):Array.isArray(r)?B(r):r.then(B)}).then(B=>{invariant(Array.isArray(B),`"${B}" is not a valid destination array.`);const c=B[0];new Promise(A=>{invariant(this.pdfDocument,"PDF document not loaded."),c instanceof Object?this.pdfDocument.getPageIndex(c).then(W=>{A(W)}).catch(()=>{invariant(!1,`"${c}" is not a valid page reference.`)}):typeof c=="number"?A(c):invariant(!1,`"${c}" is not a valid destination reference.`)}).then(A=>{const W=A+1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(W>=1&&W<=this.pagesCount,`"${W}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:B,pageIndex:A,pageNumber:W})})})}navigateTo(r){this.goToDestination(r)}goToPage(r){const B=r-1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(r>=1&&r<=this.pagesCount,`"${r}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:B,pageNumber:r})}addLinkAttributes(r,B,c){r.href=B,r.rel=this.externalLinkRel||DEFAULT_LINK_REL,r.target=c?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},PasswordResponses$1=PasswordResponses,isBrowser=typeof document<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(j){return typeof j<"u"}function isProvided(j){return isDefined(j)&&j!==null}function isString(j){return typeof j=="string"}function isArrayBuffer(j){return j instanceof ArrayBuffer}function isBlob(j){return invariant(isBrowser,"isBlob can only be used in a browser environment"),j instanceof Blob}function isDataURI(j){return isString(j)&&/^data:/.test(j)}function dataURItoByteString(j){invariant(isDataURI(j),"Invalid data URI.");const[r="",B=""]=j.split(",");return r.split(";").indexOf("base64")!==-1?atob(B):unescape(B)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(j){j&&j.cancel&&j.cancel()}function makePageCallback(j,r){return Object.defineProperty(j,"width",{get(){return this.view[2]*r},configurable:!0}),Object.defineProperty(j,"height",{get(){return this.view[3]*r},configurable:!0}),Object.defineProperty(j,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(j,"originalHeight",{get(){return this.view[3]},configurable:!0}),j}function isCancelException(j){return j.name==="RenderingCancelledException"}function loadFromFile(j){return new Promise((r,B)=>{const c=new FileReader;c.onload=()=>{if(!c.result)return B(new Error("Error while reading a file."));r(c.result)},c.onerror=A=>{if(!A.target)return B(new Error("Error while reading a file."));const{error:W}=A.target;if(!W)return B(new Error("Error while reading a file."));switch(W.code){case W.NOT_FOUND_ERR:return B(new Error("Error while reading a file: File not found."));case W.SECURITY_ERR:return B(new Error("Error while reading a file: Security error."));case W.ABORT_ERR:return B(new Error("Error while reading a file: Aborted."));default:return B(new Error("Error while reading a file."))}},c.readAsArrayBuffer(j)})}function reducer(j,r){switch(r.type){case"RESOLVE":return{value:r.value,error:void 0};case"REJECT":return{value:!1,error:r.error};case"RESET":return{value:void 0,error:void 0};default:return j}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}const{PDFDataRangeTransport:PDFDataRangeTransport$1}=pdfjs$1,eventProps=(()=>{const j={};return allEvents.forEach(r=>{j[r]=PropTypes.func}),j})(),isTypedArray=PropTypes.oneOfType([PropTypes.instanceOf(Int8Array),PropTypes.instanceOf(Uint8Array),PropTypes.instanceOf(Uint8ClampedArray),PropTypes.instanceOf(Int16Array),PropTypes.instanceOf(Uint16Array),PropTypes.instanceOf(Int32Array),PropTypes.instanceOf(Uint32Array),PropTypes.instanceOf(Float32Array),PropTypes.instanceOf(Float64Array)]),fileTypes=[PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.shape({data:PropTypes.oneOfType([PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.arrayOf(PropTypes.number.isRequired),isTypedArray]).isRequired}),PropTypes.shape({range:PropTypes.instanceOf(PDFDataRangeTransport$1).isRequired}),PropTypes.shape({url:PropTypes.string.isRequired})];typeof Blob<"u"&&fileTypes.push(PropTypes.instanceOf(Blob));const isClassName=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.string)]),isFile=PropTypes.oneOfType(fileTypes);PropTypes.instanceOf(LinkService);PropTypes.oneOf(["_self","_blank","_parent","_top"]);PropTypes.shape({commonObjs:PropTypes.shape({}).isRequired,getAnnotations:PropTypes.func.isRequired,getTextContent:PropTypes.func.isRequired,getViewport:PropTypes.func.isRequired,render:PropTypes.func.isRequired});const isPageIndex=function j(r,B,c){const{[B]:A,pageNumber:W,pdf:q}=r;if(!isDefined(q))return null;if(isDefined(A)){if(typeof A!="number")return new Error(`\`${B}\` of type \`${typeof A}\` supplied to \`${c}\`, expected \`number\`.`);if(A<0)return new Error(`Expected \`${B}\` to be greater or equal to 0.`);const{numPages:Z}=q;if(A+1>Z)return new Error(`Expected \`${B}\` to be less or equal to ${Z-1}.`)}else if(!isDefined(W))return new Error(`\`${B}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${c}\`.`);return null},isPageNumber=function j(r,B,c){const{[B]:A,pageIndex:W,pdf:q}=r;if(!isDefined(q))return null;if(isDefined(A)){if(typeof A!="number")return new Error(`\`${B}\` of type \`${typeof A}\` supplied to \`${c}\`, expected \`number\`.`);if(A<1)return new Error(`Expected \`${B}\` to be greater or equal to 1.`);const{numPages:Z}=q;if(A>Z)return new Error(`Expected \`${B}\` to be less or equal to ${Z}.`)}else if(!isDefined(W))return new Error(`\`${B}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${c}\`.`);return null},isPdf=PropTypes.oneOfType([PropTypes.any,PropTypes.oneOf([!1])]),isRef=PropTypes.oneOfType([PropTypes.func,PropTypes.exact({current:PropTypes.any})]),isRenderMode=PropTypes.oneOf(["canvas","custom","none","svg"]),isRotate=PropTypes.oneOf([0,90,180,270]);var __awaiter=globalThis&&globalThis.__awaiter||function(j,r,B,c){function A(W){return W instanceof B?W:new B(function(q){q(W)})}return new(B||(B=Promise))(function(W,q){function Z(_){try{k(c.next(_))}catch(N){q(N)}}function L(_){try{k(c.throw(_))}catch(N){q(N)}}function k(_){_.done?W(_.value):A(_.value).then(Z,L)}k((c=c.apply(j,r||[])).next())})},__rest$1=globalThis&&globalThis.__rest||function(j,r){var B={};for(var c in j)Object.prototype.hasOwnProperty.call(j,c)&&r.indexOf(c)<0&&(B[c]=j[c]);if(j!=null&&typeof Object.getOwnPropertySymbols=="function")for(var A=0,c=Object.getOwnPropertySymbols(j);A<c.length;A++)r.indexOf(c[A])<0&&Object.prototype.propertyIsEnumerable.call(j,c[A])&&(B[c[A]]=j[c[A]]);return B};const{PDFDataRangeTransport}=pdfjs$1,defaultOnPassword=(j,r)=>{switch(r){case PasswordResponses$1.NEED_PASSWORD:{const B=prompt("Enter the password to open this PDF file.");j(B);break}case PasswordResponses$1.INCORRECT_PASSWORD:{const B=prompt("Invalid password. Please try again.");j(B);break}}},Document=reactExports.forwardRef(function j(r,B){var{children:c,className:A,error:W="Failed to load PDF file.",externalLinkRel:q,externalLinkTarget:Z,file:L,inputRef:k,imageResourcesPath:_,loading:N="Loading PDF…",noData:x="No PDF file specified.",onItemClick:P,onLoadError:p,onLoadProgress:u,onLoadSuccess:a,onPassword:y=defaultOnPassword,onSourceError:S,onSourceSuccess:C,options:m,renderMode:t,rotate:o}=r,l=__rest$1(r,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[s,d]=useResolver(),{value:R,error:n}=s,[I,$]=useResolver(),{value:z,error:J}=I,tt=reactExports.useRef(new LinkService),ht=reactExports.useRef([]),rt=reactExports.useRef({scrollPageIntoView:e=>{const{dest:i,pageNumber:g,pageIndex:v=g-1}=e;if(P){P({dest:i,pageIndex:v,pageNumber:g});return}const T=ht.current[v];if(T){T.scrollIntoView();return}warning(!1,`An internal link leading to page ${g} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(B,()=>({linkService:tt,pages:ht,viewer:rt}),[]);function ct(){C&&C()}function gt(){n&&(warning(!1,n.toString()),S&&S(n))}function At(){d({type:"RESET"})}reactExports.useEffect(At,[L,d]);const St=reactExports.useCallback(()=>__awaiter(this,void 0,void 0,function*(){if(!L)return null;if(typeof L=="string")return isDataURI(L)?{data:dataURItoByteString(L)}:(displayCORSWarning(),{url:L});if(L instanceof PDFDataRangeTransport)return{range:L};if(isArrayBuffer(L))return{data:L};if(isBrowser&&isBlob(L))return{data:yield loadFromFile(L)};if(invariant(typeof L=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),invariant("data"in L||"range"in L||"url"in L,"Invalid parameter object: need either .data, .range or .url"),"url"in L&&typeof L.url=="string"){if(isDataURI(L.url)){const{url:e}=L,i=__rest$1(L,["url"]),g=dataURItoByteString(e);return Object.assign({data:g},i)}displayCORSWarning()}return L}),[L]);reactExports.useEffect(()=>{const e=makeCancellablePromise(St());return e.promise.then(i=>{d({type:"RESOLVE",value:i})}).catch(i=>{d({type:"REJECT",error:i})}),()=>{cancelRunningTask(e)}},[St,d]),reactExports.useEffect(()=>{if(!(typeof R>"u")){if(R===!1){gt();return}ct()}},[R]);function yt(){z&&(a&&a(z),ht.current=new Array(z.numPages),tt.current.setDocument(z))}function V(){J&&(warning(!1,J.toString()),p&&p(J))}function h(){$({type:"RESET"})}reactExports.useEffect(h,[$,R]);function f(){if(!R)return;const e=m?Object.assign(Object.assign({},R),m):R,i=pdfjs$1.getDocument(e);u&&(i.onProgress=u),y&&(i.onPassword=y);const g=i;return g.promise.then(v=>{$({type:"RESOLVE",value:v})}).catch(v=>{g.destroyed||$({type:"REJECT",error:v})}),()=>{g.destroy()}}reactExports.useEffect(f,[m,$,R]),reactExports.useEffect(()=>{if(!(typeof z>"u")){if(z===!1){V();return}yt()}},[z]);function E(){tt.current.setViewer(rt.current),tt.current.setExternalLinkRel(q),tt.current.setExternalLinkTarget(Z)}reactExports.useEffect(E,[q,Z]);function G(e,i){ht.current[e]=i}function U(e){delete ht.current[e]}const X=reactExports.useMemo(()=>({imageResourcesPath:_,linkService:tt.current,onItemClick:P,pdf:z,registerPage:G,renderMode:t,rotate:o,unregisterPage:U}),[_,P,z,t,o]),F=reactExports.useMemo(()=>makeEventProps(l,()=>z),[l,z]);function M(){return React.createElement(DocumentContext.Provider,{value:X},c)}function D(){return L?z==null?React.createElement(Message,{type:"loading"},typeof N=="function"?N():N):z===!1?React.createElement(Message,{type:"error"},typeof W=="function"?W():W):M():React.createElement(Message,{type:"no-data"},typeof x=="function"?x():x)}return React.createElement("div",Object.assign({className:clsx("react-pdf__Document",A),ref:k,style:{"--scale-factor":"1"}},F),D())}),isFunctionOrNode$1=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Document.propTypes=Object.assign(Object.assign({},eventProps),{children:PropTypes.node,className:isClassName,error:isFunctionOrNode$1,externalLinkRel:PropTypes.string,externalLinkTarget:PropTypes.oneOf(["_self","_blank","_parent","_top"]),file:isFile,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode$1,noData:isFunctionOrNode$1,onItemClick:PropTypes.func,onLoadError:PropTypes.func,onLoadProgress:PropTypes.func,onLoadSuccess:PropTypes.func,onPassword:PropTypes.func,onSourceError:PropTypes.func,onSourceSuccess:PropTypes.func,options:PropTypes.shape({canvasFactory:PropTypes.any,canvasMaxAreaInBytes:PropTypes.number,cMapPacked:PropTypes.bool,CMapReaderFactory:PropTypes.any,cMapUrl:PropTypes.string,disableAutoFetch:PropTypes.bool,disableFontFace:PropTypes.bool,disableRange:PropTypes.bool,disableStream:PropTypes.bool,docBaseUrl:PropTypes.string,enableXfa:PropTypes.bool,filterFactory:PropTypes.any,fontExtraProperties:PropTypes.bool,httpHeaders:PropTypes.object,isEvalSupported:PropTypes.bool,isOffscreenCanvasSupported:PropTypes.bool,length:PropTypes.number,maxImageSize:PropTypes.number,ownerDocument:PropTypes.any,password:PropTypes.string,pdfBug:PropTypes.bool,rangeChunkSize:PropTypes.number,StandardFontDataFactory:PropTypes.any,standardFontDataUrl:PropTypes.string,stopAtErrors:PropTypes.bool,useSystemFonts:PropTypes.bool,useWorkerFetch:PropTypes.bool,verbosity:PropTypes.number,withCredentials:PropTypes.bool,worker:PropTypes.any}),rotate:PropTypes.number});const Document$1=Document;function useDocumentContext(){return reactExports.useContext(DocumentContext)}function mergeRefs(){for(var j=[],r=0;r<arguments.length;r++)j[r]=arguments[r];var B=j.filter(Boolean);if(B.length<=1){var c=B[0];return c||null}return function(W){B.forEach(function(q){typeof q=="function"?q(W):q&&(q.current=W)})}}const PageContext=reactExports.createContext(null),PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(j){return j in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(j){return"children"in j}function isStructTreeNodeWithOnlyContentChild(j){return isStructTreeNode(j)?j.children.length===1&&0 in j.children&&"id"in j.children[0]:!1}function getRoleAttributes(j){const r={};if(isStructTreeNode(j)){const{role:B}=j,c=B.match(HEADING_PATTERN);if(c)r.role="heading",r["aria-level"]=Number(c[1]);else if(isPdfRole(B)){const A=PDF_ROLE_TO_HTML_ROLE[B];A&&(r.role=A)}}return r}function getBaseAttributes(j){const r={};if(isStructTreeNode(j)){if(j.alt!==void 0&&(r["aria-label"]=j.alt),j.lang!==void 0&&(r.lang=j.lang),isStructTreeNodeWithOnlyContentChild(j)){const[B]=j.children;if(B){const c=getBaseAttributes(B);return Object.assign(Object.assign({},r),c)}}}else"id"in j&&(r["aria-owns"]=j.id);return r}function getAttributes(j){return j?Object.assign(Object.assign({},getRoleAttributes(j)),getBaseAttributes(j)):null}function StructTreeItem({className:j,node:r}){const B=reactExports.useMemo(()=>getAttributes(r),[r]),c=reactExports.useMemo(()=>!isStructTreeNode(r)||isStructTreeNodeWithOnlyContentChild(r)?null:r.children.map((A,W)=>React.createElement(StructTreeItem,{key:W,node:A})),[r]);return React.createElement("span",Object.assign({className:j},B),c)}function usePageContext(){return reactExports.useContext(PageContext)}function StructTree(){const j=usePageContext();invariant(j,"Unable to find Page context.");const{onGetStructTreeError:r,onGetStructTreeSuccess:B}=j,[c,A]=useResolver(),{value:W,error:q}=c,{customTextRenderer:Z,page:L}=j;function k(){W&&B&&B(W)}function _(){q&&(warning(!1,q.toString()),r&&r(q))}function N(){A({type:"RESET"})}reactExports.useEffect(N,[A,L]);function x(){if(Z||!L)return;const P=makeCancellablePromise(L.getStructTree()),p=P;return P.promise.then(u=>{A({type:"RESOLVE",value:u})}).catch(u=>{A({type:"REJECT",error:u})}),()=>cancelRunningTask(p)}return reactExports.useEffect(x,[Z,L,A]),reactExports.useEffect(()=>{if(W!==void 0){if(W===!1){_();return}k()}},[W]),W?React.createElement(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:W}):null}const ANNOTATION_MODE=pdfjs$1.AnnotationMode;function PageCanvas(j){const r=usePageContext();invariant(r,"Unable to find Page context.");const B=Object.assign(Object.assign({},r),j),{_className:c,canvasBackground:A,devicePixelRatio:W=getDevicePixelRatio(),onRenderError:q,onRenderSuccess:Z,page:L,renderForms:k,renderTextLayer:_,rotate:N,scale:x}=B,{canvasRef:P}=j;invariant(L,"Attempted to render page canvas, but no page was specified.");const p=reactExports.useRef(null);function u(){L&&Z&&Z(makePageCallback(L,x))}function a(t){isCancelException(t)||(warning(!1,t.toString()),q&&q(t))}const y=reactExports.useMemo(()=>L.getViewport({scale:x*W,rotation:N}),[W,L,N,x]),S=reactExports.useMemo(()=>L.getViewport({scale:x,rotation:N}),[L,N,x]);function C(){if(!L)return;L.cleanup();const{current:t}=p;if(!t)return;t.width=y.width,t.height=y.height,t.style.width=`${Math.floor(S.width)}px`,t.style.height=`${Math.floor(S.height)}px`,t.style.visibility="hidden";const o={annotationMode:k?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvasContext:t.getContext("2d",{alpha:!1}),viewport:y};A&&(o.background=A);const l=L.render(o),s=l;return l.promise.then(()=>{t.style.visibility="",u()}).catch(a),()=>cancelRunningTask(s)}reactExports.useEffect(C,[A,p,W,L,k,y,S]);const m=reactExports.useCallback(()=>{const{current:t}=p;t&&(t.width=0,t.height=0)},[p]);return reactExports.useEffect(()=>m,[m]),React.createElement("canvas",{className:`${c}__canvas`,dir:"ltr",ref:mergeRefs(P,p),style:{display:"block",userSelect:"none"}},_?React.createElement(StructTree,null):null)}function PageSVG(){const j=usePageContext();invariant(j,"Unable to find Page context.");const{_className:r,onRenderSuccess:B,onRenderError:c,page:A,rotate:W,scale:q}=j;invariant(A,"Attempted to render page SVG, but no page was specified.");const[Z,L]=useResolver(),{value:k,error:_}=Z;function N(){A&&B&&B(makePageCallback(A,q))}function x(){_&&(isCancelException(_)||(warning(!1,_.toString()),c&&c(_)))}const P=reactExports.useMemo(()=>A.getViewport({scale:q,rotation:W}),[A,W,q]);function p(){L({type:"RESET"})}reactExports.useEffect(p,[A,L,P]);function u(){if(!A)return;const C=makeCancellablePromise(A.getOperatorList());return C.promise.then(m=>{new pdfjs$1.SVGGraphics(A.commonObjs,A.objs).getSVG(m,P).then(o=>{L({type:"RESOLVE",value:o})}).catch(o=>{L({type:"REJECT",error:o})})}).catch(m=>{L({type:"REJECT",error:m})}),()=>cancelRunningTask(C)}reactExports.useEffect(u,[A,L,P]),reactExports.useEffect(()=>{if(k!==void 0){if(k===!1){x();return}N()}},[k]);function a(C){if(!C||!k)return;C.firstElementChild||C.appendChild(k);const{width:m,height:t}=P;k.setAttribute("width",`${m}`),k.setAttribute("height",`${t}`)}const{width:y,height:S}=P;return React.createElement("div",{className:`${r}__svg`,ref:C=>a(C),style:{display:"block",backgroundColor:"white",overflow:"hidden",width:y,height:S,userSelect:"none"}})}function isTextItem(j){return"str"in j}function TextLayer(){const j=usePageContext();invariant(j,"Unable to find Page context.");const{customTextRenderer:r,onGetTextError:B,onGetTextSuccess:c,onRenderTextLayerError:A,onRenderTextLayerSuccess:W,page:q,pageIndex:Z,pageNumber:L,rotate:k,scale:_}=j;invariant(q,"Attempted to load page text content, but no page was specified.");const[N,x]=useResolver(),{value:P,error:p}=N,u=reactExports.useRef(null),a=reactExports.useRef();warning(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function y(){P&&c&&c(P)}function S(){p&&(warning(!1,p.toString()),B&&B(p))}function C(){x({type:"RESET"})}reactExports.useEffect(C,[q,x]);function m(){if(!q)return;const n=makeCancellablePromise(q.getTextContent()),I=n;return n.promise.then($=>{x({type:"RESOLVE",value:$})}).catch($=>{x({type:"REJECT",error:$})}),()=>cancelRunningTask(I)}reactExports.useEffect(m,[q,x]),reactExports.useEffect(()=>{if(P!==void 0){if(P===!1){S();return}y()}},[P]);const t=reactExports.useCallback(()=>{W&&W()},[W]),o=reactExports.useCallback(n=>{warning(!1,n.toString()),A&&A(n)},[A]);function l(){const n=a.current;n&&n.classList.add("active")}function s(){const n=a.current;n&&n.classList.remove("active")}const d=reactExports.useMemo(()=>q.getViewport({scale:_,rotation:k}),[q,k,_]);function R(){if(!q||!P)return;const{current:n}=u;if(!n)return;n.innerHTML="";const I=q.streamTextContent({includeMarkedContent:!0}),$={container:n,textContentSource:I,viewport:d},z=pdfjs$1.renderTextLayer($),J=z;return z.promise.then(()=>{const tt=document.createElement("div");tt.className="endOfContent",n.append(tt),a.current=tt;const rt=!!n.querySelector(".markedContent")?n.querySelectorAll(".markedContent > *:not(.markedContent"):n.children;if(r){let ct=0;P.items.forEach((gt,At)=>{if(!isTextItem(gt))return;const St=rt[ct];if(!St)return;const yt=r(Object.assign({pageIndex:Z,pageNumber:L,itemIndex:At},gt));St.innerHTML=yt,ct+=gt.str&&gt.hasEOL?2:1})}t()}).catch(o),()=>cancelRunningTask(J)}return reactExports.useLayoutEffect(R,[r,o,t,q,Z,L,P,d]),React.createElement("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:s,onMouseDown:l,ref:u})}function AnnotationLayer(){const j=useDocumentContext();invariant(j,"Unable to find Document context. Did you wrap <Page /> in <Document />?");const r=usePageContext();invariant(r,"Unable to find Page context.");const B=Object.assign(Object.assign({},j),r),{imageResourcesPath:c,linkService:A,onGetAnnotationsError:W,onGetAnnotationsSuccess:q,onRenderAnnotationLayerError:Z,onRenderAnnotationLayerSuccess:L,page:k,pdf:_,renderForms:N,rotate:x,scale:P=1}=B;invariant(k,"Attempted to load page annotations, but no page was specified.");const[p,u]=useResolver(),{value:a,error:y}=p,S=reactExports.useRef(null);warning(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function C(){a&&q&&q(a)}function m(){y&&(warning(!1,y.toString()),W&&W(y))}function t(){u({type:"RESET"})}reactExports.useEffect(t,[u,k]);function o(){if(!k)return;const n=makeCancellablePromise(k.getAnnotations()),I=n;return n.promise.then($=>{u({type:"RESOLVE",value:$})}).catch($=>{u({type:"REJECT",error:$})}),()=>{cancelRunningTask(I)}}reactExports.useEffect(o,[u,k,N]),reactExports.useEffect(()=>{if(a!==void 0){if(a===!1){m();return}C()}},[a]);function l(){L&&L()}function s(n){warning(!1,`${n}`),Z&&Z(n)}const d=reactExports.useMemo(()=>k.getViewport({scale:P,rotation:x}),[k,x,P]);function R(){if(!_||!k||!a)return;const{current:n}=S;if(!n)return;const I=d.clone({dontFlip:!0}),$={annotations:a,annotationStorage:_.annotationStorage,div:n,downloadManager:null,imageResourcesPath:c,linkService:A,page:k,renderForms:N,viewport:I};n.innerHTML="";try{pdfjs$1.AnnotationLayer.render($),l()}catch(z){s(z)}return()=>{}}return reactExports.useEffect(R,[a,c,A,k,N,d]),React.createElement("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:S})}var __rest=globalThis&&globalThis.__rest||function(j,r){var B={};for(var c in j)Object.prototype.hasOwnProperty.call(j,c)&&r.indexOf(c)<0&&(B[c]=j[c]);if(j!=null&&typeof Object.getOwnPropertySymbols=="function")for(var A=0,c=Object.getOwnPropertySymbols(j);A<c.length;A++)r.indexOf(c[A])<0&&Object.prototype.propertyIsEnumerable.call(j,c[A])&&(B[c[A]]=j[c[A]]);return B};const defaultScale=1,Page=function j(r){const B=useDocumentContext();invariant(B,"Unable to find Document context. Did you wrap <Page /> in <Document />?");const c=Object.assign(Object.assign({},B),r),{_className:A="react-pdf__Page",_enableRegisterUnregisterPage:W=!0,canvasBackground:q,canvasRef:Z,children:L,className:k,customRenderer:_,customTextRenderer:N,devicePixelRatio:x,error:P="Failed to load the page.",height:p,inputRef:u,loading:a="Loading page…",noData:y="No page specified.",onGetAnnotationsError:S,onGetAnnotationsSuccess:C,onGetStructTreeError:m,onGetStructTreeSuccess:t,onGetTextError:o,onGetTextSuccess:l,onLoadError:s,onLoadSuccess:d,onRenderAnnotationLayerError:R,onRenderAnnotationLayerSuccess:n,onRenderError:I,onRenderSuccess:$,onRenderTextLayerError:z,onRenderTextLayerSuccess:J,pageIndex:tt,pageNumber:ht,pdf:rt,registerPage:ct,renderAnnotationLayer:gt=!0,renderForms:At=!1,renderMode:St="canvas",renderTextLayer:yt=!0,rotate:V,scale:h=defaultScale,unregisterPage:f,width:E}=c,G=__rest(c,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[U,X]=useResolver(),{value:F,error:M}=U,D=reactExports.useRef(null);invariant(rt,"Attempted to load a page, but no document was specified.");const e=isProvided(ht)?ht-1:tt??null,i=ht??(isProvided(tt)?tt+1:null),g=V??(F?F.rotate:null),v=reactExports.useMemo(()=>{if(!F)return null;let bt=1;const _t=h??defaultScale;if(E||p){const kt=F.getViewport({scale:1,rotation:g});E?bt=E/kt.width:p&&(bt=p/kt.height)}return _t*bt},[p,F,g,h,E]);function T(){return()=>{isProvided(e)&&W&&f&&f(e)}}reactExports.useEffect(T,[W,rt,e,f]);function H(){if(d){if(!F||!v)return;d(makePageCallback(F,v))}if(W&&ct){if(!isProvided(e)||!D.current)return;ct(e,D.current)}}function nt(){M&&(warning(!1,M.toString()),s&&s(M))}function K(){X({type:"RESET"})}reactExports.useEffect(K,[X,rt,e]);function at(){if(!rt||!i)return;const bt=makeCancellablePromise(rt.getPage(i)),_t=bt;return bt.promise.then(kt=>{X({type:"RESOLVE",value:kt})}).catch(kt=>{X({type:"REJECT",error:kt})}),()=>cancelRunningTask(_t)}reactExports.useEffect(at,[X,rt,e,i,ct]),reactExports.useEffect(()=>{if(F!==void 0){if(F===!1){nt();return}H()}},[F,v]);const ot=reactExports.useMemo(()=>F&&isProvided(e)&&i&&isProvided(g)&&isProvided(v)?{_className:A,canvasBackground:q,customTextRenderer:N,devicePixelRatio:x,onGetAnnotationsError:S,onGetAnnotationsSuccess:C,onGetStructTreeError:m,onGetStructTreeSuccess:t,onGetTextError:o,onGetTextSuccess:l,onRenderAnnotationLayerError:R,onRenderAnnotationLayerSuccess:n,onRenderError:I,onRenderSuccess:$,onRenderTextLayerError:z,onRenderTextLayerSuccess:J,page:F,pageIndex:e,pageNumber:i,renderForms:At,renderTextLayer:yt,rotate:g,scale:v}:null,[A,q,N,x,S,C,m,t,o,l,R,n,I,$,z,J,F,e,i,At,yt,g,v]),et=reactExports.useMemo(()=>makeEventProps(G,()=>F&&(v?makePageCallback(F,v):void 0)),[G,F,v]),st=`${e}@${v}/${g}`,ut=`${e}/${g}`;function ft(){switch(St){case"custom":return invariant(_,'renderMode was set to "custom", but no customRenderer was passed.'),React.createElement(_,{key:`${st}_custom`});case"none":return null;case"svg":return React.createElement(PageSVG,{key:`${ut}_svg`});case"canvas":default:return React.createElement(PageCanvas,{key:`${st}_canvas`,canvasRef:Z})}}function Et(){return yt?React.createElement(TextLayer,{key:`${st}_text`}):null}function vt(){return gt?React.createElement(AnnotationLayer,{key:`${st}_annotations`}):null}function Tt(){return React.createElement(PageContext.Provider,{value:ot},ft(),Et(),vt(),L)}function Y(){return i?rt===null||F===void 0||F===null?React.createElement(Message,{type:"loading"},typeof a=="function"?a():a):rt===!1||F===!1?React.createElement(Message,{type:"error"},typeof P=="function"?P():P):Tt():React.createElement(Message,{type:"no-data"},typeof y=="function"?y():y)}return React.createElement("div",Object.assign({className:clsx(A,k),"data-page-number":i,ref:mergeRefs(u,D),style:{"--scale-factor":`${v}`,backgroundColor:q||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},et),Y())},isFunctionOrNode=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Page.propTypes=Object.assign(Object.assign({},eventProps),{canvasBackground:PropTypes.string,canvasRef:isRef,children:PropTypes.node,className:isClassName,customRenderer:PropTypes.func,customTextRenderer:PropTypes.func,devicePixelRatio:PropTypes.number,error:isFunctionOrNode,height:PropTypes.number,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode,noData:isFunctionOrNode,onGetTextError:PropTypes.func,onGetTextSuccess:PropTypes.func,onLoadError:PropTypes.func,onLoadSuccess:PropTypes.func,onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,onRenderTextLayerError:PropTypes.func,onRenderTextLayerSuccess:PropTypes.func,pageIndex:isPageIndex,pageNumber:isPageNumber,pdf:isPdf,renderAnnotationLayer:PropTypes.bool,renderForms:PropTypes.bool,renderMode:isRenderMode,renderTextLayer:PropTypes.bool,rotate:isRotate,scale:PropTypes.number,width:PropTypes.number});const Page$1=Page;displayWorkerWarning();pdfjs$1.GlobalWorkerOptions.workerSrc="pdf.worker.js";pdfjs$1.GlobalWorkerOptions.workerSrc=new URL("/portofoliojs/assets/pdf.worker.min-bc10fb5c.js",self.location).toString();function Resume(){useMediaQuery("(max-width: 40em)");const[j,r]=reactExports.useState(),[B,c]=reactExports.useState(1);function A({numPages:W}){r(W)}return jsxRuntimeExports.jsx(Stack,{id:"resume",component:"section",display:"flex",alignItems:"center",justifyContent:"center",sx:{height:"90vh",alignItems:"center","& > div":{overflowY:"auto"},"& canvas":{width:"100% !important",height:"100% !important"},"& .react-pdf__Page":{overflowY:"hide"},"& .react-pdf__Page > div":{display:"none"}},children:jsxRuntimeExports.jsx(Document$1,{file:ResumePDF,onLoadSuccess:A,children:jsxRuntimeExports.jsx(Page$1,{pageNumber:B})})})}export{Resume as default};
